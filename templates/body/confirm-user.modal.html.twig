<script type="text/javascript">

'use strict';
	var socketclienttype = "{{ current_menu is defined ? current_menu : 'login'}}"; //get value	//var whatIsIt = 'login'|var whatIsIt = 'register'|var whatIsIt = 'changeRole'|var whatIsIt = 'request_transfer'|
	var href = "{{ path is defined ? path : ""}}"; //get value	(lien cible)
	var classesLocation = "{{ path('login') }}";
	var imgLocation = "{{ absolute_url(asset("assets/img/")) }}";
	var utilsLocation = "{{ absolute_url(asset("assets/js/intlTelInput/utils.js")) }}";
	
	{#{% set sub_request = sub_request|json_decode %}#}

	{% if sub_request is defined %}
		var post_sub_request = "{{ sub_request }}" ;
		var sub_request = {
							"profil":{//That is for daticash client api
								"user_phone" : "000000000", 
								"email" : "ExempleUser@gmail.com", 
								"username" : "Exemple Username"
							}, 
							{% if sender_phone is defined %}
							"transaction" : { 
								"sender_phone" : "{{ sender_phone }}", 
								"sender_country_code": "{{ sender_country_code }}",
								"account_ref": "",
								"error": "{{ sender_country_code }}"//in error case								
							},
							{% endif%}
							
							{% if amount_to_topup is defined %}
							"status_transaction_info" : { 
								"amount_to_topup" : "{{ amount_to_topup }}", 
								"client_ip" : "{{ client_ip }}", 
								"sender_email_activated" : "{{ sender_email_activated }}", 
								"sender_phone_activated" : "{{ sender_phone_activated }}",
								"currency_sent" : "{{ currency_sent }}", 							
								"sender_phone" : "{{ sender_phone }}", 
								"sender_country_code": "{{ sender_country_code }}",
								"sender_id": "{{ sender_id }}",								
							},
							{% endif%}
							
						}; //get value	type tableau
						

	{% else %}	
		var sub_request = {};
	{% endif%}		

	var social_link = (
						''							
					);
/*											
	var message_alert = ('Montant insufisant, Nous ne pouvons aboutir à votre requête. </br>Cependant vous avez la possiblité de recharger votre compre via l\'une des méthodes ci-dessous : </br>'+
			'<div class="row">'+
					'<span><img style="cursor:pointer;padding: 12px;" src="'+ imgLocation +'payment_method/eway_creditcard_master.png" /></span>'+
					'<span><img style="cursor:pointer;padding: 12px;" src="'+ imgLocation +'payment_method/eway_creditcard_visa.png" /></span>'+
					'<span><img style="cursor:pointer;padding: 12px;" src="'+ imgLocation +'payment_method/eway_masterpass.png" /></span>'+
					'<span><img style="cursor:pointer;padding: 12px;" src="'+ imgLocation +'payment_method/eway_paypal.png" /></span>'+
					'<span><img style="cursor:pointer;padding: 12px;" src="'+ imgLocation +'payment_method/eway_vme.png" /></span>'+
					'</br>Cela ne vous prendra que quelques minutes et ensuite votre transaction va se poursuivre.'+
			'</div>'
		);
*/		
	var message_alert = 'To complete your transaction securely, you must first register.</br>It will only take a few minutes and then your transaction will continue.</br>'; //get value	
									  
	var sessionid = false;
									  
									  
// Check session and show dati-userstatus menu in the <div class = "dati_user_status"><div>
$(document).ready(function(){

	var whatIsIt = socketclienttype;	 								
	$('<div />').prependTo('body').prop('id', 'body_mask').addClass("body_mask"); 					
	var modalConfirmation = new Modal('DATIUSER_CLIENT',whatIsIt ,sub_request , href);
	modalConfirmation.start();
					
});

function emailIsValid (email) {
	return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)
}

function passwordLength(password){
	var n = password.length;
	if(n < 6){
			return false;
	}
	return true;
}

function pinLength(element, value){
	//alert(element)
	//alert(value)
	var n = value.length;
	if(n != 6){
		$(element).empty().text("Invalid PIN, left characters: "+ (6 - value.length)).attr("class", "text-danger")
			return false;
	}else{
		$(element).empty().text("Good! your pin is ✓ Valid").attr("class", "text-success");
	}
	return true;
}

function usernameIsValid(username){
	var n = username.length;
	if(n < 4){
			return false;
	}
	return true;
}

function _goto(link) {
    if(link !== "#" || link !== ""){
		window.location = link;
	}else{
		window.history.back();	//retourner à la page précedente					
	}
};

var daticash_current_phone_number;  
function configure_intlTelInput(){
	var username = document.querySelector("#username");
	daticash_current_phone_number = window.intlTelInput(username, {
	  // allowDropdown: false,
	  // autoHideDialCode: false,
	  // autoPlaceholder: "off",
	  // dropdownContainer: document.body,
	  // excludeCountries: ["us"],
	  // formatOnDisplay: false,
	   geoIpLookup: function(callback) {
	    $.get("http://ipinfo.io", function() {}, "jsonp").always(function(resp) {
	      var countryCode = (resp && resp.country) ? resp.country : "";
	       callback(countryCode);
	     });
	   },
	  // hiddenInput: "full_number",
	  // initialCountry: "auto",
	  // localizedCountries: { 'de': 'Deutschland' },
	   nationalMode: true,
	  // onlyCountries: ['cm', 'ng', 'eg', 'ci', 'sn'],
	  // placeholderNumberType: "MOBILE",
	  // preferredCountries: ['cn', 'jp'],
	  separateDialCode: true,
	  utilsScript: utilsLocation,//get value
	});

	var output = document.querySelector("#phone-feedback");
		
	var handleChange = function() {
		//impose the numeric characters
		var value = jQuery(this).val();
		value = value.replace(/[^0-9]+/g, '');
		jQuery(this).val(value);		
		
	  //show message if incorrect phone number	
	  var text = (daticash_current_phone_number.isValidNumber()) ? 'International: ' + daticash_current_phone_number.getNumber() + ' ✓ Valid': "Please enter a valid number below";
	  var textNode = document.createTextNode(text);
	  output.innerHTML = "";
	  output.appendChild(textNode);
	  
		  /* change style color*/
		  if(daticash_current_phone_number.isValidNumber()){
			$("#phone-feedback").attr("class",'text-success');
			$("#username").removeClass("error").addClass("success");
			
		  }else{
			$("#phone-feedback").attr("class",'text-danger');		  
			$("#username").addClass("error").removeClass("success");
			$(this).parent().find("#input-group-text").css("color: #ff7c7c; border-color:#ff7c7c");
		  } 	
	
	};
	
	// listen to "keyup", but also "change" to update when the user selects a country
	username.addEventListener('change', handleChange);
	username.addEventListener('keyup', handleChange);
}

function autoChoose_country_code(country_code){
		configure_intlTelInput()
			$("#input_group_appendto_phone").remove()
			$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');

	$(".iti__selected-flag").trigger("click");
	$(".iti__country[data-dial-code='"+country_code+"']").trigger("click");						
}
					
function configure_intlTelInput_daticash_topup(){
	var topup_by_mobile_money_source = document.querySelector("#topup_by_mobile_money_source");
	var input = window.intlTelInput(topup_by_mobile_money_source, {
	  // allowDropdown: false,
	  // autoHideDialCode: false,
	  // autoPlaceholder: "off",
	  // dropdownContainer: document.body,
	  // excludeCountries: ["us"],
	  // formatOnDisplay: false,
	   geoIpLookup: function(callback) {
	    $.get("http://ipinfo.io", function() {}, "jsonp").always(function(resp) {
	      var countryCode = (resp && resp.country) ? resp.country : "";
	       callback(countryCode);
	     });
	   },
	  // hiddenInput: "full_number",
	  // initialCountry: "auto",
	  // localizedCountries: { 'de': 'Deutschland' },
	  // nationalMode: false,
	  // onlyCountries: ['cm', 'ng', 'eg', 'ci', 'sn'],
	  // placeholderNumberType: "MOBILE",
	  // preferredCountries: ['cn', 'jp'],
	  separateDialCode: true,
	  utilsScript: utilsLocation,//get value
	});		
}
										
function daticash_autoLogin(popUp,country_code,phone_number,pin_code){
	$(".chat-popup").remove();										
	$('#body_mask').after(popUp);
	$('.show_or_hide_pin_js').remove();			
	$('.new_pin_code-group').remove();			
	$('.retype_new_pin_code-group').remove();			

	autoChoose_country_code(country_code);
/* 			configure_intlTelInput()
				$("#input_group_appendto_phone").remove()
				$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');

		$(".iti__selected-flag").trigger("click");
		$(".iti__country[data-dial-code='"+country_code+"']").trigger("click"); */
							
			$('#pin_code').keypad();
			
			$("#username").prop('disabled', true);	
			$("#pin_code").prop('disabled', true);	
			

	
	$("#username").val(phone_number);
	$("#pin_code").val(pin_code);
	
	$('.login-feedback').html('<div class="alert alert-success text-center">Auto Login...</div>');
	$('#daticash_login_btn').trigger("click");
}

function daticash_select_transaction_status_position(step){
	console.log(step);
		switch(step) {
    		case 1:
				$(".step-one").addClass("finish active");
				break;
			case 2:
				$(".step-one").addClass("finish active");$(".step-one i").removeClass("fa-user").addClass("fa-check text-success");
				$(".step-two").addClass("finish active");
				break;
				
			case 3:
				$(".step-one").addClass("finish active");$(".step-one i").removeClass("fa-user").addClass("fa-check text-success");
				$(".step-two").addClass("finish active");$(".step-two i").removeClass("fa-edit").addClass("fa-check text-success");				
				$(".step-three").addClass("finish active");
				break;
			default :
				$("#daticash_display_transaction_status_topUp").addClass("tab");			
		}		
}

function show_alert(type = "error", message, dismissible = 1){
	switch(type.toLowerCase()) {
    		case "error":
				if (dismissible === 1){
					return ('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
				}else{
					return ('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
				}				
				break;

			case "success":
				if (dismissible === 1){
					return ('<div class="alert alert-success alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
				}else{
					return ('<div class="alert alert-success"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
				}
				break;

			default :
				return ('');
		}
}

/**
 * @return {undefined}
 */
function Modal(socketclienttype,whatIsIt ,sub_request , href, msg) {
	/** @type {string} */
  this.socketclienttype = socketclienttype;		
  /** @type {string} */
  this.whatIsIt = whatIsIt;		
  /** @type {string} */
  this.sub_request = sub_request;	
	/** @type {string} */
  this.user_id;			
  /** @type {string} */
  this.user_email;		
	/** @type {string} */
  this.login_phone;		
	/** @type {string} */
  this.user_token;	//update after login
	/** @type {string} */
  this.href = href;	
	/** @type {string} */
  this.type = whatIsIt;	
	/** @type {string} */
  this.token;
  /** @type {string} */  
  this.verify;
   /** @type {string} */  
  this.by;
  /** @type {string} */
  this.value = "confirm-token";
  /** @type {string} */
  this.link;
  this._autoTimer;
  this._rebordCount;
	this._iTimer;
  this.second;
   /** @type {string} */
  this.username ="";
  /** @type {string} */
  this.password = "";	
  /** @type {string} */
  this.msg = msg;	    
  /** @type {number} */
  this._try = 0;	  
	/** @type {string} */
  this.login_error = "";
  this.hidedphone; 
  this._step = 0;
  this.process_error;  
  this.tampon_data = {};
	

	this._resize = function() {

			jQuery("#ib-center").css({
				height : jQuery(window).height()- 600  + "px",
				width : jQuery(window).width()- 50%  + "px"
			});
	};

	this.connexion_popUp = (
						'<div class="chat-popup" id="connexion">'+
							'<div id="ib-center" class="dati_popup">'+
								'<div class="dati_user_status_login"></div>'+
								'<div class="container">'+
									'<div class="row d-flex justify-content-center">'+
										'<div class="login-box">'+
											'<div class="login-logo">'+
												'<a href="http://www.daticloud.com" target="_blank" style="color: #fff;">'+
													'<img src="'+imgLocation+'Datilong-02.png" style="width:100%;"/>'+
												'</a>'+
											'</div>'+
										  '<div class="login-feedback"></div>'+
										  '<div class="card">'+
											'<div class="card-body login-card-body">'+										  
											 '<div class="row mb-2" style="padding: 12px;">'+
												'<div class="col-5" style="text-align: center;margin-right: 50px;color: #007bff;border: solid 1px #007bff;border-radius: 50px;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="dati_login_modal" name="dati_login_modal">Login</p> </div>'+    
												'<div class="col-5" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="dati_register_modal" name="dati_register_modal">Register</p> </div>'+
											  '</div>'+											  
											  '<small id="allow_reset-feedback"></small>'+
											  '<form method="post" class="form login-form">'+
												'<small id="email-feedback"></small>'+												
												'<div class="input-group mb-3">'+
												  '<input type="email" class="form-control" id="username" name="username" placeholder="Username or Email">'+
												  '<div class="input-group-append">'+
													'<div class="input-group-text">'+
													  '<span class="fas fa-user"></span>'+
													'</div>'+
												  '</div>'+
												'</div>'+
												'<small id="password-feedback"></small>'+												
												'<div class="input-group mb-3">'+
												  '<input type="password" class="form-control" id="password" name="password" placeholder="Password">'+
												  '<div class="input-group-append">'+
													'<div class="input-group-text">'+
													  '<span class="fas fa-key"></span>'+
													'</div>'+
												  '</div>'+
												'</div>'+
														'<div id="re_captcha_container" class="text-center mb-2">'+
														 '<div id="g-recaptcha"></div>'+
													 '</div>'+
													 '<hr>'+
												'<div class="row">'+
												  '<div class="col-8">'+
													'<div class="icheck-primary">'+
													  '<input type="checkbox" id="remember" name="remember" style="margin:5px;" '+
													  '<label for="remember">'+
														'Remember Me'+
													  '</label>'+
													'</div>'+
												  '</div>'+
												  '<div class="col-4">'+
													'<input type="hidden" name="action" class="action" value="login">'+
													'<button type="submit" class="btn btn-primary btn-block" id="login-form-btn" name="login-form-btn" >Sign In</button>'+
												  '</div>'+
												'</div>'+
											  '</form>'+
												social_link +
												'<div class="row">'+ 
												  '<div class="col-12" >'+
														'<div class="col-12 mb-3" font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display: inline;color: #007bff;" id="allow_reset_password" name="allow_reset_password">password forgotten?</p></div>'+
												  '</div>'+
												'</div>'+
											'</div>'+
										  '</div>'+
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+
						'</div'
						);

	this.register_popUp = (
              '</div>'+
					'<div class="chat-popup" id="register">'+
						'<div id="ib-center" class="dati_popup">'+
							'<div class="dati_user_status_login"></div>'+
							'<div class="container">'+
								'<div class="row d-flex justify-content-center">'+
									'<div class="login-box">'+
										'<div class="login-logo">'+
											'<a href="http://www.daticloud.com" style="color: #fff;">'+
												'<img src="'+imgLocation+'Datilong-02.png" style="width:100%;"/>'+
											'</a>'+
										'</div>'+
									  '<div class="login-feedback"></div>'+
									  '<div class="card">'+
										'<div class="card-body login-card-body">'+ 
										  '<div class="row mb-2" style="padding: 12px;">'+
											'<div class="col-5" style="text-align: center;margin-right: 50px;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="dati_login_modal" name="dati_login_modal">Login</p> </div>'+    
											'<div class="col-5" style="text-align: center;float: right;color: #007bff;border: solid 1px #007bff;border-radius: 50px;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="dati_register_modal" name="dati_register_modal">Register</p> </div>'+
										  '</div>'+												  
										  
										  '<form method="post" class="form login-form">'+
											'<div class="input-group mb-3">'+
											  '<label for="username" style="width: 100%; margin-bottom: .5rem;">'+
												'<font style="vertical-align: inherit;">Username&nbsp</font>'+
												'<small id="username-feedback"></small>'+
											  '</label>'+
											  '<input type="text" class="form-control" id="username" name="username" placeholder="Username">'+
											  '<div class="input-group-append" id="input_group_appendto_username">'+
												'<div class="input-group-text" id="fa-icon">'+
												  '<span class="fas fa-user"></span>'+
												'</div>'+
											  '</div>'+
											'</div>'+
											'<div class="input-group mb-3">'+
											  '<label for="email" style="width: 100%; margin-bottom: .5rem;">'+
												'<font style="vertical-align: inherit;">Email&nbsp</font>'+
												'<small id="email-feedback"></small>'+
											  '</label>'+
											  '<input type="email" class="form-control" id="email" name="email" placeholder="Email">'+
											  '<div class="input-group-append">'+
												'<div class="input-group-text">'+
												  '<span class="fas fa-envelope"></span>'+
												'</div>'+
											  '</div>'+
											'</div>'+
											'<div class="input-group mb-3">'+
											  '<label for="password" style="width: 100%; margin-bottom: .5rem;"><font style="vertical-align: inherit;">Password&nbsp</font></font>'+
												'<small id="password-feedback"></small>'+
												'<small style="float:right;margin-top: 4px;color: #007bff;">'+
												'Show password<input type="checkbox" id="show_hide_pass" style="vertical-align: text-bottom;margin-left: 5px;color: #777777;font-weight: 100;"></small></label>'+
											  '<input type="password" class="form-control" id="password" name="password" placeholder="Password" maxlength="6">'+
											  '<div class="input-group-append">'+
												'<div class="input-group-text">'+
												  '<span class="fas fa-key"></span>'+
												'</div>'+
											  '</div>'+
											'</div>'+
											
												 '<div id="re_captcha_container" class="text-center mb-2">'+
													 '<div id="g-recaptcha"></div>'+
												 '</div>'+
												 '<hr>'+
											'<div class="row">'+
											  '<div class="col-8">'+
												'<div class="icheck-primary" style="font-weight: 100;">'+
												  '<input type="checkbox" id="agree" name="agree" style="margin:5px;" '+
												  '<label for="agreement">'+
													'I agree to the <a href="https://app.termly.io/document/terms-of-use-for-saas/9697da89-93b4-427a-ad5b-d41243fe5436" target="_blank">Terms and Conditions </a> and i\'ve take knowledge of the <a href="https://app.termly.io/document/privacy-policy/6957bc16-55f2-427c-8e66-64d1d4c387a9" target="_blank"> Privacy Policy</a>'+
												  '</label></br>'+
												'</div>'+
											  '</div>'+
											  '<div class="col-4">'+
												'<input type="hidden" name="action" class="action" value="create_account">'+
												'<button type="submit" class="btn btn-primary btn-block" id="create_account_btn" name="create_account_btn" disabled >Create</button>'+
											  '</div>'+
											'</div>'+
										  '</form>'+
										'</div>'+
									  '</div>'+
									'</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'	
	);

	this.productList = "";
/* 	this.productList = (
					  '<nav class="main-header navbar navbar-expand navbar-white navbar-light" style="position: absolute;right: 0;background: transparent; border-bottom: none;">'+
						'<ul class="navbar-nav ml-auto" name="dati-product-list" id="dati-product-list">'+
						  '<li class="nav-item dropdown">'+
							'<a class="nav-link" data-toggle="dropdown" href="#">'+
							  '<i class="fas fa-th fa-lg fa-2x" style="color:#fff"></i>'+
							'</a>'+
							'<div class="dropdown-menu dropdown-menu-lg dropdown-menu-right" style="max-width: 350px;min-width: 350px;">'+
							  '<span class="dropdown-header">Daticloud Product</span>'+
							  '<div class="dropdown-divider"></div><br>'+
								'<div class="col-12">'+
									'<div class="row">'+
									
										'<div class="col-4" style="text-align: center;">'+
										  '<a href="#" class="dropdown-item" style="padding: .5rem .5rem;">'+
											'<i class="fas fa-2x"><img src="'+imgLocation+'icons/DATIcash.png" alt="X" style="width: 100%;" ></img></i>'+											
											'<span class="text-muted text-sm" style="display: block; white-space: pre-wrap;">DATICASH</span>'+
										  '</a>'+
										'</div>'+
										
										'<div class="col-4" style="text-align: center;">'+
										  '<a href="#" class="dropdown-item" style="padding: .5rem .5rem;">'+
											'<i class="fas fa-2x"><img src="'+imgLocation+'icons/default_DATIcart.png" alt="X" style="width: 100%;" ></img></i>'+
											'<span class="text-muted text-sm" style="display: block; white-space: pre-wrap;">DATICART</span>'+
										  '</a>'+
										'</div>'+ 
										
										'<div class="col-4" style="text-align: center;">'+
										  '<a href="#" class="dropdown-item" style="padding: .5rem .5rem;">'+
											'<i class="fas fa-2x"><img src="'+imgLocation+'icons/default_DATItaxi.png" alt="X" style="width: 100%;" ></img></i>'+
											'<span class="text-muted text-sm" style="display: block; white-space: pre-wrap;">DATITAXI</span>'+
										  '</a>'+
										'</div>'+
										
										'<div class="col-4" style="text-align: center;">'+
										  '<a href="#" class="dropdown-item" style="padding: .5rem .5rem;">'+
											'<i class="fas fa-2x"><img src="'+imgLocation+'icons/default_DATInjangi.png" alt="X" style="width: 100%;" ></img></i>'+
											'<span class="text-muted text-sm" style="display: block; white-space: pre-wrap;">DATINJANGI</span>'+
										  '</a>'+
										'</div>'+
										
										'<div class="col-4" style="text-align: center;">'+
										  '<a href="#" class="dropdown-item" style="padding: .5rem .5rem;">'+
											'<i class="fas fa-2x"><img src="'+imgLocation+'icons/default_DATIschool.png" alt="X" style="width: 100%;" ></img></i>'+
											'<span class="text-muted text-sm" style="display: block; white-space: pre-wrap;">DATISCHOOL</span>'+
										  '</a>'+
										'</div>'+
										
										'<div class="col-4" style="text-align: center;">'+
										  '<a href="#" class="dropdown-item" style="padding: .5rem .5rem;">'+
											'<i class="fas fa-2x"><img src="'+imgLocation+'icons/default_DATImail.png" alt="X" style="width: 100%;" ></img></i>'+
											'<span class="text-muted text-sm" style="display: block; white-space: pre-wrap;">DATIMAIL</span>'+
										  '</a>'+
										'</div>'+
										
									'</div><br>'+										
								'</div>'+
								
							  '<div class="dropdown-divider"></div>'+
							  '<a href="http://www.daticloud.com" target="_blank" class="dropdown-item dropdown-footer">See All Products</a>'+
							'</div>'+
						  '</li>'+
						  '<li class="nav-item ">'+
							'<button id="btn_close_modal" name="btn_close_modal" type="button" class="close" data-dismiss="modal"><i class="fas fa-th fa-times fa-2x" style="color:#fff"></i></button></div>'+		
						  '</li>'+						  
						'</ul>'+
					  '</nav>'
					  ); */

	this.request_transfer_popUp = function(){
		if(sub_request.transaction !== undefined){
			return	(
					'<div class="chat-popup" id="request_transfer">'+
						'<div id="ib-center" class="dati_popup">'+
							'<div class="container">'+
							  '<div class="login-feedback"></div>'+
										  
								'<div class="row">'+
									'<div class="col-md-5" style="margin:auto;">'+
										'<div class="card border-primary mb-3" style=" top: 12px; ">'+
											'<div class="card-header bg" style="background-color: #204051!important;">'+
												'<h4 class="text-white">Transaction confirm</h4>'+
												'<div style="position: absolute;top: 15px;right: 15px;">'+
														'<button id="btn_close_modal" name="btn_close_modal" type="button" class="close" data-dismiss="modal">×</button>'+
												'</div>'+
											'</div>'+

											'<div class="card-body text-primary" id="dati_check_process" name="dati_check_process">'+							
					
												 '<div class="" id="conversation" style ="overflow-y: auto; background-color: #66666621;">'+
													'<div class="lf-loading">'+
														'<div class="spinner" id="loading_image" style="display: blok;">'+
															'<div class="bounce1" ></div>'+
															'<div class="bounce2"></div>'+
															'<div class="bounce3"></div>'+
														'</div>'+
													'</div>'+
												'</div>'+
												'<p class="text-center mb-3" style="color:#000">'+
													'Vous êtes sur le point d\'effectuer une transaction de '+ sub_request.transaction.total_pay + sub_request.transaction.currency_sent +' vers le numero '+ sub_request.transaction.recipient_phone + sub_request.transaction.recipient_name +';'+                      
												'</p>'+
													'<div name="dati_check_whith_sms" id="dati_check_whith_sms" style="color: #204051;" class="social-auth-links text-center mb-3">'+
														'<label for="daticash_code" >Bien vouloir entrer votre code pour la Confirmation.</label>'+
														'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="daticash_code" id="daticash_code" style="font-size: 55px;text-align: center;" maxlength="6" placeholder="xxxxxx">'+
									
													'</div>'+
												'<hr>'+													
											'</div>'+
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+						
						'</div>'+
					'</div>'		
					);			
		}
	}

	this.confirmChangeRole_popUp = (
					'<div class="chat-popup" id="confirmChangeRole">'+
						'<div id="ib-center" class="dati_popup">'+
							'<div class="container">'+
							  '<div class="login-feedback"></div>'+
										  
								'<div class="row">'+
									'<div class="col-md-5" style="margin:auto;">'+
										'<div class="card border-primary mb-3" style=" top: 12px; ">'+
											'<div class="card-header bg" style="background-color: #204051!important;">'+
												'<h4 class="text-white">Confirmation de la transaction</h4>'+
												'<div style="position: absolute;top: 15px;right: 15px;">'+
														'<button id="btn_close_modal" name="btn_close_modal" type="button" class="close" data-dismiss="modal">×</button>'+
												'</div>'+
											'</div>'+

											'<div class="card-body text-primary" id="dati_check_process" name="dati_check_process">'+							
					
												 '<div class="" id="conversation" style ="overflow-y: auto; background-color: #66666621;">'+
													'<div class="lf-loading">'+
														'<div class="spinner" id="loading_image" style="display: blok;">'+
															'<div class="bounce1" ></div>'+
															'<div class="bounce2"></div>'+
															'<div class="bounce3"></div>'+
														'</div>'+
													'</div>'+
												'</div>'+
												'<hr>'+													
											'</div>'+
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+						
						'</div>'+
					'</div>'		
	);	

	this.confirm_token_form_popUp = (
				'<div class="chat-popup" id="confirm_token_form_modal">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="container">'+
							'<div class="row">'+
								'<div class="col-md-5" style="margin:auto;">'+
									'<div class="card border-primary mb-3" style=" top: 12px; ">'+
										'<div class="card-header bg" style="background-color: #204051!important;">'+
											'<h4 class="text-white">Activation du compte</h4>'+
											'<div style="position: absolute;top: 15px;right: 15px;">'+
													'<button id="btn_close_modal" name="btn_close_modal" type="button" class="close" data-dismiss="modal">×</button></div>'+
											'</div>'+
										'<div class="card-body text-primary" id="dati_check_process" name="dati_check_process">'+							
											'<div class="" id="conversation" style ="overflow-y: auto; background-color: #66666621;">'+
												'<div class="lf-loading">'+
													'<div class="spinner" id="loading_image" style="display: blok;">'+
														'<div class="bounce1"></div>'+
														'<div class="bounce2"></div>'+
														'<div class="bounce3"></div>'+
													'</div>'+
												'</div>'+
											'</div>'+
											'<p class="text-center mb-3" style="color: #204050;">'+
												'A message has been sent to '+ this.user_email +'. <br>Please follow the link it contains to activate your account.'+                      
											'</p>'+
											'<p style="text-align: center;color: #000;" class="mb-0">No access to email now ?</p>'+
												'<div name="dati_check_whith_sms" id="dati_check_whith_sms" class="social-auth-links text-center mb-3">'+
													'<div name="dati_sms_btn" id="dati_sms_btn" class=" btn-block btn-primary" style="display: inline-block; margin-top: .5rem; cursor: pointer">'+
													'Send me a sms to activate'+
													'</div>'+
												'</div>'+
											'<hr>'+													
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+
						'</div>'+						
					'</div>'+
				'</div>'
				);

	this.reset_password_popUp = (
				'<div class="chat-popup" id="id_reset_password_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="dati_user_status_login"></div>'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box">'+
									'<div class="login-logo">'+
										'<a href="http://www.daticloud.com" style="color: #fff;">'+
											'<img src="'+imgLocation+'Datilong-02.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+
								  '<div class="card">'+
									'<div class="card-body login-card-body">'+ 
									  '<div class="row mb-2" style="padding: 12px;">'+
										'<div class="col-5" style="text-align: center;margin-right: 50px;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="dati_login_modal" name="dati_login_modal">Login</p> </div>'+    
										'<div class="col-5" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="dati_register_modal" name="dati_register_modal">Register</p> </div>'+
									  '</div>'+												  
									  
									  '<form method="post" class="form login-form">'+
										'<div class="input-group mb-3">'+
										  '<label for="email" style="width: 100%; margin-bottom: .5rem;">'+
											'<font style="vertical-align: inherit;">Email&nbsp</font>'+
											'<small id="email-feedback"></small>'+
										  '</label>'+
										  '<input type="email" class="form-control" id="email" name="email" placeholder="Email">'+
										  '<div class="input-group-append">'+
											'<div class="input-group-text">'+
											  '<span class="fas fa-envelope"></span>'+
											'</div>'+
										  '</div>'+
										'</div>'+
										
											 '<div id="re_captcha_container" class="text-center mb-2">'+
												 '<div id="g-recaptcha"></div>'+
											 '</div>'+
											 '<hr>'+
										'<div class="row">'+
										  '<div class="col-12">'+
											'<input type="hidden" name="action" class="action" value="reset_password">'+
											'<button type="submit" class="btn btn-primary btn-block" id="reset_password_btn" name="reset_password_btn">Reset Password</button>'+
										  '</div>'+
										'</div>'+
									  '</form>'+
									'</div>'+
								  '</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>'
				);



	this.daticash_topup_popUp = (
				'<div class="chat-popup fade" id="daticash_topup_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="dati_user_status_login"></div>'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
									'<div class="login-logo">'+
										'<a href="http://daticash.com/" style="color: #fff;">'+
											'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+
								  '<div class="login-feedback"></div>'+									
								  '<div class="card body_card_daticash_login">'+
									'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
									 

									'<div class="text-center mb-4">'+
									  '<label for="payment_type">Select Money Source</label>'+
									  '<select class="form-control" name="paymentMethod" id="paymentMethod">'+
										'<option value="momo">Mobile Money</option>'+
										//'<option value="cc">Credit Card</option>'+
										//'<option value="bank">Bank Account</option>'+
										'<option value="pp">Paypal</option>'+
									  '</select>'+
									'</div>'+	

						'<!-- Form Mobile Method -->'+
									  '<form class="form mb-3" method="post" action="" id="mobileMethodForm">'+
									  /* 
										'<div class="form-group form-group_topup_by_mobile_money_source">'+
										  '<label for="topup_by_mobile_money_source">Source Account</label>'+
										  '<input type="tel" id="topup_by_mobile_money_source" name="topup_by_mobile_money_source" class="form-control">'+
										  '<input type="hidden" id="topup_by_mobile_money_source_country_code" name="topup_by_mobile_money_source_country_code" class="form-control">'+
										'</div>'+
										 */
										
											'<label for="username" style="width: 100%; margin-bottom: .5rem;">'+
											  '<font style="vertical-align: inherit;">Phone number&nbsp</font>'+
											  '<small id="phone-feedback" style="display: block;"></small>'+												
											'</label>'+
											'<div class="input-group mb-3 form-daticash_phone">'+
											  '<input type="hidden" class="form-control" id="country_code" name="country_code">'+
											  '<input type="phone" class="form-control" id="username" name="username">'+
											  '<div class="input-group-append" id="input_group_appendto_phone" name="input_group_appendto_phone">'+
												'<div class="input-group-text">'+
												  '<span class="fas fa-user"></span>'+
												'</div>'+
											  '</div>'+
											'</div>'+
										
											'<div class="form-group form-group_topup_by_mobilemoney_currency">'+
											  '<label for="topup_by_mobile_money_amount" style="width: 100%; margin-bottom: .5rem;">'+
												'<font style="vertical-align: inherit;">Amount to recharge&nbsp</font>'+
												'<small id="topup_by_mobile_money_amount-feedback" style = "display: -webkit-inline-box;"></small>'+
											  '</label>'+					
											  '<div class="input-group mb-3">'+
												'<input type="text" class="form-control" placeholder="Amount" aria-label="Amount to recharge" aria-describedby="basic-addon2" name="topup_by_mobile_money_amount" id="topup_by_mobile_money_amount" required="required">'+
												'<div class="input-group-append">'+
												  '<span class="input-group-text" id="topup_by_mobilemoney_currency_txt" name="topup_by_mobilemoney_currency_txt"></span>'+
												'</div>'+
											  '</div>'+
											  '<input type="hidden" name="" id="topup_by_mobilemoney_currency" name="topup_by_mobilemoney_currency">'+
											'</div>'+
											
											'<div class="form-group">'+
											  '<button type="submit" class="daticash_btn btn-daticash btn-block" id="topup_process_by_mobile_money_btn" name="topup_process_by_mobile_money_btn" >Recharge</button>'+
											'</div>'+
											'<div class="form-group" id="topup_by_mobile_money_log" style="background: currentColor;">'+
											'</div>'+
										  '</form>'+	


						'<!-- Form Credit Card Method -->'+
									  '<form action="charge.php" method="post" id="payment-form">'+
										  '<div class="form-row">'+
											'<input type="text" name="fist_name" class="form-control mb-3 StripeElement StripeElement--empty" placeholder="First Name">'+
											'<input type="text" name="last_name" class="form-control mb-3 StripeElement StripeElement--empty" placeholder="Last Name">'+
											'<input type="email" name="email" class="form-control mb-3 StripeElement StripeElement--empty" placeholder="Email">'+
											'<div id="card-element" class="form-control">'+
											'<!-- a Stripe Element will be inserted here. -->'+
											'</div>'+

											'<!-- Used to display form errors -->'+
											'<div id="card_errors" role="alert"></div>'+
										  '</div>'+
										  '<button type="submit" class="daticash_btn btn-daticash btn-block" id="recharge-form-btn" name="recharge-form-btn" >Recharge</button>'+
									  '</form>'+


						'<!-- Form PayPal Method -->'+
									  '<form class="form" method="post" action="" id="paypalMethodFrom">'+
										'<div class="form-group">'+
										  '<input type="email" name="topup_by_paypal_email" id="topup_by_paypal_email" placeholder="Enter you email" class="form-control">'+
										'</div>'+
										'<div class="form-group">'+
										  '<input type="text" name="topup_pp_amount" id="topup_pp_amount" placeholder="Enter amount to recharge" class="form-control">'+
										  '<input type="hidden" name="topup_pp_amount_hidden">'+
										'</div>'+
										'<div class="form-group">'+
										  '<div id="paypal-button-container"></div>'+
										'</div>'+
									  '</form>'+
									  

									  '<!--<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="paypalMethodFrom">'+
										'<div class="form-row">'+
										  '<input type="email" name="topup_pp_email" id="topup_pp_email" class="form-control" placeholder="Enter Your PayPal E-mail address">'+
										'</div>'+
										'<div class="form-row">'+
										  '<input type="text" name="topup_pp_amount" id="topup_pp_amount" class="form-control" placeholder="Amount">'+
										'</div>'+
										'<input type="hidden" name="no_shipping" value="0">'+
										'<input type="hidden" name="no_note" value="1">'+
										'<input type="hidden" name="currency_code" value="USD">'+
										'<input type="hidden" name="lc" value="AU">'+
										'<input type="hidden" name="bn" value="PP-BuyNowBF">'+
										'<input type="hidden" name="return" value="https://net.tutsplus.com/payment-complete/">'+
										  '<button type="submit" class="daticash_btn btn-daticash btn-block" id="recharge-form-btn" name="recharge-form-btn" >Recharge</button>'+
									  '</form>-->'+
									  
						'<!-- Form Bank Method -->'+			  
									  '<form action="" method="post" id="bankPaymentMethod">'+
										  '<input type="hidden" name="localisation" id="localisation" value="<?= $arr_result->country_code; ?>">'+
									  '</form>'+									  

									'</div>'+
								  '</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>'
				
/* 					'<div class="modal fade" id="daticash_topup_popUp" style="z-index: 9999999;">'+
						'<div class="modal-dialog">'+
						  '<div class="modal-content bg-light shadow-sm">'+
							'<div class="modal-header">'+
							  '<h3 class="modal-title">DatiCash Topup</h3>'+
							  '<button type="button" id ="btn_close_modal" class="close" data-dismiss="modal" aria-label="Close">'+
								'<span aria-hidden="true">&times;</span>'+
							  '</button>'+
							'</div>'+
							
							'<div class="modal-body">'+
							  '<form action="" method="post" class="form">'+
								'<div class="form-group">'+
								  '<label for="payment_type">Select Money Source</label>'+
								  '<select class="form-control" name="paymentMethod" id="paymentMethod">'+
									'<option value="momo">Mobile Money</option>'+
									//'<option value="cc">Credit Card</option>'+
									//'<option value="bank">Bank Account</option>'+
									'<option value="pp">Paypal</option>'+
								  '</select>'+
								'</div>'+
							  '</form>'+
							  
							  
							  '<!-- Form Mobile Method -->'+
							  '<form class="form mb-3" method="post" action="" id="mobileMethodForm">'+
								'<div class="form-group form-group_topup_by_mobile_money_source">'+
								  '<label for="topup_by_mobile_money_source">Source Account</label>'+
								  '<input type="tel" id="topup_by_mobile_money_source" name="topup_by_mobile_money_source" class="form-control">'+
								  '<input type="hidden" id="topup_by_mobile_money_source_country_code" name="topup_by_mobile_money_source_country_code" class="form-control">'+
								'</div>'+
								'<div class="form-group">'+
								  '<label for="topup_by_mobilemoney_currency_txt">Amount to recharge</label>'+
								  '<div class="input-group mb-3">'+
									'<input type="text" class="form-control" placeholder="Amount" aria-label="Amount to recharge" aria-describedby="basic-addon2" name="topup_by_mobile_money_amount" id="topup_by_mobile_money_amount" required="required">'+
									'<div class="input-group-append">'+
									  '<span class="input-group-text" id="topup_by_mobilemoney_currency_txt" name="topup_by_mobilemoney_currency_txt"></span>'+
									'</div>'+
								  '</div>'+
								  '<input type="hidden" name="" id="topup_by_mobilemoney_currency" name="topup_by_mobilemoney_currency">'+
								'</div>'+
								'<div class="form-group">'+
								  '<button type="submit" class="btn btn-primary btn-block" id="topup_process_by_mobile_money_btn" name="topup_process_by_mobile_money_btn" >Recharge</button>'+
								'</div>'+
								'<div class="form-group" id="topup_by_mobile_money_log" style="background: currentColor;">'+
								'</div>'+
							  '</form>'+
							  
							  
							  '<!-- Form Credit Card Method -->'+
							  '<form action="charge.php" method="post" id="payment-form">'+
								  '<div class="form-row">'+
									'<input type="text" name="fist_name" class="form-control mb-3 StripeElement StripeElement--empty" placeholder="First Name">'+
									'<input type="text" name="last_name" class="form-control mb-3 StripeElement StripeElement--empty" placeholder="Last Name">'+
									'<input type="email" name="email" class="form-control mb-3 StripeElement StripeElement--empty" placeholder="Email">'+
									'<div id="card-element" class="form-control">'+
									'<!-- a Stripe Element will be inserted here. -->'+
									'</div>'+

									'<!-- Used to display form errors -->'+
									'<div id="card_errors" role="alert"></div>'+
								  '</div>'+
								  '<button type="submit" class="btn btn-primary btn-block" id="recharge-form-btn" name="recharge-form-btn" >Recharge</button>'+
							  '</form>'+
							  

							  '<!-- Form PayPal Method -->'+
							  '<form class="form" method="post" action="" id="paypalMethodFrom">'+
								'<div class="form-group">'+
								  '<input type="email" name="topup_by_paypal_email" id="topup_by_paypal_email" placeholder="Enter you email" class="form-control">'+
								'</div>'+
								'<div class="form-group">'+
								  '<input type="text" name="topup_pp_amount" id="topup_pp_amount" placeholder="Enter amount to recharge" class="form-control">'+
								  '<input type="hidden" name="topup_pp_amount_hidden">'+
								'</div>'+
								'<div class="form-group">'+
								  '<div id="paypal-button-container"></div>'+
								'</div>'+
							  '</form>'+
							  

							  '<!--<form action="https://www.paypal.com/cgi-bin/webscr" method="post" id="paypalMethodFrom">'+
								'<div class="form-row">'+
								  '<input type="email" name="topup_pp_email" id="topup_pp_email" class="form-control" placeholder="Enter Your PayPal E-mail address">'+
								'</div>'+
								'<div class="form-row">'+
								  '<input type="text" name="topup_pp_amount" id="topup_pp_amount" class="form-control" placeholder="Amount">'+
								'</div>'+
								'<input type="hidden" name="no_shipping" value="0">'+
								'<input type="hidden" name="no_note" value="1">'+
								'<input type="hidden" name="currency_code" value="USD">'+
								'<input type="hidden" name="lc" value="AU">'+
								'<input type="hidden" name="bn" value="PP-BuyNowBF">'+
								'<input type="hidden" name="return" value="https://net.tutsplus.com/payment-complete/">'+
								  '<button type="submit" class="btn btn-primary btn-block" id="recharge-form-btn" name="recharge-form-btn" >Recharge</button>'+
							  '</form>-->'+
							  
							  
							  '<form action="" method="post" id="bankPaymentMethod">'+
								  '<input type="hidden" name="localisation" id="localisation" value="<?= $arr_result->country_code; ?>">'+
							  '</form>'+
							  
							'</div>'+
						  '</div>'+
						  '<!-- /.modal-content -->'+
						'</div>'+
						'<!-- /.modal-dialog -->'+
					'</div>' */
				);
			
	this.daticash_request_reset_pin_code_popUp = (
				'<div class="chat-popup" id="daticash_request_reset_pin_code_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="dati_user_status_login"></div>'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
									'<div class="login-logo">'+
										'<a href="http://daticash.com/" style="color: #fff;">'+
											'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+
								  '<div class="login-feedback"></div>'+
								  '<div class="card body_card_daticash_login">'+
									'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
									  '<form method="post" class="form login-form">'+
									  
										'<div class="input-group mb-3">'+
										  '<label for="email" style="width: 100%; margin-bottom: .5rem;">'+
											'<font style="vertical-align: inherit;">Email&nbsp</font>'+
											'<small id="email-feedback"></small>'+
										  '</label>'+
										  '<input type="email" class="form-control" id="email" name="email" placeholder="Email">'+
										  '<div class="input-group-append">'+
											'<div class="input-group-text">'+
											  '<span class="fas fa-envelope"></span>'+
											'</div>'+
										  '</div>'+
										'</div>'+
										
											 '<div id="re_captcha_container" class="text-center mb-2">'+
												 '<div id="g-recaptcha"></div>'+
											 '</div>'+
											 '<hr>'+
										'<div class="row">'+
										  '<div class="col-12 form-group_daticash_request_reset_pin_code">'+
											'<input type="hidden" name="action" class="action" value="daticash_request_reset_pin_code">'+
											'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_request_reset_pin_code_btn" name="daticash_request_reset_pin_code_btn">Reset PIN</button>'+
										  '</div>'+
										'</div>'+
									  '</form>'+
									'</div>'+
								  '</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>'
				);			
				
	this.daticash_confirm_change_or_reset_password_popUp = (
				'<div class="chat-popup" id="daticash_confirm_change_or_reset_password_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="dati_user_status_login"></div>'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
									'<div class="login-logo">'+
										'<a href="http://daticash.com/" style="color: #fff;">'+
											'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+
								  '<div class="login-feedback"></div>'+
								  '<div class="card body_card_daticash_login">'+
									'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
									  '<form method="post" class="form login-form">'+
										'<div class="old_pin_code-group">'+
											'<label id="old_pin_code_label" for="old_pin_code" style="width: 100%; margin-bottom: .5rem;">'+
											  '<font style="vertical-align: inherit;">Old PIN Code&nbsp</font>'+
											  '<small id="old_pin_code-feedback" style = "display: block;"></small>'+
											'</label>'+
											'<small class="show_or_hide_pin_for_old_pin_code_js" style="margin-top: 4px;color: #0a4f68;position: absolute;right: 20px;">'+
											'<i class="show_or_hide_pin_for_old_pin_code_text_js">Show</i><input type="checkbox" id="show_or_hide_pin_for_old_pin_code_id" style="vertical-align: text-bottom;margin-left: 5px;color: #777777;font-weight: 100;"></small>'+												
											'<div class="input-group mb-3">'+
											  '<input type="password" class="form-control" id="old_pin_code" name="old_pin_code" placeholder="Enter your old PIN Code" maxlength="6">'+
											  '<div class="input-group-append">'+
												'<div class="input-group-text">'+
												  '<span class="fas fa-key"></span>'+
												'</div>'+
											  '</div>'+
											'</div>'+
										'</div>'+										'<div class="new_pin_code-group">'+
											'<label id="new_pin_code_label" for="new_pin_code" style="width: 100%; margin-bottom: .5rem;">'+
											  '<font style="vertical-align: inherit;">New PIN Code&nbsp</font>'+
											  '<small id="new_pin_code-feedback"  style = "display: block;"></small>'+
											'</label>'+
											'<small class="show_or_hide_pin_for_new_pin_code_js" style="margin-top: 4px;color: #0a4f68;position: absolute;right: 20px;">'+
											'<i class="show_or_hide_pin_for_new_pin_code_text_js">Show</i><input type="checkbox" id="show_or_hide_pin_for_new_pin_code_id" style="vertical-align: text-bottom;margin-left: 5px;color: #777777;font-weight: 100;"></small>'+												
											'<div class="input-group mb-3">'+
											  '<input type="password" class="form-control" id="new_pin_code" name="new_pin_code" placeholder="Choose New PIN Code" maxlength="6">'+
											  '<div class="input-group-append">'+
												'<div class="input-group-text">'+
												  '<span class="fas fa-key"></span>'+
												'</div>'+
											  '</div>'+
											'</div>'+
										'</div>'+
										
										'<div class="retype_new_pin_code-group">'+	
											'<label id="retype_new_pin_code_label" for="retype_new_pin_code" style="width: 100%; margin-bottom: .5rem;">'+
											  '<font style="vertical-align: inherit;">Retype new PIN Code&nbsp</font>'+
											  '<small id="retype_new_pin_code-feedback" style = "display: block;"></small>'+
											'</label>'+
											'<small class="show_or_hide_pin_for_retype_new_pin_code_js" style="margin-top: 4px;color: #0a4f68;position: absolute;right: 20px;">'+
											'<i class="show_or_hide_pin_for_retype_new_pin_code_text_js">Show</i><input type="checkbox" id="show_or_hide_pin_for_retype_new_pin_code_id" style="vertical-align: text-bottom;margin-left: 5px;color: #777777;font-weight: 100;"></small>'+												
											'<div class="input-group mb-3">'+
											  '<input type="password" class="form-control" id="retype_new_pin_code" name="retype_new_pin_code" placeholder="Retype new PIN code" maxlength="6">'+
											  '<div class="input-group-append">'+
												'<div class="input-group-text">'+
												  '<span class="fas fa-key"></span>'+
												'</div>'+
											  '</div>'+
											'</div>'+
										'</div>'+
																			
											 '<small class="text-center" id="check_pin_code_correspondance-feedback" style = "display: block;"></small>'+
											 '<div id="re_captcha_container" class="text-center mb-2">'+
												 '<div id="g-recaptcha"></div>'+
											 '</div>'+
											 '<hr>'+
										'<div class="row group_daticash_daticash_confirm_change_or_reset_pin_code">'+
										  '<div class="col-12">'+
											'<input type="hidden" name="action" class="action" value="daticash_confirm_change_or_reset_pin_code">'+
											'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_confirm_change_or_reset_pin_code_btn" name="daticash_confirm_change_or_reset_pin_code_btn">Change PIN</button>'+
										  '</div>'+
										'</div>'+
									  '</form>'+
									'</div>'+
								  '</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>'
				);			
				
	this.daticash_inappropriate_mail_popUp = (
				'<div class="chat-popup" id="daticash_inappropriate_mail_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="dati_user_status_login"></div>'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
									'<div class="login-logo">'+
										'<a href="http://daticash.com/" style="color: #fff;">'+
											'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+
								  '<div class="card body_card_daticash_login">'+
									'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
									 
									 '<div class="text-center mb-4">Thank you for your feedback</div>'+
										'<div class="row">'+
											'<div class="col-6"></div>'+
											'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="exit_btn" name="exit_btn">Return Login</p></div>'+
										'</div>'+
									 '</div>'+

									'</div>'+
								  '</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>'
				);	
				
	this.daticash_email_verified_popUp = (
				'<div class="chat-popup" id="daticash_email_verified_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="dati_user_status_login"></div>'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
									'<div class="login-logo">'+
										'<a href="http://daticash.com/" style="color: #fff;">'+
											'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+
								  '<div class="login-feedback"></div>'+									
								  '<div class="card body_card_daticash_login">'+
									'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
									 
									 '<div class="text-center mb-4">Your account is activated and your email has been successfully verified.</div>'+
										'<div class="row">'+
											'<div class="col-6"></div>'+
											'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="exit_btn" name="exit_btn">Continue</p></div>'+
										'</div>'+
									 '</div>'+

									'</div>'+
								  '</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>'
				);
				
	this.daticash_register_if_not_exist_popUp = (
				'<div class="chat-popup" id="daticash_register_if_not_exist_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="dati_user_status_login"></div>'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
									'<div class="login-logo">'+
										'<a href="http://daticash.com/" style="color: #fff;">'+
											'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+
								  '<div class="login-feedback"></div>'+
								  '<div class="card body_card_daticash_login">'+
									'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
									  '<form method="post" class="form login-form">'+
										'<small style="float: right;">For an optimal experience with the daticash system, tell us who you are. We respect your privacy.&nbsp</small>'+
										'<div class="input-group mb-3">'+
										  '<label for="lastname" style="width: 100%; margin-bottom: .5rem;">'+
											'<font style="vertical-align: inherit;">Last Name</font>'+
											'<small id="lastname-feedback"></small>'+
										  '</label>'+
										  '<input type="text" class="form-control" id="lastname" name="lastname" placeholder="Last Name">'+
										  '<div class="input-group-append">'+
											'<div class="input-group-text">'+
											  '<span class="fas fa-user"></span>'+
											'</div>'+
										  '</div>'+
										'</div>'+
										
										'<div class="input-group mb-3">'+
										  '<label for="firstname" style="width: 100%; margin-bottom: .5rem;">'+
											'<font style="vertical-align: inherit;">First Name&nbsp</font>'+
											'<small id="firstname-feedback"></small>'+
										  '</label>'+
										  '<input type="text" class="form-control" id="firstname" name="firstname" placeholder="First Name">'+
										  '<div class="input-group-append">'+
											'<div class="input-group-text">'+
											  '<span class="fas fa-user"></span>'+
											'</div>'+
										  '</div>'+
										'</div>'+									  
									  									  
										'<div class="input-group mb-3">'+
										  '<label for="email" style="width: 100%; margin-bottom: .5rem;">'+
											'<font style="vertical-align: inherit;">Email</font>'+
											'<small id="email-feedback"></small>'+
										  '</label>'+
										  '<input type="email" class="form-control" id="email" name="email" placeholder="Email">'+
										  '<div class="input-group-append">'+
											'<div class="input-group-text">'+
											  '<span class="fas fa-envelope"></span>'+
											'</div>'+
										  '</div>'+
										'</div>'+
										
											 '<div id="re_captcha_container" class="text-center mb-2">'+
												 '<div id="g-recaptcha"></div>'+
											 '</div>'+
											 '<hr>'+
											 
										'<div class="form-group_daticash_register_if_not_exist">'+
											'<div class="row">'+
											  '<div class="col-12">'+
												'<input type="hidden" name="action" class="action" value="reset_password">'+
												'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_register_if_not_exist_btn" name="daticash_register_if_not_exist_btn">Continue</button>'+
											  '</div>'+
											'</div>'+
	 
											  '<div class="col-12 " >'+
												'<div class="icheck-primary" style="font-weight: 100;">'+
												  '<input type="checkbox" checked id="agree" name="agree">'+
												  '<label for="agreement"  style="margin:5px; color:#7A7A7A; display: inline;">'+
													'I agree to the <a href="https://app.termly.io/document/terms-of-use-for-saas/9697da89-93b4-427a-ad5b-d41243fe5436" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Terms and Conditions </a></b> and the <a href="https://app.termly.io/document/privacy-policy/6957bc16-55f2-427c-8e66-64d1d4c387a9" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Privacy Policy</b></a>'+
												  '</label></br>'+
												'</div>'+												  
											  '</div>'+		
										'</div>'+		
										  
									  '</form>'+
									'</div>'+
								  '</div>'+
								'</div>'+
							'</div>'+
						'</div>'+
					'</div>'+
				'</div>'
				);	

	this.daticash_connexion_popUp = (
						'<div class="chat-popup" id="daticash_connexion_popUp">'+
							'<div id="ib-center" class="dati_popup">'+
								'<div class="container">'+
									'<div class="row d-flex justify-content-center">'+
										'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
											'<div class="login-logo">'+
												'<a href="http://daticash.com/" target="_blank" style="color: #fff;">'+
													'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
												'</a>'+
											'</div>'+
										  '<div class="login-feedback"></div>'+
										  '<div class="card body_card_daticash_login">'+
											'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
											  '<small id="allow_reset-feedback"></small>'+
											  '<form method="post" class="form login-form">'+
												'<label for="username" style="width: 100%; margin-bottom: .5rem;">'+
												  '<font style="vertical-align: inherit;">Phone number&nbsp</font>'+
												  '<small id="phone-feedback" style="display: block;"></small>'+												
												'</label>'+
												'<div class="input-group mb-3 form-daticash_phone">'+
												  '<input type="hidden" class="form-control" id="country_code" name="country_code">'+
												  '<input type="phone" class="form-control" id="username" name="username">'+
												  '<div class="input-group-append" id="input_group_appendto_phone" name="input_group_appendto_phone">'+
													'<div class="input-group-text">'+
													  '<span class="fas fa-user"></span>'+
													'</div>'+
												  '</div>'+
												'</div>'+
												
												'<div class="login_pin_code-group">'+	
													'<label for="pin_code" style="width: 100%; margin-bottom: .5rem;">'+
													  '<font style="vertical-align: inherit;">PIN Code&nbsp</font>'+
													  '<small id="pin_code-feedback" style = "display: -webkit-inline-box;"></small>'+
													'</label>'+
													'<small class="show_or_hide_pin_js" style="margin-top: 4px;color: #0a4f68;position: absolute;right: 20px;">'+
													'<i class="show_or_hide_pin_text_js">Show</i><input type="checkbox" id="show_hide_pin" style="vertical-align: text-bottom;margin-left: 5px;color: #777777;font-weight: 100;"></small>'+												
													'<div class="input-group mb-3">'+
													  '<input type="password" class="form-control" id="pin_code" name="pin_code" placeholder="PIN" maxlength="6">'+
													  '<div class="input-group-append">'+
														'<div class="input-group-text">'+
														  '<span class="fas fa-key"></span>'+
														'</div>'+
													  '</div>'+
													'</div>'+
												'</div>'+
													
												'<div class="new_pin_code-group">'+
													'<label id="new_pin_code_label" for="new_pin_code" style="width: 100%; margin-bottom: .5rem;">'+
													  '<font style="vertical-align: inherit;">New PIN Code&nbsp</font>'+
													  '<small id="new_pin_code-feedback"  style = "display: block;"></small>'+
													'</label>'+
													'<small class="show_or_hide_pin_for_new_pin_code_js" style="margin-top: 4px;color: #0a4f68;position: absolute;right: 20px;">'+
													'<i class="show_or_hide_pin_for_new_pin_code_text_js">Show</i><input type="checkbox" id="show_or_hide_pin_for_new_pin_code_id" style="vertical-align: text-bottom;margin-left: 5px;color: #777777;font-weight: 100;"></small>'+												
													'<div class="input-group mb-3">'+
													  '<input type="password" class="form-control" id="new_pin_code" name="new_pin_code" placeholder="Choose New PIN Code" maxlength="6">'+
													  '<div class="input-group-append">'+
														'<div class="input-group-text">'+
														  '<span class="fas fa-key"></span>'+
														'</div>'+
													  '</div>'+
													'</div>'+
												'</div>'+
												
												'<div class="retype_new_pin_code-group">'+	
													'<label id="retype_new_pin_code_label" for="retype_new_pin_code" style="width: 100%; margin-bottom: .5rem;">'+
													  '<font style="vertical-align: inherit;">Retype new PIN Code&nbsp</font>'+
													  '<small id="retype_new_pin_code-feedback" style = "display: block;"></small>'+
													'</label>'+
													'<small class="show_or_hide_pin_for_retype_new_pin_code_js" style="margin-top: 4px;color: #0a4f68;position: absolute;right: 20px;">'+
													'<i class="show_or_hide_pin_for_retype_new_pin_code_text_js">Show</i><input type="checkbox" id="show_or_hide_pin_for_retype_new_pin_code_id" style="vertical-align: text-bottom;margin-left: 5px;color: #777777;font-weight: 100;"></small>'+												
													'<div class="input-group mb-3">'+
													  '<input type="password" class="form-control" id="retype_new_pin_code" name="retype_new_pin_code" placeholder="Retype new PIN code" maxlength="6">'+
													  '<div class="input-group-append">'+
														'<div class="input-group-text">'+
														  '<span class="fas fa-key"></span>'+
														'</div>'+
													  '</div>'+
													'</div>'+
												'</div>'+	
												
											     '<small class="text-center" id="check_pin_code_correspondance-feedback" style = "display: block;"></small>'+
														'<div id="re_captcha_container" class="text-center mb-2">'+
														 '<div id="g-recaptcha"></div>'+
													 '</div>'+
													 '<hr>'+
												'<div class="row">'+
												  '<div class="col-12 form-group_daticash_login_btn">'+
													'<input type="hidden" name="action" class="action" value="daticash_login">'+
													'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_login_btn" name="daticash_login_btn" >Login</button>'+
												  '</div>'+
												'</div>'+
											  '</form>'+
												'<div class="row reset_js">'+ 
													'<div class="col-12 mb-3" font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display: inline;color: #0a4f68;;" id="daticash_allow_reset_pin" name="daticash_allow_reset_pin">PIN forgotten?</p></div>'+												  
												'</div>'+
											'</div>'+
										  '</div>'+
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+
						'</div>'
						);

/* 	this.daticash_confirm_token_form_popUp = (
				'<div class="chat-popup" id="daticash_confirm_token_form_popUp">'+
					'<div id="ib-center" class="dati_popup">'+
						'<div class="container">'+
							'<div class="row d-flex justify-content-center">'+
								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
									'<div class="login-logo">'+
										'<a href="http://daticash.com/" target="_blank" style="color: #fff;">'+
											'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
										'</a>'+
									'</div>'+									
								    '<div class="login-feedback"></div>'+
										'<div class="card body_card_daticash_login">'+
											'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  										
												'<div class="" id="conversation" style ="overflow-y: auto; background-color: #66666621;">'+
													'<div class="lf-loading">'+
														'<div class="spinner" id="loading_image" style="display: blok;">'+
															'<div class="bounce1"></div>'+
															'<div class="bounce2"></div>'+
															'<div class="bounce3"></div>'+
														'</div>'+
													'</div>'+
												'</div>'+
												'<p class="text-center mb-3" style="color: #204050;">'+
													'A message has been sent to '+ this.tampon_data.user_email +'. <br>Please follow the link it contains to activate your account.'+                      
												'</p>'+
												'<p style="text-align: center;color: #000;" class="mb-0">No access to email now ?</p>'+
													'<div name="dati_check_whith_sms" id="dati_check_whith_sms" class="social-auth-links text-center mb-3">'+
														'<input type="hidden" name="action" class="action" value="daticash_request_sms_code">'+
														'<div name="daticash_request_sms_code_btn" id="daticash_request_sms_code_btn" class="daticash_btn btn-daticash btn-block" style="display: inline-block; margin-top: .5rem; cursor: pointer">'+
														'Send me a sms to activate'+
														'</div>'+
													'</div>'+
												'<hr>'+													
											'</div>'+
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+
						'</div>'+						
					'</div>'+
				'</div>'
				);
 */
	this.daticash_confirm_token_form_popUp = function(email){
			return	(
					'<div class="chat-popup" id="daticash_confirm_token_form_popUp">'+
						'<div id="ib-center" class="dati_popup">'+
							'<div class="container">'+
								'<div class="row d-flex justify-content-center">'+
									'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
										'<div class="login-logo">'+
											'<a href="http://daticash.com/" target="_blank" style="color: #fff;">'+
												'<img src="'+imgLocation+'Daticash5.png" style="width:100%;"/>'+
											'</a>'+
										'</div>'+									
										'<div class="login-feedback"></div>'+
											'<div class="card body_card_daticash_login">'+
												'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  										
													'<div class="" id="conversation" style ="overflow-y: auto; background-color: #66666621;">'+
														'<div class="lf-loading">'+
															'<div class="spinner" id="loading_image" style="display: blok;">'+
																'<div class="bounce1"></div>'+
																'<div class="bounce2"></div>'+
																'<div class="bounce3"></div>'+
															'</div>'+
														'</div>'+
													'</div>'+
													'<p class="text-center mb-3" style="color: #204050;">'+
														'A message has been sent to '+  email +'. <br>Please follow the link it contains to activate your account.'+                      
													'</p>'+
													'<p style="text-align: center;color: #000;" class="mb-0">No access to email now ?</p>'+
														'<div name="dati_check_whith_sms" id="dati_check_whith_sms" class="social-auth-links text-center mb-3">'+
															'<input type="hidden" name="action" class="action" value="daticash_request_sms_code">'+
															'<div name="daticash_request_sms_code_btn" id="daticash_request_sms_code_btn" class="daticash_btn btn-daticash btn-block" style="display: inline-block; margin-top: .5rem; cursor: pointer">'+
															'Send me a sms to activate'+
															'</div>'+
														'</div>'+
													'<hr>'+													
												'</div>'+
											'</div>'+
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+						
						'</div>'+
					'</div>'
					);						  
	
	}
	
	this.daticash_transfer_process_popUp = function(){
		if(sub_request.transaction !== undefined){
			return	(
					'<div class="chat-popup" id="daticash_transfer_process_popUp">'+
						'<div id="ib-center" class="dati_popup">'+
							'<div class="container">'+
							  '<div class="login-feedback"></div>'+
										  
								'<div class="row">'+
									'<div class="col-md-5" style="margin:auto;">'+
										'<div class="card border-primary mb-3" style=" top: 12px; ">'+
											'<div class="card-header bg" style="background-color: #204051!important;">'+
												'<h4 class="text-white">Transaction confirm</h4>'+
												'<div style="position: absolute;top: 15px;right: 15px;">'+
														'<button id="btn_close_modal" name="btn_close_modal" type="button" class="close" data-dismiss="modal">×</button>'+
												'</div>'+
											'</div>'+

											'<div class="card-body text-primary" id="dati_check_process" name="dati_check_process">'+							
					
												 '<div class="" id="conversation" style ="overflow-y: auto; background-color: #66666621;">'+
													'<div class="lf-loading">'+
														'<div class="spinner" id="loading_image" style="display: blok;">'+
															'<div class="bounce1" ></div>'+
															'<div class="bounce2"></div>'+
															'<div class="bounce3"></div>'+
														'</div>'+
													'</div>'+
												'</div>'+
												'<p class="text-center mb-3" style="color:#000">'+
													'Vous êtes sur le point d\'effectuer une transaction de '+ sub_request.transaction.total_pay + sub_request.transaction.currency_sent +' vers le numero '+ sub_request.transaction.recipient_phone + sub_request.transaction.recipient_name +';'+                      
												'</p>'+
													'<div name="dati_check_whith_sms" id="dati_check_whith_sms" style="color: #204051;" class="social-auth-links text-center mb-3">'+
														'<label for="daticash_code" >Bien vouloir entrer votre code pour la Confirmation.</label>'+
														'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="daticash_code" id="daticash_code" style="font-size: 55px;text-align: center;" maxlength="6" placeholder="xxxxxx">'+
									
													'</div>'+
												'<hr>'+													
											'</div>'+
										'</div>'+
									'</div>'+
								'</div>'+
							'</div>'+						
						'</div>'+
					'</div>'		
					);			
		}
	}

	this.daticash_display_transaction_status_topUp = function(){
		return (
				'<div id="daticash_display_transaction_status_topUp">'+
					'<div class="head_steps text-center">'+
						'<span class="step step-one">'+
							'<div class="step-icon"><i class="fa fa-user"></i>'+
							'</div>'+
							'<p>User Account Verification</p>'+
						'</span>'+
						'<span class="step step-two">'+
							'<div class="step-icon"><i class="fa fa-edit"></i>'+
							'</div>'+
							'<p>Balance Check</p>'+
						'</span>'+
						'<span class="step step-three">'+
							'<div class="step-icon"><i class="fa fa-credit-card"></i>'+
							'</div>'+
							'<p>Transaction Processing</p>'+
						'</span>'+
					'</div>'+
				'</div>'
			);			
	}
		
	this.info_status_popUp = function(title, info, btn_label_confirm, btn_label_dismit){
			return	(
						  '<div class="chat-popup modal fade show" id="info_status_popUp" aria-modal="true" style=" display: block;z-index:999999999;opacity: 0.9;background-color: #000000b8;">'+
							'<div class="modal-dialog">'+
							  '<div class="modal-content">'+
								'<div class="modal-header">'+
								  '<h4 class="modal-title">' + title + '</h4>'+
								'</div>'+		  
								'<div class="modal-body text-center" id="info_status_content_popUp" name="info_status_content_popUp">'+
								  '<p>'+
									info +
								  '</p>'+
								'</div>'+
								'<div class="modal-footer justify-content-between">'+
								   btn_label_dismit + 
								   btn_label_confirm + 
								'</div>'+
							   '</div>'+
							'</div>'+
						  '</div>'
					);						  
	}
	
	this.alert_message_popUp = (
						  '<div class="chat-popup modal fade show" id="alert_message_popUp" aria-modal="true" style=" display: block;z-index:999999999;opacity: 0.9;background-color: #000000b8;">'+
							'<div class="modal-dialog">'+
							  '<div class="modal-content">'+
								'<div class="modal-header">'+
								  '<h4 class="modal-title">IMPORTANT MESSAGE</h4>'+
								'</div>'+		  
								'<div class="modal-body">'+
								  '<p>'+
									  '<h5><i class="icon fas fa-info"></i> Alert!</h5>'+ message_alert+
								  '</p>'+
								'</div>'+
								'<div class="modal-footer justify-content-between">'+
								  '<button type="button" class="daticash_btn btn-default" data-dismiss="modal" id="btn_close_modal">Cancel</button>'+
								  '<button type="button" class="daticash_btn btn-daticash" id="close_modal_lg">Compris!</button>'+
								'</div>'+
							  '</div>'+
							'</div>'+
						  '</div>'
						  
	);						  
	
			

/* 	this.reset_password_popUp = (
				'<div class="sweet-alert showSweetAlert visible" data-custom-class="" data-has-cancel-button="false" data-has-confirm-button="true" data-allow-outside-click="false" data-has-done-function="false" data-animation="pop" data-timer="null" style="display: block; margin-top: -148px;">
					'<div class="sa-icon sa-error" style="display: none;">
					  '<span class="sa-x-mark">
						'<span class="sa-line sa-left"></span>
						'<span class="sa-line sa-right"></span>
					  '</span>
					'</div>
						
					'<div class="sa-icon sa-warning" style="display: none;">
					  '<span class="sa-body"></span>
					  '<span class="sa-dot"></span>
					'</div>
						
					'<div class="sa-icon sa-info" style="display: none;"></div>
						
					'<div class="sa-icon sa-success animate" style="display: block;">
					  '<span class="sa-line sa-tip animateSuccessTip"></span>
					  '<span class="sa-line sa-long animateSuccessLong"></span>
					  '<div class="sa-placeholder"></div>
					  '<div class="sa-fix"></div>
					'</div>
						
					'<div class="sa-icon sa-custom" style="display: none; background-image: url(&quot;../../images/thumbs-up.png&quot;); width: 80px; height: 80px;"></div>
					'<h2>Good job!</h2>
					'<p style="display: block;">You clicked the button!</p>
						
					'<fieldset>
					  '<input type="text" tabindex="3" placeholder="">
					  '<div class="sa-input-error"></div>
					'</fieldset>
						
					'<div class="sa-error-container">
					  '<div class="icon">!</div>
					  '<p>Not valid!</p>
					'</div>'
						
					'<div class="sa-button-container">'
					  '<button class="cancel" tabindex="2" style="display: none; box-shadow: none;">Cancel</button>'
					  '<div class="sa-confirm-button-container">'
						'<button class="confirm" tabindex="1" style="display: inline-block; background-color: rgb(140, 212, 245); box-shadow: rgba(140, 212, 245, 0.8) 0px 0px 2px, rgba(0, 0, 0, 0.05) 0px 0px 0px 1px inset;">OK</button>'
						'<div class="la-ball-fall">'
						  '<div></div>'
						  '<div></div>'
						  '<div></div>'
						'</div>'
					  '</div>'
					'</div>'
				'</div>'	
			);	

 */


/**
   * @param {string} line
   * @param {!Object} options
   * @param {undefined} u
   * @return {?}
   */
  this.start = function(callback) {
//type d'action

		var p = this;	
		p.link = p.href;
			if(sessionid === false){
				p._checkAccess(p.msg);	
			}else{
				//_goto(this.href)
			}				
	};

  /**
   * @param {number} url
   * @return {undefined}
   */
  this._checkAccess = function(msg) {//
		var self = this;
					  
	  clearTimeout(self._autoTimer);	
		if(undefined !== self.msg) { //Cas d'utilisation de formulaire externe
			var validate = this;
			//alert('chechacces')
			console.log('msg: ' +self.msg);
			$.ajax({		
				type: "POST",
				url: classesLocation , // call the php file ajax/
				data: {action: "login", msg: self.msg}, // send data var
				dataType: "json",
				success: function(response){	//alert(response)
					if(response.match === "confirm-token-form"){

						self.user_id =  response.user_id;
						$(".chat-popup").remove();

						
						$("body").append(self.confirm_token_form_popUp);							

						if(self.login_error !== ""){
							$('#dati_check_process').prepend('<p class="alert text-danger text-center">'+self.login_error+'</p>'); // loader image apprears in the <div id="newComment"></div>
							self.login_error = "";
						}						

						//gestion de l'interface(initilisation de l'interface)
						$("#ib-center").css({
							height : $(window).height()- 600  + "px",
							width : $(window).width()- 50%  + "px"
						});		
						
						$(window).resize(function() {
							self._resize();
						});		
					
						self._autoTimer = setTimeout(function() {
							self._checkAccess(self.msg);
						}, 10000);	

						self.listenEvent();
							
					}else{//match ! "confirm-token-form"
						if(response.match === true){//login ok
							//self.user_id = response.user_id;
							//var userInfo = response.userinfo;
							//alert('login-ok');
								$(".chat-popup").remove();

								
							    sessionid = true;
															
								_goto(self.href);
								//var urlcourante = document.location.href; 
								 //window.location.href = urlcourante;// +'&'+u=userInfo;
								 // si possible d'envoyer les parametres de l'utilisateur aussi								
				
								
						}else{//login ! "login-ok"
							if(response.details === undefined){response.details = "Oops! Error connection. Try again"}
								$('.login-feedback').html(show_alert('error', response.details, 1));
								$(validate).prop('disabled', false);
								$("#loading_image").remove();// reinitialiser les proprietées du formulaire								
										
						}
					}
				},
				error: function() { 
						alert('Sorry ! unknown error appeared, refresh your browse and try again. If the problem persist contact the web master of site');
						$(validate).prop('disabled', false);
						$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
				}
			});
			
		}else{ //Cas d'utilisation du formulaire intégré
			
			$('#body_mask').after(self.daticash_connexion_popUp);
			$('.show_or_hide_pin_js').remove();			
			$('.new_pin_code-group').remove();			
			$('.retype_new_pin_code-group').remove();
					
 					configure_intlTelInput()
						$("#input_group_appendto_phone").remove()
						$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');

			self.listenEvent();			
											
				$(".iti__selected-flag").trigger("click");
				$(".iti__country[data-dial-code='237']").trigger("click"); 
									
						//$("#username").prop('disabled', true);	
					$('#pin_code').keypad();	
					
			if(self.sub_request.transaction !== undefined){						
				$('#daticash_display_transaction_status_topUp').remove();
				$('.login-logo').after(self.daticash_display_transaction_status_topUp);
				daticash_select_transaction_status_position(1);	
			}			
		}
  };

  this.listenEvent = function() {
		var that = this;
	/*Textbox Events*/
	$("body")
			.on('click', '#dati_user_logout', function(e){
				e.preventDefault();
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {action : "logout"}, // send data var
							dataType: "json",
							success: function(response){
								if(response.match =  true){
									sessionid = false;
									alert("logout success")
									//_goto("#");
									location.reload(true)
								} 
								
							},
							error: function() {alert("error: Sign out, try again or contact the Administrator if this persit")}
								
						});		
				})					
			.on('click', '#withdraw_process_request_btn', function(e){//topup process by mobileMoney
				e.preventDefault();
				
					var mode = "mobilemoney";
					var type = "account-topup";
					var amount = $("#topup_by_mobile_money_amount").val();
					var currency = self.sub_request.status_transaction_info.currency_sent;
					var account = self.sub_request.status_transaction_info.sender_phone;
					var account_country_code = self.sub_request.status_transaction_info.sender_country_code;
					var source = $("#topup_by_mobile_money_source").val();
					var source_country_code = $("#topup_by_mobile_money_source_country_code").val();
					
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {"action" : "topup_process", "mode" : mode, "type" : type, "amount" : amount, "currency" : currency, "account" : account, "account_country_code" : account_country_code,  "source" : source, 'source_country_code' : source_country_code}, // send data var
							dataType: "json",
							beforeSend:function(){
							  $('#topup_process_by_mobile_money_btn').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Initiates the transaction...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
							},							
							success: function(response){					
/* 								if(response.match ===  true){
									clearTimeout(that._autoTimer);	
										that._autoTimer = setTimeout(function() {
											jQuery.ajax({
												type: "POST",
												url: classesLocation , // call the php file ajax/
												data: {"action" : "check_status_transaction", "user_token" : "user_token", "transaction_id" : "transaction_id", "token" : "token"}, // send data var
												dataType: "json",
												beforeSend:function(){
												  $('#topup_process_by_mobile_money_btn').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
												},								
												success: function(databack){
													if(databack.match ===  true){
														switch(databack.details.status) {
															case "processing":
															// request confirmation
																$(".chat-popup").remove();
												
																
																var alert_title = databack.details.title;								
																var alert_content = databack.details.content;								
																var btn_submit = '<button type="button" class="btn btn-default" id="" disabled >Step&nbsp;'+ databack.details.step +'/'+ databack.details.totalstep +'</button>';
																var btn_dismit = '<button type="button" class="btn btn-default" data-dismiss="modal" id="" disabled>Details :</button>';
																
																$('#body_mask').after(that.info_status_popUp(alert_title, alert_content, btn_submit, btn_dismit));	
															break;
															
															case "confirm":
																$("body").append(
																			'<div class="row clearfix js-sweetalert">'+
																				'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																					'<button id="btn_confirm_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="confirm_recharge_by_mobile_money">Confirm Recharge by mobilemoney</button>'+
																				'</div>'+
																			'</div>' 
																		);	

																$('.js-sweetalert button').on('click', function () {
																	var type = $(this).data('type');
																	if (type === 'confirm_recharge_by_mobile_money') {
																		swal({
																			title: "Confirm Transaction!",
																			text: "Vous etes sur le point d'effectuer une transaction de 5000XAF vers le 65824584(USERNAME Exemple). entrer votre mot de pass pour confirmaer la transaction:",
																			type: "input",
																			showCancelButton: true,
																			closeOnConfirm: false,
																			showLoaderOnConfirm: true,
																			animation: "slide-from-top",
																			inputPlaceholder: "your password"
																		}, function (inputValue) {
																			if (inputValue === false) return false;
																			if (inputValue === "") {
																				swal.showInputError("You need to write something!"); return false
																			}
																			swal({
																					title: "Ajax request example",
																					text: "Submit to run ajax request",
																					type: "info",
																					showCancelButton: true,
																					closeOnConfirm: false,
																					showLoaderOnConfirm: true,
																				}, function () {
																					check_status_transaction();
																					//setTimeout(function () {
																						//swal("Ajax request finished!");
																					//}, 2000);
																				});
																		
																		});									
																		
																	}
																});	
																
																function check_status_transaction(){
																	jQuery.ajax({
																		type: "POST",
																		url: classesLocation , // call the php file ajax/
																		data: {"action" : "check_status_transaction"}, // send data var
																		dataType: "json",
																		beforeSend:function(){
																		  $('#topup_process_by_mobile_money_btn').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
																		},								
																		success: function(databack){	
																			alert("success")
																		},
																		error : function(databack){
																			alert("error")	
																		}
																	})																		
																}
																
																$("#btn_confirm_recharge_by_mobile_money").trigger("click").remove();											
								
																break;
														
														}
													}else{
														$("body").append(
																	'<div class="row clearfix js-sweetalert">'+
																		'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																			'<button id="btn_error_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="error_recharge_by_mobile_money">Declined Recharge by mobilemoney</button>'+
																		'</div>'+
																	'</div>' 
																);	

														$('.js-sweetalert button').on('click', function () {
															var type = $(this).data('type');
															if (type === 'error_recharge_by_mobile_money') {
																swal("ERROR", "Your transaction Failed!", "error");
															}
														});	
														
														$("#btn_error_recharge_by_mobile_money").trigger("click").remove();	

													}
											
												},
												error: function() {alert("error: recharge by mobilemoney processing, click to ok and wait a moment. Contact the Administrator if this persit")}
													
											});	
										}, 5000);			




									
									switch(response.details.status) {
										case "approved":
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_approved_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="approved_recharge_by_mobile_money">Approvet Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'approved_recharge_by_mobile_money') {
													swal("Transaction approved!", "Your new balance : 50000 XAF", "success");
												}
											});	
											
											$("#btn_approved_recharge_by_mobile_money").trigger("click").remove();											

											break;
											
										case "declined":
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_declined_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="declined_recharge_by_mobile_money">Approvet Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'declined_recharge_by_mobile_money') {
													swal("Declined", "Your transaction have been declined!", "error");
												}
											});	
											
											$("#btn_declined_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										case "error":										
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_error_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="error_recharge_by_mobile_money">Declined Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'error_recharge_by_mobile_money') {
													swal("ERROR", "Your transaction prematurary cancelled!", "error");
												}
											});	
											
											$("#btn_error_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										case "help for review":										
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_help_for_review_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="help_for_review_recharge_by_mobile_money">Help Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'help_for_review_recharge_by_mobile_money') {
													swal("Help For Review", "Your transaction prematurary cancelled!", "info");			
												}
											});	
											
											$("#btn_help_for_review_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										case "noresponse":										
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_no_response_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="no_response_recharge_by_mobile_money">No Response Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'no_response_recharge_by_mobile_money') {
													swal("Cancelled", "No response! try again ...", "error");
												}
											});	
											
											$("#btn_no_response_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										default :
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_default_response_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="default_response_recharge_by_mobile_money">No Response Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'default_response_recharge_by_mobile_money') {
													swal("ERROR", "Unknow Error !", "error");
												}
											});	
											
											$("#btn_default_response_recharge_by_mobile_money").trigger("click").remove();											
									}
																												
								}else{
																
								
								}  */
								
							},
							error: function() {alert("error: recharge by mobilemoney, try again or contact the Administrator if this persit")}
								
						});		
				})
			.on('click', '#topup_process_by_mobile_money_btn', function(e){//topup process by mobileMoney
				e.preventDefault();
	/* 			
					var mode = "mobilemoney";
					var type = "account-topup";
					var amount = $("#topup_by_mobile_money_amount").val();
					var currency = self.sub_request.status_transaction_info.currency_sent;
					var account = self.sub_request.status_transaction_info.sender_phone;
					var account_country_code = self.sub_request.status_transaction_info.sender_country_code;
					var source = $("#topup_by_mobile_money_source").val();
					var source_country_code = $("#topup_by_mobile_money_source_country_code").val(); 
	*/
					var type = "withdraw";
					var account_ref = "";
					var amount_sent = $("#topup_by_mobile_money_amount").val();
					var currency_sent = self.sub_request.status_transaction_info.currency_sent;
					var recipient_phone = self.sub_request.status_transaction_info.sender_phone;
					var recipient_country_code = self.sub_request.status_transaction_info.sender_country_code;
					var sender_phone = $("#username").val();
					var sender_country_code = $("#country_code").val(); 
					var reason = "Insufficient amount to send"; 
										let withdraw = {
												"action":"withdraw", 
												"type":type, 
												"account_ref":account_ref, 
												"amount_sent":amount_sent,
												"currency_sent":currency_sent,
												"recipient_phone":recipient_phone,
												"recipient_country_code":recipient_country_code, 								
												"sender_phone":sender_phone,
												"sender_country_code":sender_country_code, 
												"reason":reason, 							
											}
										$.ajax('https://api.daticash.com/api/mobilemoney/new',{
											'data': JSON.stringify(withdraw), //{action:'x',params:['a','b','c']}
											'type': 'POST',
											'processData': false,
											'contentType': 'application/json' //typically 'application/x-www-form-urlencoded', but the service you are calling may expect 'text/json'... check with the service to see what they expect as content-type in the HTTP header.
										});
										
		fetch("https://api.daticash.com/api/mobilemoneys?order=asc&start_at=2020-01-01%2000%3A00%3A00&end_at=2021-01-01%2000%3A00%3A00&page=1&limit=10", {
		  "headers": {
			"apikey": "sec_5ed93806dd2ca",
		  },
		  "body": null,
		  "method": "GET",
		  "mode": "cors",
		 // "credentials": "include"
		})
		.then(response => response.text())
		.then(contents => console.log(contents))
		.catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))	
		
 
 					fetch("https://api.daticash.com/api/mobilemoney/new?type="+type+"&account_ref="+account_ref+"&amount_sent="+amount_sent+"&currency_sent="+currency_sent+"&recipient_phone="+recipient_phone+"&recipient_country_code="+recipient_country_code+"&sender_phone="+sender_phone+"&sender_country_code="+sender_country_code+"&reason="+reason, {	 
					  "headers": {
						"apikey": "sec_5ed93806dd2ca",
					  },
					  "body": null,
					  "method": "POST",
					  "mode": "cors",
					 // "credentials": "include"
					})
					.then(response => {
						if (!response.ok) {
						  throw new Error(response.statusText)
						}
						return response.json()
					  })
					  .catch(error => {
						console.log(
						  `Request failed: ${error}`
						)
					  }) 

						  var parameters = {
									method: 'POST',
									headers: {
									  "Content-type": "application/x-www-form-urlencoded; charset=UTF-8",
									  "apikey": "sec_5ed93806dd2ca",
									},
									body: 'recipient_country_code=237&reason&recipient_phone=691750821&sender_country_code=237&sender_phone=691750821&currency_received=XAF&currency_sent=XAF&amount_received=150000&amount_sent=150000&fees=0.0&total_pay=150000&type=withdraw&mode=mobilemoney&account_ref='+ account_ref,
								};
								fetch("https://api.daticash.com/api/mobilemoney/new", parameters)	 
									  .then(status)
									  .then(function(data) {
										console.log('Request succeeded with JSON response', data);
									  }).catch(function(error) {
										console.log('Request failed', error);
									  });
									  
									  
		 
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {"action" : "init_mobilemoney_transaction", "type" : type, "account_ref" : account_ref, "amount_sent" : amount_sent, "currency_sent" : currency_sent, "recipient_phone" : recipient_phone, 'recipient_country_code' : recipient_country_code, 'sender_phone' : sender_phone, 'sender_country_code' : sender_country_code, 'reason' : reason}, // send data var
							dataType: "json",
							beforeSend:function(){
							  $('#topup_process_by_mobile_money_btn').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Initiates the transaction...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
							},							
							success: function(response){
								if(response.match === true){
									alert("transaction successfully");
									
					  
									Swal.fire({
									  title: 'Confirm Transaction!',
									  text: "Vous etes sur le point d'effectuer une transaction de 5000XAF vers le 65824584(USERNAME Exemple). entrer votre mot de pass pour confirmaer la transaction:",
									  input: 'password',
										//closeOnConfirm: true,
										inputPlaceholder: "your password",				  
									  inputAttributes: {
										autocapitalize: 'off'
									  },
									  showCancelButton: false,				  
									  showLoaderOnConfirm: true,
									  focusConfirm: false,
									  confirmButtonText:'<i class="fa fa-thumbs-up"></i> Confirm',
									  confirmButtonAriaLabel: 'Thumbs up, great!',
									  cancelButtonText:'<i class="fa fa-thumbs-down"></i>',
									  cancelButtonAriaLabel: 'Thumbs down',				  
									  preConfirm: (login) => {
										return fetch(`//api.github.com/users/${login}`)//confirm url
										  .then(response => {
											if (!response.ok) {
											  throw new Error(response.statusText)
											}
											return response.json()
										  })
										  .catch(error => {
											Swal.showValidationMessage(
											  `Request failed: ${error}`
											)
										  })
									  },
									  allowOutsideClick: () => !Swal.isLoading()
									}).then((result) => {
										  if (result.value) {
											const ipAPI = '//api.ipify.org?format=json';
											let timerInterval						
											Swal.fire({
											  title: 'Traitement en cour',
											  html: 'I will close in <b>Mise à jour de l\'historique de la transaction.</b> milliseconds.',
											  icon: 'info',
											  timer: 10000,
											  timerProgressBar: true,
											  onBeforeOpen: () => {
												Swal.showLoading()
												timerInterval = setInterval(() => {
												  const content = Swal.getContent()
												  if (content) {
													const b = content.querySelector('b')
													if (b) {
													  b.textContent = Swal.getTimerLeft()
													}
												  }
												}, 100);
												
												that._autoTimer = setInterval(function() {
													clearInterval(that._autoTimer);
														$('#daticash_display_transaction_status_topUp').remove();
														$('.swal2-container').append(that.daticash_display_transaction_status_topUp);
														$('#daticash_display_transaction_status_topUp').css(
														{
															"position" : "fixed",
															"top" : "inherit",
															"padding-top" : "12px"
														});
														
														daticash_select_transaction_status_position(3);	
														
														
													}, 1000);							
											  },						  
											  showLoaderOnConfirm: true,
											  onClose: () => {
												clearInterval(timerInterval)
												Swal.fire(
												  'Deleted!',
												  'Your file has been deleted.',
												  'error'
												)							
											  }						  
											}).then((result) => {
											  // Read more about handling dismissals below 
											  if (result.dismiss === Swal.DismissReason.timer) {
												console.log('I was closed by the timer')
											  }
											  
												that._autoTimer = setInterval(function() {
													clearInterval(that._autoTimer);
														$('#daticash_display_transaction_status_topUp').remove();
														$('.swal2-container').append(that.daticash_display_transaction_status_topUp);
														$('#daticash_display_transaction_status_topUp').css(
														{
															"position" : "fixed",
															"top" : "inherit",
															"padding-top" : "12px"
														});
														
														daticash_select_transaction_status_position(4);	
														
														
													}, 1000);
											})	

										}
									})

									that._autoTimer = setInterval(function() {
										clearInterval(that._autoTimer);
											$('#daticash_display_transaction_status_topUp').remove();
											$('.swal2-container').append(that.daticash_display_transaction_status_topUp);
											$('#daticash_display_transaction_status_topUp').css(
											{
												"position" : "fixed",
												"top" : "inherit",
												"padding-top" : "12px"
											});
											
											daticash_select_transaction_status_position(3);	
											
											
										}, 1000);
											
														
									
									
									
								}else{
									$(".login-feedback").html('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>'+ response.details +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
									$(".topup_process_by_mobile_money_btn").text("Recharge").prop("disabled", false);
								}




								
/* 								if(response.match ===  true){
									clearTimeout(that._autoTimer);	
										that._autoTimer = setTimeout(function() {
											jQuery.ajax({
												type: "POST",
												url: classesLocation , // call the php file ajax/
												data: {"action" : "confirm_transaction_by_mobilemoney", "user_token" : "user_token", "transaction_id" : "transaction_id", "token" : "token"}, // send data var
												dataType: "json",
												beforeSend:function(){
												  $('#topup_process_by_mobile_money_btn').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
												},								
												success: function(databack){
													if(databack.match ===  true){
														switch(databack.details.status) {
															case "processing":
															// request confirmation
																$(".chat-popup").remove();
												
																
																var alert_title = databack.details.title;								
																var alert_content = databack.details.content;								
																var btn_submit = '<button type="button" class="btn btn-default" id="" disabled >Step&nbsp;'+ databack.details.step +'/'+ databack.details.totalstep +'</button>';
																var btn_dismit = '<button type="button" class="btn btn-default" data-dismiss="modal" id="" disabled>Details :</button>';
																
																$('#body_mask').after(that.info_status_popUp(alert_title, alert_content, btn_submit, btn_dismit));	
															break;
															
															case "confirm":
																$("body").append(
																			'<div class="row clearfix js-sweetalert">'+
																				'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																					'<button id="btn_confirm_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="confirm_recharge_by_mobile_money">Confirm Recharge by mobilemoney</button>'+
																				'</div>'+
																			'</div>' 
																		);	

																$('.js-sweetalert button').on('click', function () {
																	var type = $(this).data('type');
																	if (type === 'confirm_recharge_by_mobile_money') {
																		swal({
																			title: "Confirm Transaction!",
																			text: "Vous etes sur le point d'effectuer une transaction de 5000XAF vers le 65824584(USERNAME Exemple). entrer votre mot de pass pour confirmaer la transaction:",
																			type: "input",
																			showCancelButton: true,
																			closeOnConfirm: false,
																			showLoaderOnConfirm: true,
																			animation: "slide-from-top",
																			inputPlaceholder: "your password"
																		}, function (inputValue) {
																			if (inputValue === false) return false;
																			if (inputValue === "") {
																				swal.showInputError("You need to write something!"); return false
																			}
																			swal({
																					title: "Ajax request example",
																					text: "Submit to run ajax request",
																					type: "info",
																					showCancelButton: true,
																					closeOnConfirm: false,
																					showLoaderOnConfirm: true,
																				}, function () {
																					check_status_transaction();
																					//setTimeout(function () {
																						//swal("Ajax request finished!");
																					//}, 2000);
																				});
																		
																		});									
																		
																	}
																});	
																
																function check_status_transaction(){
																	jQuery.ajax({
																		type: "POST",
																		url: classesLocation , // call the php file ajax/
																		data: {"action" : "check_status_transaction"}, // send data var
																		dataType: "json",
																		beforeSend:function(){
																		  $('#topup_process_by_mobile_money_btn').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
																		},								
																		success: function(databack){	
																			alert("success")
																		},
																		error : function(databack){
																			alert("error")	
																		}
																	})																		
																}
																
																$("#btn_confirm_recharge_by_mobile_money").trigger("click").remove();											
								
																break;
														
														}
													}else{
														$("body").append(
																	'<div class="row clearfix js-sweetalert">'+
																		'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																			'<button id="btn_error_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="error_recharge_by_mobile_money">Declined Recharge by mobilemoney</button>'+
																		'</div>'+
																	'</div>' 
																);	

														$('.js-sweetalert button').on('click', function () {
															var type = $(this).data('type');
															if (type === 'error_recharge_by_mobile_money') {
																swal("ERROR", "Your transaction Failed!", "error");
															}
														});	
														
														$("#btn_error_recharge_by_mobile_money").trigger("click").remove();	

													}
											
												},
												error: function() {alert("error: recharge by mobilemoney processing, click to ok and wait a moment. Contact the Administrator if this persit")}
													
											});	
										}, 5000);			




									
									switch(response.details.status) {
										case "approved":
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_approved_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="approved_recharge_by_mobile_money">Approvet Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'approved_recharge_by_mobile_money') {
													swal("Transaction approved!", "Your new balance : 50000 XAF", "success");
												}
											});	
											
											$("#btn_approved_recharge_by_mobile_money").trigger("click").remove();											

											break;
											
										case "declined":
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_declined_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="declined_recharge_by_mobile_money">Approvet Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'declined_recharge_by_mobile_money') {
													swal("Declined", "Your transaction have been declined!", "error");
												}
											});	
											
											$("#btn_declined_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										case "error":										
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_error_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="error_recharge_by_mobile_money">Declined Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'error_recharge_by_mobile_money') {
													swal("ERROR", "Your transaction prematurary cancelled!", "error");
												}
											});	
											
											$("#btn_error_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										case "help for review":										
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_help_for_review_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="help_for_review_recharge_by_mobile_money">Help Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'help_for_review_recharge_by_mobile_money') {
													swal("Help For Review", "Your transaction prematurary cancelled!", "info");			
												}
											});	
											
											$("#btn_help_for_review_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										case "noresponse":										
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_no_response_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="no_response_recharge_by_mobile_money">No Response Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'no_response_recharge_by_mobile_money') {
													swal("Cancelled", "No response! try again ...", "error");
												}
											});	
											
											$("#btn_no_response_recharge_by_mobile_money").trigger("click").remove();											
											break;
											
										default :
											$("body").append(
														'<div class="row clearfix js-sweetalert">'+
															'<div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">'+
																'<button id="btn_default_response_recharge_by_mobile_money" class="btn btn-primary waves-effect hidden" data-type="default_response_recharge_by_mobile_money">No Response Recharge by mobilemoney</button>'+
															'</div>'+
														'</div>' 
													);	

											$('.js-sweetalert button').on('click', function () {
												var type = $(this).data('type');
												if (type === 'default_response_recharge_by_mobile_money') {
													swal("ERROR", "Unknow Error !", "error");
												}
											});	
											
											$("#btn_default_response_recharge_by_mobile_money").trigger("click").remove();											
									}
																												
								}else{
																
								
								}  */
								
							},
							error: function() {
								alert("error: recharge by mobilemoney, try again or contact the Administrator if this persit");
								$(".topup_process_by_mobile_money_btn").text("Recharge").prop("disabled", false);								
							}

						});	

						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {"action" : "init_mobilemoney_transaction", "type" : type, "account_ref" : account_ref, "amount_sent" : amount_sent, "currency_sent" : currency_sent, "recipient_phone" : recipient_phone, 'recipient_country_code' : recipient_country_code, 'sender_phone' : sender_phone, 'sender_country_code' : sender_country_code, 'reason' : reason}, // send data var
							dataType: "json",
							beforeSend:function(){
							  $('#topup_process_by_mobile_money_btn').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
							},
							success:function(response){
								if(response.match === true){
									alert("transaction successfully");
								}else{
									$(".login-feedback").html('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>'+ response.details +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
									$(".topup_process_by_mobile_money_btn").text("Recharge").prop("disabled", false);	
								}
							},
							error:function(){
								alert("error: recharge by mobilemoney, try again or contact the Administrator if this persit");
								$(".topup_process_by_mobile_money_btn").text("Recharge").prop("disabled", false);
							}
						});




						
				})		
			.on('click', '#close_modal_lg', function(){
					$('.modal').remove();
					//$("#email").focus();
					//$("#input_group_appendto_username").remove()
					//$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');
					
				})
			.on('click', '#dati_sms_btn', function(f){
			            that.by = "sms"
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {socketclienttype : that.socketclienttype, action : "resend-token-code", "user_id" : that.user_id}, // send data var
							dataType: "json",
							beforeSend:function(){
								$('#dati_sms_btn').text('Processing...').prop('disabled', true);
							},								
							success: function(response){
								//valeur possible: resend ok/bad, key= phone
                                    var left_time;
                                    var sender_phone = self.sub_request.transaction.sender_phone.replace(/\d{6}$/i, "******");
                                    clearInterval(that._rebordCount);
                                    
										$("#dati_check_whith_sms").html('<hr><label for="dati_code">A SMS has been sent to '+sender_phone+', please provide the token sent below...</label>'+
																										'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="dati_code" id="dati_code" style="font-size: 55px;text-align: center;" maxlength="6" placeholder="xxxxxx">'+
																										'<div class="col-12" style="flex-flow: row-reverse;">'+
																										    '<div class="js_resend_sms">'+
																										    '</div>'+
																										'</div>'
																							);
										$('#dati_sms_btn').prop('disabled', true);
										$('#dati_code').focus();
										
								//valeur possible: resend ok/bad, key= phone
								if(response.match === true || response.match === undefined){
										left_time = 30;
										that.second = 60;
								}else{
									left_time = response.time_left;
									that.second = 60;												
								}
								
								that._rebordCount = setInterval(function() {
								    
										//requiert un numero de téléphone : créer la zone du numero de tel + boutn d'envoi
										$(".js_resend_sms").empty().append(
																		    '<p style="color: green;">SMS Successfully sent... </p>To try again please wait : '+left_time+'min :'+ that.second +'s</p>'								
																		       
																		);	
									that.second = that.second - 1;																		
								
									if(that.second === 0 && left_time === 0){
									$(".js_resend_sms").empty().append(
																		'<p style="color: #000; float: right;" class="mb-0"><span style="color: #000;">You hav\'n\'receive the SMS?&nbsp;</span>'+
																		'<a id ="resend_sms" name ="resend_sms" href="#">Resend now?&nbsp;&nbsp; |&nbsp;&nbsp;</a>'+
																		'<a id ="cancel_sms" name ="cancel_sms" href="#">Annuler</a></p>'
																	);	
												clearInterval(that._rebordCount);					
									
									}else{
										if(that.second === 0){
											that.second = 59;
											left_time = left_time - 1;
										}											
									}
								}, 1000);									
											
										
							
							},
							error: function() {alert("error: Resend SMS, please contact the Administrator or check with your email")}
						});					
				

					f.stopImmediatePropagation();
				})			
			.on('click', '#btn_activeEmail', function(f){
					$('#btn_activeEmail').prop('disabled', true);
					$('#btn_activeEmail').text('Processing ...');
					that.by = "email";
					var by = "email";
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {socketclienttype : that.socketclienttype, action : "active_email", "user_id" : that.user_id, "verify" : that.verify, "by" : that.by}, // send data var
							dataType: "json",
							success: function(response){
								if(response.match === true){
									$('#label_email_status').empty().append('EMAIL ALREADY VERIFIED&nbsp;<i class="fa fa-check text-success pull-left" style = "margin-right: 12px" aria-hidden="true"></i>');
									$('#btn_activeEmail').remove();
								}else{
									$('#btn_activeEmail').prop('disabled', false);
								}	
								$('#action_and_info_email_status').empty().append('<span>'+ response.details +'</span>');
							},
							error: function() {alert("error: active email, please contact the Administrator or check with your email")}
						});					
				

					f.stopImmediatePropagation();
				})
			.on('focusin', '#dati_code', function(f){
					  clearTimeout(that._autoTimer);
						f.stopImmediatePropagation();	
				})// reactiver l'ecoute du clic sur modal pour continuer la vérification
 			.on('click', '#cancel_sms', function(f){
				var cnl = this;
						f.stopImmediatePropagation();
					$('#dati_check_whith_sms').empty().append(
																						'<div name="dati_check_whith_sms" id="dati_check_whith_sms" class="social-auth-links text-center mb-3">'+
																							'<div name="dati_sms_btn" id="dati_sms_btn" class=" btn-block btn-primary" style="display: inline-block; margin-top: .5rem; cursor: pointer">'+
																							'Send me a sms to activate'+
																							'</div>'+
																						'</div>'	
																					);
						clearTimeout(cnl._autoTimer);
					  clearTimeout(cnl._rebordCount);
					  clearTimeout(cnl._iTimer);
				}) 			
			.on('click', '#btn_close_modal', function(f){
				var cls = this;
					  clearTimeout(self._autoTimer);
					  clearTimeout(self._rebordCount);
					  clearTimeout(self._iTimer);
						
						$(".chat-popup").remove();
						
				window.history.back();	//retourner à la page précedente					
						
				})
			.on('click', '#show_hide_pass', function(){
					if($('#show_hide_pass').prop("checked") == true) {
						$('#password').attr("type", "text");
					} else {
						$('#password').attr("type", "password");
					}
				})			
			.on('click', '#agree', function(){
					if($('#agree').prop("checked") == true) {
						$('#create_account_btn').prop("disabled", false);
						$('#daticash_login_btn').prop("disabled", false);
						$('#daticash_register_if_not_exist_btn').prop("disabled", false);
					} else {
						$('#create_account_btn').prop("disabled", true);
						$('#daticash_login_btn').prop("disabled", true);
						$('#daticash_register_if_not_exist_btn').prop("disabled", true);
					}
				})
			.on('click', '#resend_sms', function(e){
			    //alert("resend")
				e.preventDefault();
				var $this = $(this),
				$parent = $this.parent();
				//alert(self.user_id)
				$('resend_sms').prop('disabled', true);//enlever le comportement par defaut pendant 5 minutes
				//ici le code si envoie du code via sms est déclanché par le clic 
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {socketclienttype : that.socketclienttype, action : "resend-token-code", "user_id" : that.user_id}, // send data var
							dataType: "json",
							success: function(response){
								var left_time
								//valeur possible: resend ok/bad, key= phone
                                    var left_time;
                                    var sender_phone = self.sub_request.transaction.sender_phone.replace(/\d{6}$/i, "******");
                                    clearInterval(that._rebordCount);
										$("#dati_check_whith_sms").html('<hr><label for="dati_code">A SMS has been sent to '+sender_phone+', please provide the token sent below...</label>'+
																										'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="dati_code" id="dati_code" style="font-size: 55px;text-align: center;" maxlength="6" placeholder="xxxxxx">'+
																										'<div class="col-12" style="flex-flow: row-reverse;">'+
																										    '<div class="js_resend_sms">'+
																										    '</div>'+
																										'</div>'
																							);
										$('#dati_sms_btn').prop('disabled', true);
										$('#dati_code').focus();
										
								//valeur possible: resend ok/bad, key= phone
								if(response.match === true || response.match === undefined){
								        
										left_time = 30;
										that.second = 60;
								}else{
									left_time = response.time_left
									that.second = 60;												
								}
								
								that._rebordCount = setInterval(function() {
								    
										//requiert un numero de téléphone : créer la zone du numero de tel + boutn d'envoi
										$(".js_resend_sms").empty().append(
																			' <p style="color: green;">SMS Successfully sent... </p><br>To try again please wait : '+left_time+'min :'+ that.second +'s</p>'									
																		);	
									that.second = that.second - 1;																		
								
									if(that.second === 0 && left_time === 0){
									$(".js_resend_sms").empty().append(
																		'<p style="color: #000; float: right;" class="mb-0"><span style="color: #000;">You hav\'n\'receive the SMS?&nbsp;</span>'+
																		'<a id ="resend_sms" name ="resend_sms" href="#">Resend now?&nbsp;&nbsp; |&nbsp;&nbsp;</a>'+
																		'<a id ="cancel_sms" name ="cancel_sms" href="#">Annuler</a></p>'
																	);	
												clearInterval(that._rebordCount);					
									
									}else{
										if(that.second === 0){
											that.second = 59;
											left_time = left_time - 1;
										}											
									}
								}, 1000);			
							},
							error: function() {alert("error: Resend SMS, please contact the Administrator")}
						});	
				})	
			.on('keyup', '#daticash_code', function(event){
	
						event.stopImmediatePropagation();
					
					var caveVal = jQuery("#daticash_code").val();
					var caveWidth = caveVal.length;
					var value = jQuery(this).val();
					value = value.replace(/[^0-9]+/g, '');
					jQuery(this).val(value);
										
					if (caveWidth == 6){
														
						jQuery('dati_check_process input').prop('disabled', true);
						var token = jQuery("#daticash_code").val();
						var by = "sms";

						jQuery.ajax({
							type: "POST",
							url: self.classesLocation , // call the php file ajax/
							data: {socketclienttype : that.socketclienttype, action : "confirm-token-code", "token" : token, "by" : by, "user_id" : that.user_id}, // send data var
							dataType: "json",
							beforeSend:function(){
							  jQuery('#dati_check_process').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...<span id="dati_check_process_status"> </span> '); // loader image apprears in the <div id="newComment"></div>														  	
							},
							success: function(response){
							    alert("success")
							    
								that._iTimer = setInterval(function(){
									var message = response.details.message;
									jQuery.ajax({
										type: "POST",
										url: classesLocation , // call the php file ajax/
										data: {socketclienttype : that.socketclienttype, action : "check_status_transaction", "user_token" : that.user_token, "transaction_id" : that.sub_request.transaction.transaction_id}, // send data var
										dataType: "json",
										success: function(response){
											$('#dati_check_process_status').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right text-success" style="display: inline;color: #777777;font-weight: 100;">'+ response.details +'&nbsp</div>');
										},
										error: function() {alert("error: check status, please contact the Administrator")}
									});	
								}, 1000);
								
								
									if(response.match === true){

										$('#dati_check_process').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right text-success" style="display: inline;color: #777777;font-weight: 100;">Transaction Complete successfuly! &nbsp<i class="fa fa-check" aria-hidden="true"></i> <br>Redirection ...</p></div>'+
											'<div class="col-12" style="color: #007bff;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="allow_reset_password" name="allow_reset_password"></p> </div>'					
										);
										
										that._autoTimer = setTimeout(function() {
								
														clearTimeout(that._autoTimer);					
											window.history.back();
										}, 1000);

									} else {		alert('bad')				
											
										if(response.details === undefined){response.details = "Oops! Error connection. Try again"

											// request confirmation
												$(".chat-popup").remove();
												
												$('#body_mask').after(that.request_transfer_popUp);
												
											$('.login-feedback').html(show_alert('error', response.details, 1));
										}						
											
										if(response.error_code === "bad"){

											// request confirmation
												$(".chat-popup").remove();
												
												$('#body_mask').after(that.request_transfer_popUp);
												
											$('.login-feedback').html(show_alert('error', response.details, 1));
										}	
										
										if(response.error_code === "failed"){
												
												$('#dati_check_process').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right text-danger" style="display: inline;font-weight: 100;">'+response.details+' session abord! <b>×</b><br> Redirection ...</p></div>'+
													'<div class="col-12" style="color: #007bff;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="allow_reset_password" name="allow_reset_password"></p> </div>'							
												);
												
												that._autoTimer = setTimeout(function() {
										
																clearTimeout(that._autoTimer);					
													window.history.back();
												}, 2000);
										}						

										if(response.error_code === "error_code"){	
											//alert('number of try : '+ that._try );
											that._try = that._try + 1;
											if(that._try == 3){
												$('#dati_check_process').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right text-danger" style="display: inline;font-weight: 100;">Too attempt try. session abord! <b>×</b><br> Redirection ...</p></div>'+
													'<div class="col-12" style="color: #007bff;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="allow_reset_password" name="allow_reset_password"></p> </div>'							
												);
												
												that._autoTimer = setTimeout(function() {
										
																clearTimeout(that._autoTimer);					
													window.history.back();
												}, 2000);

											}else{
												// request confirmation
													$(".chat-popup").remove();
													
													$('#body_mask').after(that.request_transfer_popUp);
													
												$('.login-feedback').html(show_alert('error', response.details, 1));

											}
						
										}
										
									}							
		
							},
							
							error: function() { alert("error: Confirmation Transaction, please contact the Administrator or try again!") }
						});										
					}
				})					
			.on('keydown', '#dati_code', function(event){alert("dati sms")
						event.stopImmediatePropagation();
					$(".alert").empty()//supprimer le message d'erreur s'il existe
					
					var caveVal = jQuery("#dati_code").val();
					var caveWidth = caveVal.length + 1;

					if (caveWidth == 6){
						if (that.verify !== undefined){
                            $('#dati_sms_btn').text('Processing...').prop('disabled', true);
    						$("#cancel_sms").trigger("click");
    							
    						jQuery('dati_check_process input').prop('disabled', true);
    						
    						var dati_code = $("#dati_code").val();
    
    						jQuery.ajax({
    							type: "POST",
    							url: self.classesLocation , // call the php file ajax/
    							data: {socketclienttype : self.socketclienttype, action : "confirm-token-code", "token" : caveVal, "user_id" : that.user_id, "verify" : that.verify, "by" : that.by}, // send data var
    							dataType: "json",
    							beforeSend:function(){
    							  $('#dati_check_whith_sms').empty().html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...<span id="dati_check_process_status"> </span> ').prop("disabled", true); // loader image apprears in the <div id="newComment"></div>														  	
    							},							
    							success: function(response){
    							    if (response.match === true){
                                        //case ok
                                       $("#label_phone_status i").remove();
        							   $('#label_phone_status').empty().text('PHONE ALREADY VERIFIED ');
        							   $("#label_phone_status").append('<i class="fa fa-check text-success pull-left" style = "margin-right: 12px" aria-hidden="true"></i>');
        							   $('#dati_check_whith_sms').empty();
        							   $('#action_and_info_phone_status').remove();    							        
    							    }else{
    							       $('#dati_check_whith_sms').empty();
        							   $('#dati_sms_btn').prop('disabled', false);
        							   $('#dati_sms_btn').trigger('click');
							   $('.alert').append(response.details);
    							    }

    							},
    							error: function(){
    							    alert("error: Verify by sms, please contact the Administrator.")
    							}
    						})
						}else{
    				
    						$('#dati_sms_btn').text('Processing...').prop('disabled', true);
    						$("#cancel_sms").trigger("click");
    							
    						jQuery('dati_check_process input').prop('disabled', true);
    						
    						var dati_code = $("#dati_code").val();
    
    						jQuery('#dati_check_process').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...'); // loader image apprears in the <div id="newComment"></div>
    						jQuery.ajax({
    							type: "POST",
    							url: self.classesLocation , // call the php file ajax/
    							data: {socketclienttype : self.socketclienttype, action : "confirm-token-code", "token" : caveVal, "user_id" : that.user_id}, // send data var
    							dataType: "json",
    							beforeSend:function(){
    								$('.dati_sms_btn').text('Processing...').prop('disabled', true);
    							},							
    							success: function(response){
    								switch(response.details) {
    									case "ok":
    									case "already":
    									  clearTimeout(self._autoTimer);
    									  clearTimeout(self._rebordCount);
    									  clearTimeout(self._iTimer);
    										 
    										$(".chat-popup").remove();
											
    											if(that.sub_request.transaction !== undefined){
    												that.whatIsIt = "request_transfer";
    												
    												$('<div />').prependTo('body').prop('id', 'body_mask').addClass("body_mask"); 					
    												var modalConfirmation = new Modal('DATIUSER_CLIENT',whatIsIt ,sub_request , self.href);
    												modalConfirmation.start();												
    																			
    											}else{
    												_goto(self.link);
    											}
    											_goto(that.href);
    											
    										break;
    										
    									case "bad":
    										self.login_error = "Oops! Bad code given. Try again ...";
    										self._checkAccess(self.msg);
    										break;
    										
    									case "expired":
    										//alert('expired');
    										//Ici le code pour le renvoie du code par message
    										self.login_error = "Oops! code expired. Enter the new Code receive...";
    										self._checkAccess(self.msg);
    								}
    							},
    							error: function() { }
    						});							    
						}	
									
					}
				})					
			.on('focus', 'input', '.login-form input, .login-form textarea' , function() {
					//$("#pin_code-feedback").empty();
					$("#password-feedback").empty();
					$("#username-feedback").empty();
					$("#email-feedback").empty();
					$(".login-feedback").empty();
					
				// daticash reset or change pin	
					$("#check_pin_code_correspondance-feedback").empty();
					$("#new_pin_code_label").removeClass('text-danger');
					$("#retype_new_pin_code_label").removeClass('text-danger');
					$("#retype_new_pin_code_label").removeClass('text-danger');
					
				})
			.on('click', '#dati_login_modal' , function() {
				// request register
					$(".chat-popup").remove();
					
					$('#body_mask').after(that.connexion_popUp);
					$('.dati_user_status_login').append(that.productList);
				})			
			.on('click', '#dati_register_modal' , function() {
				// request register
					$(".chat-popup").remove();
					
					$('#body_mask').after(that.register_popUp);	
					$('.dati_user_status_login').append(that.productList);
					$('#password').keypad();

					if(that.sub_request.transaction !== undefined){
						configure_intlTelInput()
						$("#input_group_appendto_username").remove()
						$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');
											
						$("#username").val(sub_request.profil.user_phone);			
						$(".iti_country[data-dial-code='+"+sub_request.sender_country_code+"']").trigger("click");
					
						$("#username").prop('disabled', true);
					}

					
				})	
			.on('click', '#reset_password_btn' , function(e) {
				e.preventDefault()
				var validate_reset = this;

				var $form = $(this).closest(".login-form");
				var email = $form.find("#email").val();
				var action = $form.find(".action").val();				
				
					$(".alert").remove()

					if (emailIsValid(email)) {
						$('#email-feedback').html("<div class='text-success' style='display:inline;'> ✓ Valid</div>");

						$(validate_reset).prop('disabled', true);
						$("#loading_image").remove();
						$(".login-form").append(
												'<div class="spinner" id="loading_image" style="display: hidden;">'+
													'<div class="bounce1"></div>'+
													'<div class="bounce2"></div>'+
													'<div class="bounce3"></div>'+
													'<h4>Please wait...</h4>'+
												'</div>'
												);				
						var socketclienttype = 'USERSTATUS_CLIENT';

						$.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {'socketclienttype':socketclienttype, 'email':email, 'action':action}, // send data var
							dataType: "json",
							success: function(response){
								$(".login-card-body").empty().append(
														 '<div class="text-center mb-4">Email have been sent to '+email+'</div>'+
															'<div class="row">'+
																'<div class="col-6"></div>'+
																'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="dati_login_modal" name="dati_login_modal">Return Login</p></div>'+
															'</div>'+
														 '</div>'
													);							
							},
							error: function() { 
												alert('Sorry ! unknown error appeared, refresh your browse and try again. If the problem persist contact the web master of site');
												$(validate_reset).prop('disabled', false);
												$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
							}
						});	        
					}else{
							$('#email-feedback').html("<div class='text-danger'>Email Invalid</div>");
					}					
				
				})
			.on('click', '#allow_reset_password' , function(e) {
				$(".chat-popup").remove();
				
					$('#body_mask').after(that.reset_password_popUp);	
					$('.dati_user_status_login').append(that.productList);
		
				})		
			.on('click', '#create_account_btn' , function(e) {
				e.preventDefault()
				var validate_create = this;

				var $form = $(this).closest(".login-form");
				var username = $form.find("#username").val();
				var email = $form.find("#email").val();
				var password = $form.find("#password").val();
				var action = $form.find(".action").val();				
				
					$(".alert").remove()
					
					if(usernameIsValid(username)){
							$('#username-feedback').html("<div class='text-success' style='display:inline;'><i class='fa fa-check' aria-hidden='true'></i></div>");
					}else{
							$('#username-feedback').html("<div class='text-danger'>Username must be at least 6 characters</div>");
					}	
					
					if (passwordLength(password) && emailIsValid(email)) {
						$(validate_create).prop('disabled', true);
						$("#loading_image").remove();
						$(".login-form").append(
												'<div class="spinner" id="loading_image" style="display: hidden;">'+
													'<div class="bounce1"></div>'+
													'<div class="bounce2"></div>'+
													'<div class="bounce3"></div>'+
													'<h4>Please wait...</h4>'+
												'</div>'
												);				
						var socketclienttype = 'USERSTATUS_CLIENT';

						$.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {'socketclienttype':socketclienttype, 'username':username, 'email':email, 'password':password, 'action':action}, // send data var
							dataType: "json",
							success: function(response){//alert(response)
								if(response.match === "confirm-token-form"){//alert('confirm')
											$('#body_mask').after(that.connexion_popUp);
											$('#social-auth-links').remove;
											//$('.login-feedback').html('<div class="alert alert-success"><i class="fa fa-check-circle"></i> Auto loading ...<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
											$("#username").val(username);
											$("#password").val(password);
											
									        that.user_id = response.user_id;
									        that.user_email = email;
											
											that.msg = "{\"socketclienttype\":\"" + socketclienttype + "\",\"type\":\"login\",\"username\": \"" + username + "\",\"password\":\"" + password + "\",\"currency\":\"usd\"}",
											//construction de l'objet login destiné à la vérification de confirmation du compte via le "login-confirm-token-form"
											
											$('#login-form-btn').trigger("click");	

								}else{
									
									if(response.match === true){
											that.user_id = response.user_id;
											//var userInfo = response.userinfo;
											$('.login-feedback').html(show_alert('error', response.details, 1));
											$(validate_create).prop('disabled', false);
											$("#loading_image").remove();// reinitialiser les proprietées du formulaire								
											
									} else {
										if(response.details === undefined){response.details = "Oops! Error connection. Try again"}
											$('.login-feedback').html(show_alert('error', response.details, 1));
											$(validate_create).prop('disabled', false);
											$("#loading_image").remove();// reinitialiser les proprietées du formulaire								
									}							
								}
							},
							error: function() { 
												alert('Sorry ! unknown error appeared, refresh your browse and try again. If the problem persist contact the web master of site');
												$(validate_create).prop('disabled', false);
												$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
							}
						});	        
					}else{
						if(emailIsValid(email)){
							$('#email-feedback').html("<div class='text-success' style='display:inline;'> ✓ Valid</div>");
						}else{
							$('#email-feedback').html("<div class='text-danger'>Email Invalid</div>");
						}
						
						if(passwordLength(password)){
							$('#password-feedback').html("<div class='text-success' style='display:inline;'><i class='fa fa-check' aria-hidden='true'></i></div>");
						}else{
							$('#password-feedback').html("<p class='text-danger'>Password must be at least 6 characters</p>");
						}	
	
					}					
				
				})						
			.on('click', '#login-form-btn', function(e) {
				e.preventDefault()
				var validate = this;

				var $form = $(this).closest(".login-form");
				var username = $form.find("#username").val();
				var password = $form.find("#password").val();
				var action = $form.find(".action").val();
				
						if (passwordLength(password) && username!="") {

							$(validate).prop('disabled', true);
							$("#loading_image").remove();
							$(".login-form").append(
													'<div class="spinner" id="loading_image" style="display: hidden;">'+
														'<div class="bounce1"></div>'+
														'<div class="bounce2"></div>'+
														'<div class="bounce3"></div>'+
														'<h4>Please wait...</h4>'+
													'</div>'
													);				
							var socketclienttype = 'USERSTATUS_CLIENT';
							that.msg = "{\"socketclienttype\":\"" + socketclienttype + "\",\"type\":\"login\",\"username\": \"" + username + "\",\"password\":\"" + password + "\",\"currency\":\"usd\"}",

							chek(that.msg, that.confirm_token_form_popUp);

						}else{
							
							if(username==""){
								$('#email-feedback').html("<div class='text-danger'>Empty Username</div>");
							}					
							
							if(!passwordLength(password)){
								$('#password-feedback').html("<div class='text-danger'>Password must be at least 6 characters</div>")
							}
													
						}

						function chek(msg, confirm_token_form_popUp){
							$.ajax({
								type: "POST",
								url: classesLocation , // call the php file ajax/
								data: {'socketclienttype':socketclienttype, 'username':username, 'password':password, 'action':action}, // send data var
								dataType: "json",
								success: function(response){
									if(response.match === "confirm-token-form"){
												//that.user_id = response.user_id
												that.msg = "{\"socketclienttype\":\"" + socketclienttype + "\",\"type\":\"login\",\"username\": \"" + username + "\",\"password\":\"" + password + "\",\"currency\":\"usd\"}";
												//construction de l'objet login destiné à la vérification de confirmation du compte via le "login-confirm-token-form"
											
											self.user_id = response.user_id;
											//self.user_email = response.email;
											//alert(self.user_id)
											//verifier si le confirm_token_form_modal existe
											var nodeType = $( '#confirm_token_form_modal' )[ 0 ];
											console.log( nodeType );
						
											if (undefined === nodeType){
												$(".chat-popup").remove();
												
												$("body").append(confirm_token_form_popUp);							
											}		
											
											self._autoTimer = setTimeout(function() {
												chek(that.msg);
											}, 10000);
											
										$(validate).prop('disabled', false);
									
									}else{
										  clearTimeout(that._autoTimer);
										  clearTimeout(that._rebordCount);
										  clearTimeout(that._iTimer);
										  
										if(response.match === true){
												that.user_token = response.details.user_token;
												//that.user_id = response.user_id;
												//var userInfo = response.userinfo;
												//alert('login-ok');
												 
												$(".chat-popup").remove();
												
												if(that.sub_request.transaction != ""){
													that.whatIsIt = "request_transfer";
													
													$('<div />').prependTo('body').prop('id', 'body_mask').addClass("body_mask"); 					
													var modalConfirmation = new Modal('DATIUSER_CLIENT',whatIsIt ,sub_request , that.href);
													modalConfirmation.start();												
																				
												}else{
													_goto(that.href);
												}	
												_goto(that.href);							
																		
												//var urlcourante = document.location.href; 
												 //window.location.href = urlcourante;// +'&'+u=userInfo;
												 // si possible d'envoyer les parametres de l'utilisateur aussi
										} else {
											if(response.details === undefined){response.details = "Oops! Error connection. Try again"}
												$('.login-feedback').html(show_alert('error', response.details, 1));
												$(validate).prop('disabled', false);
												$("#loading_image").remove();// reinitialiser les proprietées du formulaire								

											if(response.error_code === "login-bad"){
												//alert('number of try : '+ that._try );
												that._try = that._try + 1;
												if(that._try == 3){
													$('#allow_reset-feedback').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right" style="display: inline;color: #777777;font-weight: 100;">Have you forgot you password ?</p><p style="cursor:pointer;display: inline;" id="allow_reset_password" name="allow_reset_password"> Reset Password!</p></div>'+
														'<div class="col-12" style="color: #007bff;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="allow_reset_password" name="allow_reset_password"></p> </div>'							
													);
													that._try = 0;
												}
												
											}
										}							
									}
								
								},
								error: function() { 
									alert('Sorry ! unknown error appeared, refresh your browse and try again. If the problem persist contact the web master of site');
									$(validate).prop('disabled', false);
									$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
								}
							});	  
						}				
									
									
				})

			.on('click', '#daticash_login_btn', function(e) {
 				e.preventDefault()
				var validate = this;

				var $form = $(this).closest(".login-form");
				var phone_number = $form.find("#username").val().replace(/[^0-9]+/g, '');
				var country_code = $form.find("#country_code").val();
				var pin_code = $form.find("#pin_code").val();
				var action = $form.find(".action").val();
				
				that.tampon_data = {
					'phone_number' : phone_number,
					'country_code' : country_code,
					'pin_code' : pin_code
				}
				

/* 
alert(that.tampon_data.phone_number)
alert(that.tampon_data.pin_code)
alert(that.tampon_data.country_code)
alert(country_code)
alert(pin_code)
alert(action) 
 */
				 

				 
						if (pinLength('#pin_code-feedback', pin_code) && daticash_current_phone_number.isValidNumber()) {

							$(validate).prop('disabled', true).remove();
							
							$("#loading_image").remove();
							$(".login-form").append(
													'<div class="spinner" id="loading_image" style="display: hidden;">'+
														'<div class="bounce1"></div>'+
														'<div class="bounce2"></div>'+
														'<div class="bounce3"></div>'+
														'<h4>Please wait...</h4>'+
													'</div>'
													);				
							var socketclienttype = 'USERSTATUS_CLIENT';
							that.msg = "{\"socketclienttype\":\"" + socketclienttype + "\",\"type\":\"login\",\"phone_number\": \"" + phone_number + "\",\"pin_code\":\"" + pin_code + "\",\"country_code\":\"" + country_code + "\",\"currency\":\"usd\"}",

							chek(that.msg, that.daticash_confirm_token_form_popUp);

						}else{
							
							if(username==""){
								$('#phone-feedback').html("<div class='text-danger'>Please enter a valid number below</div>");
							}
							
							if(!daticash_current_phone_number.isValidNumber()){
								$('#phone-feedback').html("<div class='text-danger'>Please enter a valid number below</div>");
							}	
					
							
							if(!pinLength('#pin_code-feedback', pin_code)){
								$('#pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
							}
													
						}

						function chek(msg, daticash_confirm_token_form_popUp){
							

/* 
  fetch('http://api.daticash.com/api/secure/login', {
    method: 'post',
    body: JSON.stringify({"phone_number":"6996699589"})
  });


 */
/* 							
						  var parameters = {
									method: 'post',
									headers: {
									  "Content-type": "application/x-www-form-urlencoded; charset=UTF-8"
									},
									body: 'recipient_country_code=237&reason&recipient_phone=691750821&sender_country_code=237&sender_phone=691750821&currency_received=XAF&currency_sent=XAF&amount_received=150000&amount_sent=150000&fees=0.0&total_pay=150000&type=withdraw&mode=mobilemoney&account_ref='+ account_ref,
									mode: 'no-cors',
									credentials: 'include'
								};
										
								fetch('https://api.daticloud.com/api/anon/job', parameters)
									  .then(status)
									  .then(json)
									  .then(function(data) {
										console.log('Request succeeded with JSON response', data);
									  }).catch(function(error) {
										console.log('Request failed', error);
									  }); */				
							
							$.ajax({
								type: "POST",
								url: classesLocation , // call the php file ajax/
								data: {'socketclienttype':socketclienttype, 'phone_number':phone_number, 'password':pin_code, 'country_code':country_code, 'action':action}, // send data var
								dataType: "json",
								success: function(response){							  										  
										if(response.match === true){
											if(response.success_code === "confirm-token-form"){
														that.user_id = response.user_id;
														that.user_email = response.email;
														that.msg = "{\"socketclienttype\":\"" + socketclienttype + "\",\"type\":\"login\",\"phone_number\": \"" + phone_number + "\",\"country_code\": \"" + country_code + "\",\"pin_code\":\"" + pin_code + "\",\"currency\":\"usd\"}";
														//construction de l'objet login destiné à la vérification de confirmation du compte via le "login-confirm-token-form"

													that.tampon_data.user_id = response.user_id;
													that.tampon_data.user_email = response.email;
													
													//alert(that.tampon_data.phone_number);
													//alert(that.tampon_data.user_id);
													//alert(that.tampon_data.user_id)
													//alert(that.tampon_data.user_email)
													//alert(that.user_email)
													//alert(that.user_id)
													
													//verifier si le daticash_confirm_token_form_popUp existe
													var nodeType = $( '#daticash_confirm_token_form_popUp' )[ 0 ];
													console.log( nodeType );
								
													if (undefined === nodeType){
														$(".chat-popup").remove();
								
														$('#body_mask').after(that.daticash_confirm_token_form_popUp(response.email));
															if(that.sub_request.transaction !== undefined){
																$('#daticash_display_transaction_status_topUp').remove();																
																$('.login-logo').after(that.daticash_display_transaction_status_topUp);
																daticash_select_transaction_status_position(1);	
															}
														//$("body").append(that.daticash_confirm_token_form_popUp);							
													}		
													
													self._autoTimer = setInterval(function() {
														var action = 'daticash_check_user_status';
														$.ajax({
															type: "POST",
															url: classesLocation , // call the php file ajax/
															data: {'socketclienttype':socketclienttype, 'user_id':that.user_id, 'action':action}, // send data var
															dataType: "json",
															success: function(response){
																	if(response.match === true){
																		clearInterval(self._autoTimer);
																		console.log("");
																				$(".chat-popup").remove();
																					
																				$('#body_mask').after(that.daticash_email_verified_popUp);
																		$('.login-feedback').append('<div class="alert alert-success text-center">Great !!!</div>');
																	}							
															},
															error: function() { 
																alert('Error check user status, click to "OK" to try again. If the problem persist contact the web master of site');
																$(validate).prop('disabled', false);
																$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
																$('.form-group_daticash_login_btn').append('<button type="submit" class="daticash_btn btn-daticash daticash_login_btn btn-block" id="daticash_login_btn" name="daticash_login_btn" >Login</button>'); 

															}
														});											
														
													}, 10000);
													
												$(validate).prop('disabled', false);
											
											}else{
												//alert('login-ok');												
												  clearTimeout(that._autoTimer);
												  clearTimeout(that._rebordCount);
												  clearTimeout(that._iTimer);	
												  
												that.user_token = response.user_token;
												//that.user_id = response.user_id;
												//var userInfo = response.userinfo;

												console.log('next url: '+ response.path);
												if (response.path !== null){
													that.href = response.path;
												}
												
												 
												$(".chat-popup").remove();
												
												if(that.whatIsIt === "login" || that.whatIsIt === undefined ){
													that.href = "http://daticash.com/";
													_goto(that.href);
												}
												
												that.whatIsIt = "email-verified";
												
												console.log('transaction sub_request exist? : '+ that.sub_request.transaction);
												if(that.sub_request.transaction != ""){
													that.whatIsIt = "request_transfer";						
												}	
												
											$('<div />').prependTo('body').prop('id', 'body_mask').addClass("body_mask"); 					
											var modalConfirmation = new Modal('DATIUSER_CLIENT',whatIsIt ,sub_request , that.href);
											modalConfirmation.start();													
																		
												//var urlcourante = document.location.href; 
												 //window.location.href = urlcourante;// +'&'+u=userInfo;
												 // si possible d'envoyer les parametres de l'utilisateur aussi
											}
											
										}else{
											$('.form-group_daticash_login_btn').append('<button type="submit" class="daticash_btn btn-daticash daticash_login_btn btn-block" id="daticash_login_btn" name="daticash_login_btn" >Login</button>'); 
											if(response.details === undefined){response.details = "Oops! Error connection. Try again"}
												$('.login-feedback').html(show_alert('error', response.details, 1));
												$(validate).prop('disabled', false);
												$("#loading_image").remove();// reinitialiser les proprietées du formulaire								

											if(response.error_code === "login-bad"){
												//alert('number of try : '+ that._try );
												that._try = that._try + 1;
												if(that._try == 3){
													$('#allow_reset-feedback').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right" style="display: inline;color: #777777;font-weight: 100;">Have you forgot you PIN code ?</p><p style="cursor:pointer;display: inline;" id="daticash_allow_reset_pin" name="daticash_allow_reset_pin"> Reset PIN!</p></div>'+
														'<div class="col-12" style="color: #007bff;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="daticash_allow_reset_pin" name="daticash_allow_reset_pin"></p> </div>'							
													);
													that._try = 0;
												}
												
											}
											
											if(response.error_code === "no-existant-account"){

													$(".chat-popup").remove();
													
														$('#body_mask').after(that.daticash_register_if_not_exist_popUp);
						
											}
										}							

								},
								error: function() { 
									alert('Error login, refresh your browse and try again. If the problem persist contact the web master of site');
									$(validate).prop('disabled', false);
									$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
									$('.form-group_daticash_login_btn').append('<button type="submit" class="daticash_btn btn-daticash daticash_login_btn btn-block" id="daticash_login_btn" name="daticash_login_btn" >Login</button>'); 

								}
							});	  
						
						}				
									 
									
				})					
			.on('click', '#daticash_request_register_btn', function(e) {
 				e.preventDefault()
				var validate = this;

				var $form = $(this).closest(".login-form");
				var phone_number = $form.find("#username").val().replace(/[^0-9]+/g, '');
				var country_code = $form.find("#country_code").val();
				var new_pin_code = $form.find("#new_pin_code").val();
				var retype_new_pin_code = $form.find("#retype_new_pin_code").val();
				var action = $form.find(".action").val();

					if (daticash_current_phone_number.isValidNumber() && pinLength('#new_pin_code-feedback', new_pin_code) && pinLength('#retype_new_pin_code-feedback', retype_new_pin_code)) {
						if (new_pin_code !== retype_new_pin_code) {
							$("#new_pin_code_label").addClass('text-danger');
							$("#retype_new_pin_code_label").addClass('text-danger');
							$("#check_pin_code_correspondance-feedback").empty().append("<div class='text-danger'>Given PIN Code does not match.</div>");
							
						}else{
							that.tampon_data = {
								'phone_number' : phone_number,
								'country_code' : country_code,
								'new_pin_code' : new_pin_code
							}
							
							$(".chat-popup").remove();
							
								$('#body_mask').after(that.daticash_register_if_not_exist_popUp);									
									if(that.sub_request.transaction !== undefined){						
										$('#daticash_display_transaction_status_topUp').remove();
										$('.login-logo').after(that.daticash_display_transaction_status_topUp);
										daticash_select_transaction_status_position(1);	
									}
						}
					}else{
						if(new_pin_code==""){
							$('#new_pin_code-feedback').html("<div class='text-danger'>Please enter a valid PIN Code below</div>");
						}
						if(retype_new_pin_code==""){
							$('#retype_new_pin_code-feedback').html("<div class='text-danger'>Please enter a valid PIN Code below</div>");
						}
						
						if(!pinLength('#new_pin_code-feedback', new_pin_code)){
							$('#new_pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
						}
						if(!pinLength('#retype_new_pin_code-feedback', retype_new_pin_code)){
							$('#retype_new_pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
						}
					
						if(username==""){
							$('#phone-feedback').html("<div class='text-danger'>Please enter a valid number below</div>");
						}
						if(!daticash_current_phone_number.isValidNumber()){
							$('#phone-feedback').html("<div class='text-danger'>Please enter a valid number below</div>");
						}
					
					}						
			
				})			
			.on('click', '#daticash_register_if_not_exist_btn' , function(e) {

/* 
alert(that.tampon_data.phone_number)
alert(that.tampon_data.country_code)
alert(that.tampon_data.new_pin_code)
 */
				e.preventDefault()
				var validate_create = this;

				var $form = $(this).closest(".login-form");
				var phone_number = that.tampon_data.phone_number;
				var country_code = that.tampon_data.country_code;
				var email = $form.find("#email").val();
				var pin_code = that.tampon_data.new_pin_code;
				var firstname = $form.find("#firstname").val();
				var lastname = $form.find("#lastname").val();
				var action = 'daticash_register_if_not_exist';				

				
					$(".alert").remove()

					if (emailIsValid(email)) {
						$('#email-feedback').html("<div class='text-success' style='display:inline;'> ✓ Valid</div>");
						$('.form-group_daticash_register_if_not_exist').empty();

						$(validate_create).prop('disabled', true);
						$("#loading_image").remove();
						$(".login-form").append(
												'<div class="spinner" id="loading_image" style="display: hidden;">'+
													'<div class="bounce1"></div>'+
													'<div class="bounce2"></div>'+
													'<div class="bounce3"></div>'+
													'<h4>Please wait...</h4>'+
												'</div>'
												);				
						var socketclienttype = 'USERSTATUS_CLIENT';

						$.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {'socketclienttype':socketclienttype, 'phone_number':phone_number,  'country_code':country_code, 'email':email, 'pin_code':pin_code, 'firstname':firstname, 'lastname':lastname, 'action':action}, // send data var
							dataType: "json",
							success: function(response){//alert(response)
								if(response.match === true){
									if(response.success_code === "register-ok"){
										$('.login-feedback').html('<div class="alert alert-success text-center">'+response.details+' Auto Login. </div>');
										
										daticash_autoLogin(that.daticash_connexion_popUp, country_code, phone_number, pin_code);
	
									}else{						
										$('.login-feedback').html(show_alert('error', response.details, 1));
										$(validate_create).prop('disabled', false);
										$("#loading_image").remove();// reinitialiser les proprietées du formulaire	
										
										$('.form-group_daticash_register_if_not_exist').append(
																							'<div class="row">'+
																							  '<div class="col-12">'+
																								'<input type="hidden" name="action" class="action" value="reset_password">'+
																								'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_register_if_not_exist_btn" name="daticash_register_if_not_exist_btn">Continue</button>'+
																							  '</div>'+
																							'</div>'+
													 
																							  '<div class="col-12 " >'+
																								'<div class="icheck-primary" style="font-weight: 100;">'+
																								  '<input type="checkbox" checked id="agree" name="agree">'+
																								  '<label for="agreement"  style="margin:5px; color:#7A7A7A; display: inline;">'+
																									'I agree to the <a href="https://app.termly.io/document/terms-of-use-for-saas/9697da89-93b4-427a-ad5b-d41243fe5436" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Terms and Conditions </a></b> and the <a href="https://app.termly.io/document/privacy-policy/6957bc16-55f2-427c-8e66-64d1d4c387a9" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Privacy Policy</b></a>'+
																								  '</label></br>'+
																								'</div>'+												  
																							  '</div>'
																						);
									}
									
								} else {
									if(response.match === undefined){response.details = "Oops! Error connection. Try again"}
										$('.login-feedback').html(show_alert('error', response.details, 1));
										$(validate_create).prop('disabled', false);
										$("#loading_image").remove();// reinitialiser les proprietées du formulaire								
							
										$('.form-group_daticash_register_if_not_exist').append(
																							'<div class="row">'+
																							  '<div class="col-12">'+
																								'<input type="hidden" name="action" class="action" value="reset_password">'+
																								'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_register_if_not_exist_btn" name="daticash_register_if_not_exist_btn">Continue</button>'+
																							  '</div>'+
																							'</div>'+
													 
																							  '<div class="col-12 " >'+
																								'<div class="icheck-primary" style="font-weight: 100;">'+
																								  '<input type="checkbox" checked id="agree" name="agree">'+
																								  '<label for="agreement"  style="margin:5px; color:#7A7A7A; display: inline;">'+
																									'I agree to the <a href="https://app.termly.io/document/terms-of-use-for-saas/9697da89-93b4-427a-ad5b-d41243fe5436" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Terms and Conditions </a></b> and the <a href="https://app.termly.io/document/privacy-policy/6957bc16-55f2-427c-8e66-64d1d4c387a9" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Privacy Policy</b></a>'+
																								  '</label></br>'+
																								'</div>'+												  
																							  '</div>'
																						);								
								
								}							
								
							},
							error: function() { 
												alert('Error: Daticash Registering Account, refresh your browse and try again. If the problem persist contact the web master of site');
												$(validate_create).prop('disabled', false);
												$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
							
										$('.form-group_daticash_register_if_not_exist').append(
																							'<div class="row">'+
																							  '<div class="col-12">'+
																								'<input type="hidden" name="action" class="action" value="reset_password">'+
																								'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_register_if_not_exist_btn" name="daticash_register_if_not_exist_btn">Continue</button>'+
																							  '</div>'+
																							'</div>'+
													 
																							  '<div class="col-12 " >'+
																								'<div class="icheck-primary" style="font-weight: 100;">'+
																								  '<input type="checkbox" checked id="agree" name="agree">'+
																								  '<label for="agreement"  style="margin:5px; color:#7A7A7A; display: inline;">'+
																									'I agree to the <a href="https://app.termly.io/document/terms-of-use-for-saas/9697da89-93b4-427a-ad5b-d41243fe5436" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Terms and Conditions </a></b> and the <a href="https://app.termly.io/document/privacy-policy/6957bc16-55f2-427c-8e66-64d1d4c387a9" target="_blank"><b style="color:#3C424F; font-weight: 700;"> Privacy Policy</b></a>'+
																								  '</label></br>'+
																								'</div>'+												  
																							  '</div>'
																						);								
							
							}
						});	 					
					}else{
							$('#email-feedback').html("<div class='text-danger'>Invalid Email</div>");
					}	
				})					
			.on('click', '#daticash_allow_reset_pin' , function(e) {
				$(".chat-popup").remove();
				
					$('#body_mask').after(that.daticash_request_reset_pin_code_popUp);	
					$('.dati_user_status_login').append(that.productList);
		
				})			
			.on('click', '#show_hide_pin', function(){
					if($('#show_hide_pin').prop("checked") == true) {
						$('#pin_code').attr("type", "text");
						$('.show_or_hide_pin_text_js').text("Hide");
					} else {
						$('#pin_code').attr("type", "password");
						$('.show_or_hide_pin_text_js').text("Show");						
					}
				})
			.on('click', '#show_or_hide_pin_for_old_pin_code_id', function(){
					if($('#show_or_hide_pin_for_old_pin_code_id').prop("checked") == true) {
						$('#old_pin_code').attr("type", "text");
						$('.show_or_hide_pin_for_old_pin_code_text_js').text("Hide");
					} else {
						$('#old_pin_code').attr("type", "password");
						$('.show_or_hide_pin_for_old_pin_code_text_js').text("Show");						
					}
				})
			.on('click', '#show_or_hide_pin_for_new_pin_code_id', function(){
					if($('#show_or_hide_pin_for_new_pin_code_id').prop("checked") == true) {
						$('#new_pin_code').attr("type", "text");
						$('.show_or_hide_pin_for_new_pin_code_text_js').text("Hide");
					} else {
						$('#new_pin_code').attr("type", "password");
						$('.show_or_hide_pin_for_new_pin_code_text_js').text("Show");						
					}
				})
			.on('click', '#show_or_hide_pin_for_retype_new_pin_code_id', function(){
					if($('#show_or_hide_pin_for_retype_new_pin_code_id').prop("checked") == true) {
						$('#retype_new_pin_code').attr("type", "text");
						$('.show_or_hide_pin_for_retype_new_pin_code_text_js').text("Hide");
					} else {
						$('#retype_new_pin_code').attr("type", "password");
						$('.show_or_hide_pin_for_retype_new_pin_code_text_js').text("Show");						
					}
				})
			.on('click', '#daticash_request_reset_pin_code_btn' , function(e) {
				e.preventDefault()
				var validate_reset = this;

				var $form = $(this).closest(".login-form");
				var email = $form.find("#email").val();
				var action = $form.find(".action").val();				
				
					$(".alert").remove()

					if (emailIsValid(email)) {
						$('#email-feedback').html("<div class='text-success' style='display:inline;'> ✓ Valid</div>");

						$(validate_reset).prop('disabled', true);
						$("#loading_image").remove();
						$(".login-form").append(
												'<div class="spinner" id="loading_image" style="display: hidden;">'+
													'<div class="bounce1"></div>'+
													'<div class="bounce2"></div>'+
													'<div class="bounce3"></div>'+
													'<h4>Please wait...</h4>'+
												'</div>'
												);				
						var socketclienttype = 'USERSTATUS_CLIENT';

						$.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {'socketclienttype':socketclienttype, 'email':email, 'action':action}, // send data var
							dataType: "json",
							success: function(response){ 			
								if(response.match === true){
									$('.login-feedback').html('<div class="alert alert-success text-center">'+response.details+'</div>');																		
									$("#loading_image").remove();								
										$(".login-card-body").empty().append(
																 '<div class="text-center mb-4">The email with further instructions was sent to '+response.email+'. If you don’t receive a message in 5 minutes, check the junk folder. If you are still experiencing any problems, contact support at <a href="http://support@daticash.com" target="_blank" >support@daticash.com</a></div>'+
																	'<div class="row">'+
																		'<div class="col-6"></div>'+
																		'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="exit_btn" name="exit_btn">Return Login</p></div>'+
																	'</div>'+
																 '</div>'
															);
								}else{
										$('.login-feedback').html(show_alert('error', response.details, 1));									
										$('.form-group_daticash_reset_pin_btn').append('<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_request_reset_pin_code_btn" name="daticash_request_reset_pin_code_btn">Reset PIN</button>'); 
										$(validate_reset).prop('disabled', false);
										$("#loading_image").remove();							
															
								}

							},
							error: function() { 
												alert('Sorry ! unknown error appeared, refresh your browse and try again. If the problem persist contact the web master of site');
												$(validate_reset).prop('disabled', false);
												$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
							}
						});	        
					}else{
							$('#email-feedback').html("<div class='text-danger'>Invalid Email</div>");
					}					
				
				})				
			.on('click', '#daticash_confirm_change_or_reset_pin_code_btn_try_again' , function(e) {
				// request login with daticash
									$(".chat-popup").remove();
							$('#body_mask').after(that.daticash_connexion_popUp);
							$("#daticash_allow_reset_pin").trigger('click');
				})
			.on('click', '#daticash_confirm_change_or_reset_pin_code_btn' , function(e) {
				e.preventDefault()
				var validate_reset = this;

				var $form = $(this).closest(".login-form");
				var old_pin_code = $form.find("#old_pin_code").val();
				var new_pin_code = $form.find("#new_pin_code").val();
				var retype_new_pin_code = $form.find("#retype_new_pin_code").val();
						
				
					$(".alert").remove()
					
									
					if(that.whatIsIt === "change-password"){
						var action = "daticash_confirm_change_pin_code";		
						alert('change-password')
						if (pinLength('#old_pin_code-feedback', old_pin_code) && pinLength('#new_pin_code-feedback', new_pin_code) && pinLength('#retype_new_pin_code-feedback', retype_new_pin_code)) {
							if (new_pin_code !== retype_new_pin_code) {
								$("#new_pin_code_label").addClass('text-danger');
								$("#retype_new_pin_code_label").addClass('text-danger');
								$("#check_pin_code_correspondance-feedback").empty().append("<div class='text-danger'>Given PIN Code does not match.</div>");
								
							}else{
								$(validate_reset).prop('disabled', true).remove();

								$("#loading_image").remove();
								$(".login-form").append(
														'<div class="spinner" id="loading_image" style="display: hidden;">'+
															'<div class="bounce1"></div>'+
															'<div class="bounce2"></div>'+
															'<div class="bounce3"></div>'+
															'<h4>Please wait...</h4>'+
														'</div>'
														);				
								
								var socketclienttype = 'USERSTATUS_CLIENT';
							
								$.ajax({
									type: "POST",
									url: classesLocation , // call the php file ajax/
									data: {'socketclienttype':socketclienttype, 'old_pin_code':old_pin_code, 'new_pin_code':new_pin_code, 'token':token, 'user_id':user_id, 'action':action}, // send data var
									dataType: "json",
									success: function(response){/* 
										$(".login-card-body").empty().append(
																 '<div class="text-center mb-4">The Pin token reset link has been sent to '+email+'<br>Please check...</div>'+
																	'<div class="row">'+
																		'<div class="col-6"></div>'+
																		'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="exit_btn" name="exit_btn">Return Login</p></div>'+
																	'</div>'+
																 '</div>'
															);	 */
															
										$(".login-card-body").empty().append(
																 '<div class="text-center mb-4">The email with further instructions was sent to the submitted email address. If you don’t receive a message in 5 minutes, check the junk folder. If you are still experiencing any problems, contact support at support@daticash.com</div>'+
																	'<div class="row">'+
																		'<div class="col-6"></div>'+
																		'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="exit_btn" name="exit_btn">Return Login</p></div>'+
																	'</div>'+
																 '</div>'
															);							
									},
									error: function() { 
														alert('Sorry ! error change password, refresh your browse and try again. If the problem persist contact the web master of site');
														$(validate_reset).prop('disabled', false);
														$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
									}
								});									
							
							}
						}else{
							if(old_pin_code==""){
								$('#old_pin_code-feedback').html("<div class='text-danger'>Please enter a valid PIN Code below</div>");
							}
							if(new_pin_code==""){
								$('#new_pin_code-feedback').html("<div class='text-danger'>Please enter a valid PIN Code below</div>");
							}
							if(retype_new_pin_code==""){
								$('#retype_new_pin_code-feedback').html("<div class='text-danger'>Please enter a valid PIN Code below</div>");
							}
							
							
							if(!pinLength('#new_pin_code-feedback', new_pin_code)){
								$('#new_pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
							}
							if(!pinLength('#retype_new_pin_code-feedback', retype_new_pin_code)){
								$('#retype_new_pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
							}
							if(!pinLength('#old_pin_code-feedback', old_pin_code)){
								$('#old_pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
							}
																						
						}						
					}
											
					if(that.whatIsIt === "reset-password"){
						
 				var params = (
								'recipient_country_code=237'
								+'&'+'reason'
								+'&'+'recipient_phone=691750821'
								+'&'+'sender_country_code=237'
								+'&'+'sender_phone=691750821'
								+'&'+'currency_received=XAF'
								+'&'+'currency_sent=XAF'
								+'&'+'amount_received=150000'
								+'&'+'amount_sent=150000'
								+'&'+'fees=0.0'
								+'&'+'total_pay=150000'
								+'&'+'type=withdraw'
								+'&'+'mode=mobilemoney'
								+'&'+'account_ref=default'
							);								
var email = "artsjuniors@gmail.com";
				//fetch(`https://getvideo.p.rapidapi.com/?url=https://www.youtube.com/watch?v=7yG88EDW_Eg`, {method:"GET"})// geoIpLookup
				fetch(`http://ipinfo.io/?callback=callback&token=ipinfo.io`)// geoIpLookup with callback
				//fetch(`http://ipinfo.io/city?token=ipinfo.io`)// geoIpLookup city with callback
				//fetch(`https://ipinfo.io/?token=ipinfo.io`)// geoIpLookup
				//fetch(`http://api.ipstack.com/77.111.246.14?access_key=113b78668a764f6b345902b6d1423caf`)
				//fetch(`//api.github.com/users/bouba`)
				//fetch(`https://api.daticloud.com/api/anon/job?${params}`, {mode: 'no-cors', method:"POST"})
				//fetch(`http://api.daticash.com/api/anon/request/reset-password?email=artsjuniors@gmail.com`, {mode: 'no-cors', method:"POST"})
				  .then(
					function(response) {
					  if (response.status !== 200) {
						console.log(response);
	
						return;
					  }

					  // Examine the text in the response
					  response.json().then(function(data) {
						console.log(data);
					  });
				  
					}

				  )						

						
						var action = "daticash_confirm_reset_pin_code";		
						
						if (pinLength('#new_pin_code-feedback', new_pin_code) && pinLength('#retype_new_pin_code-feedback', retype_new_pin_code)) {
							if (new_pin_code !== retype_new_pin_code) {
								$("#new_pin_code_label").addClass('text-danger');
								$("#retype_new_pin_code_label").addClass('text-danger');
								$("#check_pin_code_correspondance-feedback").empty().append("<div class='text-danger'>Given PIN Code does not match.</div>");
								
							}else{
								$(validate_reset).prop('disabled', true).remove();

								$("#loading_image").remove();
								$(".login-form").append(
														'<div class="spinner" id="loading_image" style="display: hidden;">'+
															'<div class="bounce1"></div>'+
															'<div class="bounce2"></div>'+
															'<div class="bounce3"></div>'+
															'<h4>Please wait...</h4>'+
														'</div>'
														);				
								
								var socketclienttype = 'USERSTATUS_CLIENT';
								alert('you are going to reset your password! are you sure.?')
								$.ajax({
									type: "POST",
									url: classesLocation , // call the php file ajax/
									data: {'socketclienttype':socketclienttype, 'new_pin_code':new_pin_code, 'token':token, 'user_id':user_id, 'action':action}, // send data var
									dataType: "json",
									success: function(response){
										if(response.match === true){
											$('.login-feedback').html('<div class="alert alert-success text-center">Great !!!</div>');																		
											$("#loading_image").remove();	
											$(".login-card-body").empty().append(
																	 '<div class="text-center mb-4">'+response.details+'</div>'+
																		'<div class="row">'+
																			'<div class="col-6"></div>'+
																			'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="exit_btn" name="exit_btn">Return Login</p></div>'+
																		'</div>'+
																	 '</div>'	
																);
												if (that.href === ""){
													that.href = default_href;
												}						
											
										}else{
											$('.login-feedback').html(show_alert('error', response.details, 1));											
											$("#loading_image").remove();// reinitialiser les proprietées du formulaire												
											if(response.error_code === "token_expired" || response.error_code === "token-bad"){
												$(".group_daticash_daticash_confirm_change_or_reset_pin_code").append(
														  '<div class="col-12">'+
															'<input type="hidden" name="action" class="action" value="daticash_confirm_change_or_reset_pin_code">'+
															'<button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_confirm_change_or_reset_pin_code_btn_try_again" name="daticash_confirm_change_or_reset_pin_code_btn_try_again">Try again</button>'+
														  '</div>'
														);
											}
										}
									},
									error: function() { 
										alert('Sorry ! error change password, refresh your browse and try again. If the problem persist contact the web master of site');
										$(validate_reset).prop('disabled', false);
										$("#loading_image").remove();// reinitialiser les proprietées du formulaire										
									}
								});									
							
							}
						}else{
							if(new_pin_code==""){
								$('#new_pin_code-feedback').html("<div class='text-danger'>Please enter a valid PIN Code below</div>");
							}
							if(retype_new_pin_code==""){
								$('#retype_new_pin_code-feedback').html("<div class='text-danger'>Please enter a valid PIN Code below</div>");
							}
							
							
							if(!pinLength('#new_pin_code-feedback', new_pin_code)){
								$('#new_pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
							}
							if(!pinLength('#retype_new_pin_code-feedback', retype_new_pin_code)){
								$('#retype_new_pin_code-feedback').html("<div class='text-danger'>PIN must be 6 characters</div>")
							}
														
						}						
					
					}
													

				})	
			.on('click', '#exit_btn' , function() {
				// request register
					$(".chat-popup").remove();
				/* 	$("#modal").remove();
					$("#connexion").remove();
					$("#register").remove();  
					$("#id_reset_password_popUp").remove(); 
					$("#request_transfer").remove();
					$("#confirmChangeRole").remove();
					$("#confirm_token_form_modal").remove();
					$("#modal-lg").remove();//alert_message_popUp										
					$("#daticash_topup_popUp").remove();
					$("#daticash_register_if_not_exist_popUp").remove();
					$("#reset_password_popUp").remove();
				    $("#daticash_connexion_popUp").remove();
					$("#daticash_request_reset_pin_code_popUp").remove();
					$("#daticash_inappropriate_mail_popUp").remove(); */
					console.log('that.href');
					
					
					if(that.sub_request.transaction !== undefined){					
							$(".chat-popup").remove();
						that.whatIsIt = "request_transfer";
								
							$('#body_mask').after(that.daticash_transfer_process_popUp);
							
						$('#daticash_display_transaction_status_topUp').remove();
						$('.login-logo').after(that.daticash_display_transaction_status_topUp);
						daticash_select_transaction_status_position(3);	
			
					}else{
						_goto(that.href);
					}
						
/* 					
// open the login
					$('#body_mask').after(that.daticash_connexion_popUp);
					$('.show_or_hide_pin_js').remove();			
					$('.new_pin_code-group').remove();			
					$('.retype_new_pin_code-group').remove();			

							configure_intlTelInput()
								$("#input_group_appendto_phone").remove()
								$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');

						$(".iti__selected-flag").trigger("click");
						$(".iti__country[data-dial-code='237']").trigger("click");
											
								//$("#username").prop('disabled', true);	
							$('#pin_code').keypad();
					 */
				})	
			.on('click', '#daticash_request_sms_code_btn', function(f){
				//alert(that.tampon_data.phone_number)
				$('#daticash_request_sms_code_btn').text('Processing...').prop('disabled', true);
			            that.by = "sms"
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {socketclienttype : that.socketclienttype, action : "daticash_request_sms_code", "user_id" : that.user_id}, // send data var
							dataType: "json",
							beforeSend:function(){
								
							},								
							success: function(response){
								//valeur possible: resend ok/bad, key= phone
                                    var left_time;
                                    var sender_phone = that.tampon_data.phone_number.replace(/\d{6}$/i, "******");
								    //alert(sender_phone)     
									clearInterval(that._rebordCount);
                                    
										$("#dati_check_whith_sms").html('<hr><label for="dati_code">A SMS has been sent to '+sender_phone+', please provide the token sent below...</label>'+
																										'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="daticash_sms_code_input" id="daticash_sms_code_input" style="font-size: 55px;text-align: center;" maxlength="6" placeholder="xxxxxx">'+
																										'<div class="col-12" style="flex-flow: row-reverse;">'+
																										    '<div class="js_resend_sms">'+
																										    '</div>'+
																										'</div>'
																							);
										$('#daticash_request_sms_code_btn').prop('disabled', true);
										$('#daticash_sms_code_input').focus();
										
								//valeur possible: resend ok/bad, key= phone
								if(response.match === true || response.match === undefined){
										left_time = 30;
										that.second = 60;
								}else{
									left_time = response.time_left;
									that.second = 60;												
								}
								
								that._rebordCount = setInterval(function() {
								    
										//requiert un numero de téléphone : créer la zone du numero de tel + boutn d'envoi
										$(".js_resend_sms").empty().append(
																		    '<p style="color: green;">SMS Successfully sent... </p>To try again please wait : '+left_time+'min :'+ that.second +'s</p>'								
																		       
																		);	
									that.second = that.second - 1;																		
								
									if(that.second === 0 && left_time === 0){
									$(".js_resend_sms").empty().append(
																		'<p style="color: #000; float: right;" class="mb-0"><span style="color: #000;">You hav\'n\'receive the SMS?&nbsp;</span>'+
																		'<a id ="resend_sms" name ="resend_sms" href="#">Resend now?&nbsp;&nbsp; |&nbsp;&nbsp;</a>'+
																		'<a id ="dati_cancel_sms_btn" name ="dati_cancel_sms_btn" href="#">Annuler</a></p>'
																	);	
												clearInterval(that._rebordCount);					
									
									}else{
										if(that.second === 0){
											that.second = 59;
											left_time = left_time - 1;
										}											
									}
								}, 1000);									
											
										
							
							},
							error: function() {alert("error: Resend SMS, please try again or check with your email, otherwise contact the Administrator")
								$('#daticash_request_sms_code_btn').text('Send me a sms to activate').prop('disabled', false);
							}
							

						});					
				

					f.stopImmediatePropagation();
				})
			.on('click', '#dati_cancel_sms_btn', function(f){
				var cnl = this;
						f.stopImmediatePropagation();
					$('#dati_check_whith_sms').empty().append(
																						'<div name="dati_check_whith_sms" id="dati_check_whith_sms" class="social-auth-links text-center mb-3">'+
																							'<div name="daticash_request_sms_code_btn" id="daticash_request_sms_code_btn" class=" btn-block btn-primary" style="display: inline-block; margin-top: .5rem; cursor: pointer">'+
																							'Send me a sms to activate'+
																							'</div>'+
																						'</div>'	
																					);
						clearTimeout(cnl._autoTimer);
					  clearTimeout(cnl._rebordCount);
					  clearTimeout(cnl._iTimer);
				})
			.on('keyup', '#daticash_sms_code_input', function(event){
				event.stopImmediatePropagation();
					$(".alert").empty()//supprimer le message d'erreur s'il existe
					
					var caveVal = jQuery("#daticash_sms_code_input").val();
					var caveWidth = caveVal.length;
					var value = jQuery(this).val();
					value = value.replace(/[^0-9]+/g, '');
					jQuery(this).val(value);

					if (caveWidth == 6){
        						$('#daticash_sms_code_input').before('<div class="login_image_js"><img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...</div>').remove(); // loader image apprears in the <div id="newComment"></div>			
						        $('#daticash_sms_code_input').remove();
						//$("#dati_cancel_sms_btn").trigger("click");
							
						//jQuery('daticash_sms_code_input').attr('disabled', true);
						
						//jQuery('#dati_check_process').html('<img src="'+ self.imgLocation +'/loader-status.gif" /> Processing...'); // loader image apprears in the <div id="newComment"></div>
						jQuery.ajax({
							type: "POST",
							url: self.classesLocation , // call the php file ajax/
							data: {socketclienttype : self.socketclienttype, action : "daticash_confirm_sms_token_code", "token" : caveVal, "user_id" : that.user_id}, // send data var
							dataType: "json",		
							success: function(response){
								if(response.match === false) {
									;

									$('.login-feedback').html(show_alert('error', response.details, 1));


								    $('.login-feedback').html(show_alert('error', response.details, 1));
									$('.login_image_js').remove();
									$('#dati_check_whith_sms hr').remove();
									$('#dati_check_whith_sms').prepend(
										'<hr>'+
										'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="daticash_sms_code_input" id="daticash_sms_code_input" maxlength="6" placeholder="xxxxxx">'
									);
								}else{
									
								}
							},
							error: function() { }
						});		
								
					}
				})
			.on('click', '.iti__country' , function(e) {
					let sender_country_code = "1";
					let recipient_country_code = "237";
					let default_country_code = "cm";
					
				var $this = $(this);
					let _currency_received_txt = false;  
							default_country_code = $($this).attr("data-country-code");
							var pid = $($this).attr("id")
							
					sender_country_code = $this.find(".iti__dial-code").text();
					sender_country_code = sender_country_code.substring(1, sender_country_code.length);
							
					recipient_country_code = $this.find(".iti__dial-code").text();
					recipient_country_code = recipient_country_code.substring(1, recipient_country_code.length);
					
					if(_currency_received_txt = !$this.parents('.form-group-sender_phone').length){
						$('#country_img').html("<img src='https://www.countryflags.io/"+default_country_code+"/flat/32.png'>");		
						$('#country_name').html($("#"+pid).children(".iti__country-name").text());
					}	
					if(_currency_received_txt = $this.parents('.form-daticash_phone').length){
						//alert(recipient_country_code)
						$('#country_code').val(recipient_country_code);
					}	
					if(_currency_received_txt = $this.parents('.form-group_topup_by_mobile_money_source').length){
						alert(recipient_country_code)
						$('#topup_by_mobile_money_source_country_code').val(recipient_country_code);
					}	
					
				//alert($this.parents('.form-daticash_phone').length)
				//alert(default_country_code)
				//alert(_currency_received_txt)
		
				})
			.on('change', '#pin_code' , function(e) {
				 pinLength("#pin_code-feedback", $('#pin_code').val());
		
				})
			.on('change', '#old_pin_code' , function(e) {
				 pinLength("#old_pin_code-feedback", $('#old_pin_code').val());
		
				})
			.on('change', '#new_pin_code' , function(e) {
				 pinLength("#new_pin_code-feedback", $('#new_pin_code').val());
		
				})
			.on('change', '#retype_new_pin_code' , function(e) {
				 pinLength("#retype_new_pin_code-feedback", $('#retype_new_pin_code').val());
		
				})
			.on('change', '#pin_code', function(e) {
				e.stopImmediatePropagation;
				 var pin_code_length = $("#pin_code").val(); //alert(pin_code_length.length)
					 if(pin_code_length.length === 6){
						$(".keypad-close").trigger("click");
					 }
				})
			.on('change', '#new_pin_code', function(e) {
				e.stopImmediatePropagation;
				 var pin_code_length = $("#new_pin_code").val(); //alert(pin_code_length.length)
					 if(pin_code_length.length === 6){
						$(".keypad-close").trigger("click");
					 }
				})
			.on('change', '#retype_new_pin_code' , function(e) {
				e.stopImmediatePropagation;
				 var pin_code_length = $("#retype_new_pin_code").val(); //alert(pin_code_length.length)
					 if(pin_code_length.length === 6){
						$(".keypad-close").trigger("click");
					 }
				})
			.on('click', '#btn_daticash_popUp' , function() {
				// request register
					$(".chat-popup").remove();
					
					$('#body_mask').after(that.daticash_topup_popUp);
					$("#daticash_topup_popUp").modal("show");
					
					autoChoose_country_code(sub_request.status_transaction_info.sender_country_code);

					if(that.sub_request.transaction !== undefined){
						$('#daticash_display_transaction_status_topUp').remove();
						$('.login-logo').after(that.daticash_display_transaction_status_topUp);
						daticash_select_transaction_status_position(2);	
					}
					
					//configure_intlTelInput_daticash_topup()
					//alert("data-dial-code='+"+sub_request.status_transaction_info.sender_country_code+"'")
					//$("#topup_by_mobile_money_source").val(sub_request.status_transaction_info.sender_phone);	
					
					$("#topup_by_mobilemoney_currency_txt").text(sub_request.status_transaction_info.currency_sent);	
					$("#topup_by_mobile_money_amount").val(sub_request.status_transaction_info.amount_to_topup);	

					//$("#topup_by_mobile_money_source").prop('disabled', true);					
				
					$('#payment-form').css('display', 'none')
					$('#paypalMethodFrom').css('display', 'none')
					$('#bankPaymentMethod').css('display', 'none')
					$('#paymentMethod').on('change', function() {
					  let paymentMethod = $('#paymentMethod').val()
					  if(paymentMethod == 'momo') {
						$('#mobileMethodForm').css('display', 'block')
						$('#payment-form').css('display', 'none')
						$('#paypalMethodFrom').css('display', 'none')
					  } else if(paymentMethod == 'cc') {
						$('#mobileMethodForm').css('display', 'none')
						$('#paypalMethodFrom').css('display', 'none')
						$('#payment-form').css('display', 'block')
					  } else if(paymentMethod == 'pp') {
						$('#mobileMethodForm').css('display', 'none')
						$('#paypalMethodFrom').css('display', 'block')
						$('#payment-form').css('display', 'none')
					  } else if(paymentMethod == 'bank'){
						  /*const local = $('#localisation').val()
						  if(local != 1){
							// Display a success notification
							notyf.error('Not available for your location area!');
						  }*/
						  $('#bankPaymentMethod').css('display', 'block')
						  $('#mobileMethodForm').css('display', 'none')
						  $('#paypalMethodFrom').css('display', 'none')
						  $('#payment-form').css('display', 'none')
					  }
					})
			
				})

		if(that.whatIsIt == "daticash_login"){
				// request login with daticash
					$(".chat-popup").remove();
					
						
			$('#body_mask').after(that.daticash_connexion_popUp);
			$('.show_or_hide_pin_js').remove();			
			$('.new_pin_code-group').remove();			
			$('.retype_new_pin_code-group').remove();
			
			autoChoose_country_code(237);
/* 					configure_intlTelInput()
						$("#input_group_appendto_phone").remove()
						$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');

				$(".iti__selected-flag").trigger("click");
				$(".iti__country[data-dial-code='237']").trigger("click"); */
									
						//$("#username").prop('disabled', true);	
					$('#pin_code').keypad();
					
			if(that.sub_request.transaction !== undefined){	
				$('#daticash_display_transaction_status_topUp').remove();
				$('.login-logo').after(that.daticash_display_transaction_status_topUp);
				daticash_select_transaction_status_position(1);	
			}					
		}
		
		if(that.whatIsIt == "register" || that.whatIsIt == "registering_business_account" || that.whatIsIt == "registering_developper_account" || that.whatIsIt == "registering_individual_account"){
				// request login with daticash
					$(".chat-popup").remove();
						
			$('#body_mask').after(that.daticash_connexion_popUp);
			$('.reset_js').remove();
			$('.login_pin_code-group').remove();
			
			$('#pin_code').attr('placeholder', 'Choose PIN Code');
			autoChoose_country_code(237);
			
/* 					configure_intlTelInput()
						$("#input_group_appendto_phone").remove()
						$('#username').after('<div class="input-group-append"><div class="input-group-text" style="border-bottom-left-radius: 0;border-top-left-radius: 0;"><span class="fas fa-phone"></span></div></div>');

				$(".iti__selected-flag").trigger("click");
				$(".iti__country[data-dial-code='237']").trigger("click"); */
									
						//$("#username").prop('disabled', true);	
					//$('#pin_code').keypad();
					$('#new_pin_code').keypad();					
					$('#retype_new_pin_code').keypad();					
					$('.form-group_daticash_login_btn').empty().append('<input type="hidden" name="action" class="action" value="daticash_register"><button type="submit" class="daticash_btn btn-daticash btn-block" id="daticash_request_register_btn" name="daticash_request_register_btn">Register</button>');					
		
			if(that.sub_request.transaction !== undefined){
			 	if(message_alert !== ""){
					$('.container').append(that.alert_message_popUp);
					message_alert = "";
				}
				
				$("#username").val(sub_request.transaction.sender_phone);	

				$(".iti__selected-flag").trigger("click");
				$(".iti__country[data-dial-code='"+sub_request.transaction.sender_country_code+"']").trigger("click");
			
			    $("#username").prop('disabled', true);
				
				$('#daticash_display_transaction_status_topUp').remove();			
				$('.login-logo').after(that.daticash_display_transaction_status_topUp);
				daticash_select_transaction_status_position(1);	
			
			}		
		
		}	
		
		if(that.whatIsIt == "inappropriate-mail"){
				// request register
					$(".chat-popup").remove();
						
					$('#body_mask').after(that.daticash_inappropriate_mail_popUp);
						
					
		}		
				
		if(that.whatIsIt == "email-verified"){
				// request register
					$(".chat-popup").remove();
						
					$('#body_mask').after(that.daticash_email_verified_popUp);
			$('.login-feedback').append('<div class="alert alert-success text-center">Great !!!</div>');		
		}		
		
		if(that.whatIsIt == "change-password" || that.whatIsIt == "reset-password" ){//daticash change pin
				// request register
					$(".chat-popup").remove();
					
					$('#body_mask').after(that.daticash_confirm_change_or_reset_password_popUp);
					$('#old_pin_code').keypad();	
					$('#new_pin_code').keypad();	
					$('#retype_new_pin_code').keypad();
					
			if(that.whatIsIt == "reset-password"){
				$('.old_pin_code-group').remove();
				$('#daticash_confirm_change_or_reset_pin_code_btn').text('Reset PIN');
			}
					
		}		
/* 				
		if(that.whatIsIt == "register"){
				// request register
					$(".chat-popup").remove();
					
					$('#body_mask').after(that.daticash_connexion_popUp);	

					$('#pin_code').keypad();

			if(that.sub_request.transaction !== undefined){
			 	if(message_alert !== ""){
					$('.container').append(that.alert_message_popUp);
					message_alert = "";
				}
				 
				$('#dati_login_modal').css("display","none")
				configure_intlTelInput()
				
				$("#username").val(sub_request.transaction.sender_phone);	

				$(".iti__selected-flag").trigger("click");
				$(".iti__country[data-dial-code='"+sub_request.transaction.sender_country_code+"']").trigger("click");
			
			    $("#username").prop('disabled', true);
			}
					
		}	 
*/	
		
		if(that.whatIsIt == "service_not_available"){
				// request confirmation
					$(".chat-popup").remove();
					
 				Swal.fire({
				  title: 'Service not available',
				  text: 'Our exchanges with the operator of the recipient account cannot be completed at this time. please try again later ...',
				  icon: 'error',
				  inputPlaceholder: "default",
				  showCancelButton: true,				  
				  showConfirmButton: false,				  
				  cancelButtonText:'OK',
				  cancelButtonColor: '#3085d6'
				})	

		}		
		
		if(that.whatIsIt == "account_ref"){//sorte de request transfert
				// request confirmation
					$(".chat-popup").remove();
					
					
					
					//$('#body_mask').after(that.request_transfer_popUp);	
		
                    $('<div />').prependTo('body').prop('id', 'body_mask').addClass("body_mask");		

		Swal.fire({
		  title: 'Activity Choice',
		  html:
			'We have noticed that several sub-accounts are linked to your account. Please specify which one will be used for the transaction ...' +
			'<br>(leave the field blank to use your default account)',
		  input: 'text',
		  input: 'text',
		  icon: 'info',
		  inputPlaceholder: "default",
		  showCancelButton: false,				  
		  showLoaderOnConfirm: true,
		  focusConfirm: false,
		  confirmButtonText:'<i class="fa fa-thumbs-up"></i> Confirm',
		  confirmButtonAriaLabel: 'Thumbs up, great!',
		  cancelButtonText:'<i class="fa fa-thumbs-down"></i>',
		  cancelButtonAriaLabel: 'Thumbs down',	
		  inputAttributes: {
			autocapitalize: 'off'
		  },
		  preConfirm: (account_ref) => {
			  post_sub_request.account_ref = account_ref;
			  post_sub_request = JSON.stringify(post_sub_request);
			  
/* 				fetch('https://api.daticloud.com/api/anon/job?recipient_country_code=237&reason&recipient_phone=691750821&sender_country_code=237&sender_phone=691750821&currency_received=XAF&currency_sent=XAF&amount_received=150000&amount_sent=150000&fees=0.0&total_pay=150000&type=withdraw&mode=mobilemoney&account_ref='+ account_ref, {mode: 'no-cors', method:"POST"})
				  .then(response => {
					if (!response.ok) {
					  throw new Error(response.statusText)
					}
					alert(response.statusText)
					return response.json()
				  })
				  .catch(error => {
					Swal.showValidationMessage(
					  `Request failed: ${error}`
					)
				  }) */
				  
/* 				fetch('https://api.daticloud.com/api/anon/job?recipient_country_code=237&reason&recipient_phone=691750821&sender_country_code=237&sender_phone=691750821&currency_received=XAF&currency_sent=XAF&amount_received=150000&amount_sent=150000&fees=0.0&total_pay=150000&type=withdraw&mode=mobilemoney&account_ref='+ account_ref, {mode: 'no-cors', method:"POST"})
				  .then(
					function(response) {
					  if (response.status !== 200) {
						console.log('Looks like there was a problem. Status Code: ' +
						  response.status);
						  
						console.log('Content-Type: ' + response.headers.get('Content-Type'));
						console.log('Date: ' +response.headers.get('Date'));

						console.log('status: ' +response.status);
						console.log('statusText: ' +response.statusText);
						console.log('type: ' +response.type);
						console.log('url: ' +response.url);	
	
						return;
					  }

					  // Examine the text in the response
					  response.json().then(function(data) {
						console.log(data);
					  });
				  
					}

				  )
				  .catch(function(err) {
					console.log('Fetch Error :-S', err);
				  });
 */



					function status(response) {
					  if (response.status >= 200 && response.status < 300) {
//	/////////////////////////////////////////////////////////////////					  
console.log('Content-Type: ' + response.headers.get('Content-Type'));
console.log('Date: ' +response.headers.get('Date'));

console.log('status: ' +response.status);
console.log('statusText: ' +response.statusText);
console.log('type: ' +response.type);
console.log('url: ' +response.url);							  
//	/////////////////////////////////////////////////////////////////					  						  
						return Promise.resolve(response)
					  } else {
//	/////////////////////////////////////////////////////////////////					  
console.log('Content-Type: ' + response.headers.get('Content-Type'));
console.log('Date: ' +response.headers.get('Date'));

console.log('status: ' +response.status);
console.log('statusText: ' +response.statusText);
console.log('type: ' +response.type);
console.log('url: ' +response.url);							  
//	/////////////////////////////////////////////////////////////////							  
						  
						return Promise.reject(new Error(response.statusText))
					  }
					}

					function json(response) {
					  return response.json()
					}

			  var parameters = {
					method: 'post',
					headers: {
					  "Content-type": "application/x-www-form-urlencoded; charset=UTF-8"
					},
					body: 'recipient_country_code=237&reason&recipient_phone=691750821&sender_country_code=237&sender_phone=691750821&currency_received=XAF&currency_sent=XAF&amount_received=150000&amount_sent=150000&fees=0.0&total_pay=150000&type=withdraw&mode=mobilemoney&account_ref='+ account_ref,
					mode: 'no-cors',
					credentials: 'include'
				};
						
 				fetch('https://api.daticloud.com/api/anon/job', parameters)
					  .then(status)
					  .then(json)
					  .then(function(data) {
						console.log('Request succeeded with JSON response', data);
					  }).catch(function(error) {
						console.log('Request failed', error);
					  });

  
		  },
		  allowOutsideClick: () => !Swal.isLoading()
		}).then((result) => {
		  console.log('Request success: ', result);
		  if (result.value) {
			Swal.fire({
			  title: `${result.value.login}'s avatar`,
			  imageUrl: result.value.avatar_url
			})
		  }
		})


/* 
process_transaction();
	function process_transaction(){

		Swal.fire({
		  title: 'Activity Choice',
		  html:
			'We have noticed that several sub-accounts are linked to your account. Please specify which one will be used for the transaction ...' +
			'<br>(leave the field blank to use your default account)',
		  input: 'text',
		  icon: 'info',
		  inputPlaceholder: "default",
		  showCancelButton: false,				  
		  showLoaderOnConfirm: true,
		  focusConfirm: false,
		  confirmButtonText:'<i class="fa fa-thumbs-up"></i> Confirm',
		  confirmButtonAriaLabel: 'Thumbs up, great!',
		  cancelButtonText:'<i class="fa fa-thumbs-down"></i>',
		  cancelButtonAriaLabel: 'Thumbs down',
		  allowOutsideClick: () => Swal.isLoading()
		})
		.then((result) => {
			alert(result.value)
			  if(result !== ""){
				 post_sub_request.account_ref = result.value; 
			  }
			  
		   jQuery.ajax({
				type: "POST",
				url: classesLocation , // call the php file ajax/
				data: {"action" : "init_transaction", "sub_request" : post_sub_request}, // send data var
				dataType: "json",							
				success: function(databack){
					if(databack === undefined){
						throw new Error(databack.details)
					}
					if(databack.match === true){
						Swal.fire({
						  title: 'Confirm Transaction!',
						  text: "you are about to make a deposit of 5000XAF to xxxxxxxxxxx (67777777). Please provide your password to proceed",
						  input: 'password',
							//closeOnConfirm: true,
							inputPlaceholder: "your password",				  
						  inputAttributes: {
							autocapitalize: 'off'
						  },
						  showCancelButton: false,				  
						  showLoaderOnConfirm: true,
						  focusConfirm: false,
						  confirmButtonText:'<i class="fa fa-thumbs-up"></i> Confirm',
						  confirmButtonAriaLabel: 'Thumbs up, great!',
						  cancelButtonText:'<i class="fa fa-thumbs-down"></i>',
						  cancelButtonAriaLabel: 'Thumbs down',				  
						  preConfirm: (daticash_code, transaction_id, user_token) => {
							  alert('post')
							   jQuery.ajax({
									type: "POST",
									url: classesLocation + 'action2.php', // call the php file ajax/
									data: {"action" : "check_status_transaction", "user_token" : user_token, "transaction_id" : transaction_id, "daticash_code" : daticash_code}, // send data var
									dataType: "json",							
									success: function(databack){
										alert('ok')
									},
									error: function(){
										alert('bad')
									}
								})
	 
						  },
						  allowOutsideClick: () => Swal.isLoading()
						})
						.then((result) => {
							console.log('Request success: ', result); 
							alert(result.value.login)
							  if (result.value) {
								  alert('pretest')
								const ipAPI = '//api.ipify.org?format=json';
								let timerInterval						
								Swal.fire({
								  title: 'Traitement en cour',
								  html: 'I will close in <b>Mise à jour de l\'historique de la transaction.</b> milliseconds.',
								  icon: 'info',
								  timer: 30000,
								  timerProgressBar: true,
								  onBeforeOpen: () => {
									Swal.showLoading()
									timerInterval = setInterval(() => {
									  const content = Swal.getContent()
									  if (content) {
										const b = content.querySelector('b')
										if (b) {
												return fetch(`//api.github.com/users/bouba`)
												  .then(response => {
													if (!response.ok) {
													  throw new Error(response.statusText)
													}		 
													var result = response.json()
													
													result.then(function(result) {
														if(undefined !== result.login){
															Swal.fire(
															  'Complete!',
															  'Your transaction ended with success! Thank you for your confidence<br>Transaction ID: 21SEAZ58ZS58HD',
															  'success'
															)												
														}else{
															Swal.fire(
															  'ERROR!',
															  'Your transaction failed! Thank you for your confidence',
															  'error'
															)													
														}
													  console.log('promise returned: ' + result.login);
													})
												  })
												  .catch(error => {
													Swal.showValidationMessage(
													  `Request failed: ${error}`
													)
												  })	
												   
											  b.textContent = Swal.getTimerLeft()
										
										}
		
									  }
									}, 1000)							  
								  },						  
								  showLoaderOnConfirm: true,
								  preConfirm: (login) => {
									return fetch(`//api.github.com/users/${login}`)
									  .then(response => {
										if (!response.ok) {
										  throw new Error(response.statusText)
										}
										return response.json()
									  })
									  .catch(error => {
										Swal.showValidationMessage(
										  `Request failed: ${error}`
										)
									  })
								  },						  
								  onClose: () => {
									clearInterval(timerInterval)
									Swal.fire(
									  'Deleted!',
									  'Your file has been deleted.',
									  'error'
									)							
								  }						  
								}).then((result) => {
								  // Read more about handling dismissals below 
								  if (result.dismiss === Swal.DismissReason.timer) {
									console.log('I was closed by the timer')
								  }
								})	
		
							}
						})
						
					}
					else{
						
						Swal.fire({
						  title: 'Traitement en cour',
						  html: 'Verification of Account ...',
						  icon: 'info',
						  timerProgressBar: true,
						  onBeforeOpen: () => {
						  Swal.showLoading()
						  
						  },						  
						  showLoaderOnConfirm: true,					  
						})	
										
						Swal.showValidationMessage(
						  `Request failed: Try again ...`
						)	
					}
				
				},
				error: function(){
					
					Swal.showValidationMessage(
					  `Request failed: Try again ...`
					)
					alert('bad')
				}
			})					
			
	
		})

	}

 */

		}
		
		if(that.whatIsIt == "request_transfer"){
				// request confirmation
					$(".chat-popup").remove();
					
					$('#body_mask').after(that.request_transfer_popUp);	
		}		
		
		if(that.whatIsIt == "changeRole"){
				// request confirmation
					$(".chat-popup").remove();
					
					var role = "devRole"
					
					$('#body_mask').after(that.confirmChangeRole_popUp);

						jQuery.ajax({
							type: "POST",
							url: self.classesLocation , // call the php file ajax/
							data: {socketclienttype : that.socketclienttype, action : "change_role", role : role}, // send data var
							dataType: "json",
							success: function(response){
								
									if(response.match === true){

										$('#dati_check_process').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right text-success" style="display: inline;color: #777777;font-weight: 100;">Change Role Complete successfully! &nbsp<i class="fa fa-check" aria-hidden="true"></i> <br>Redirection ...</p></div>'+
											'<div class="col-12" style="color: #007bff;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="allow_reset_password" name="allow_reset_password"></p> </div>'					
										);
										
										that._autoTimer = setTimeout(function() {
								
														clearTimeout(that._autoTimer);					
											window.history.back();
										}, 1000);

									} else {	
										$('#dati_check_process').empty().html('<div class="col-12 mb-3" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right text-danger" style="display: inline;font-weight: 100;">Error: change Role abord! <b>×</b><br> Redirection ...</p></div>'+
											'<div class="col-12" style="color: #007bff;"><p class="" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="allow_reset_password" name="allow_reset_password"></p> </div>'							
										);
										
										that._autoTimer = setTimeout(function() {
								
														clearTimeout(that._autoTimer);					
											window.history.back();
										}, 1000);
										
									}							
															
											
							},
							
							error: function() { alert("error: Change Role, please contact the Administrator or try again!") }
						});					
		}
		
		if(that.whatIsIt == "topup"){
				// request confirmation
					$(".chat-popup").remove();
					
			if(that.sub_request.status_transaction_info !== undefined){	
				$('#daticash_display_transaction_status_topUp').remove();
				$('.login-logo').after(that.daticash_display_transaction_status_topUp);
				daticash_select_transaction_status_position(2);	

				jQuery.ajax({
					type: "POST",
					url: self.classesLocation , // call the php file ajax/
					data: {client_ip : that.sub_request.status_transaction_info.client_ip, action : "check_ip"}, // send data var
					dataType: "json",
					success: function(response){console.log(response);								
						if(response.match === true){
							if(response.details.continent_code === "AF"){
								var message_alert = ('Oops Insufficient balance! You must recharge at least '+ that.sub_request.status_transaction_info.amount_to_topup +' '+ that.sub_request.status_transaction_info.currency_sent + ' to continue the transaction.</br>'); //get value								
								var btn_dismit = '<button type="button" class="daticash_btn btn-default" data-dismiss="modal" id="btn_close_modal">Cancel</button>';
								var btn_submit = '<button type="button" class="daticash_btn btn-daticash" id="btn_daticash_popUp">Top Up</button>';
								
								$('#body_mask').after(that.info_status_popUp("IMPORTANT MESSAGE", message_alert, btn_submit, btn_dismit));
																		
							}
						} else {
			                    that.user_id = that.sub_request.status_transaction_info.sender_id ;
			                    that.verify = "1" ;

								var icon_activated = '<i class="fa fa-check text-success pull-left" style = "margin-right: 12px" aria-hidden="true"></i>';
								var icon_not_activated = '<i class="fa fa-times text-danger pull-left" aria-hidden="true"></i>';
								var btn_active_email = '<button type="button" class="btn btn-primary" id="btn_activeEmail">Verify now</button>';
								var btn_active_phone = '<button type="button" class="btn btn-primary" id="dati_sms_btn">Verify now</button>';
								var message = 'Our DatiCash sales department will contact you very soon. To reduce the waiting time, your contacts should be verified.'
								var isEmailActivated = parseInt(that.sub_request.status_transaction_info.sender_email_activated);
								var isPhoneActivated = parseInt(that.sub_request.status_transaction_info.sender_phone_activated);
								var btn_dismit = '<button type="button" class="btn btn-default" data-dismiss="modal" id="btn_close_modal">Return</button>';
								var btn_submit = '';
	/* 							 	
								alert(self.sub_request.status_transaction_info.sender_email_activated);
								alert(self.sub_request.status_transaction_info.sender_phone_activated);
								
								(isEmailActivated ? alert("email activated") : alert(" email no activated "));
								(isPhoneActivated ? alert("phone activated") : alert(" phone no activated ")) */

								var message_alert = (
								                     '<br>'+
													message +
													'<hr>'+
													'<div class="row text-right" id="div_emailActivate"  name="div_emailActivate">'+
													    '<div class="col-6" id="label_email_status" name="label_email_status">'+
													        'EMAIL '+(isEmailActivated ? " ALREADY " : " UN")+'VERIFIED&nbsp;'+
													        (isEmailActivated ? icon_activated : icon_not_activated)+
													   '</div>'+
													   '<div class="col-6" id="action_and_info_email_status" name="action_and_info_email_status" style="max-width: max-content;">'+  
												        	(isPhoneActivated ? '' : btn_active_email) + 
												        '</div>'+
												    '</div>'+
													'<br>'+
													'<div class="row text-right" id="div_phoneActivate" name="div_emailActivate">'+
													    '<div class="col-6" id="label_phone_status" name="label_phone_status">'+
													        'PHONE '+(isPhoneActivated ? " ALREADY " : " UN")+'VERIFIED&nbsp;'+
													        (isEmailActivated ? icon_activated : icon_not_activated)+
													    '</div>'+
													    '<div class="col-6" id="action_and_info_phone_status" name="action_and_info_phone_status" style="max-width: max-content;">'+
    													    (isPhoneActivated ? '' : btn_active_phone) + 
    													 '</div>'+
    													'<div class="row text-center" style="max-width: max-content;">'+
    													 '<div class="col-12" id="dati_check_whith_sms" >'+
    													 '</div>'+
    													'</div>'+
    												   '<p class="alert text-danger text-center"></p>'+	 
												    '</div>'									
													); //get value								
									
									$('#body_mask').after(that.info_status_popUp("IMPORTANT MESSAGE", message_alert, btn_dismit, btn_submit));
													
						}
											
					},
					
					error: function() { alert("error: 500, please contact the Administrator.") }
				});
			}						
			//http://api.ipstack.com/154.72.167.74?access_key=113b78668a764f6b345902b6d1423caf				
					
		}		
						
/* swal({
		title: "Confirm Transaction!",
		text: "Vous etes sur le point d'effectuer une transaction de 5000XAF vers le 65824584(USERNAME Exemple). entrer votre mot de pass pour confirmaer la transaction:",
		type: "input",
		showCancelButton: true,
		closeOnConfirm: false,
		showLoaderOnConfirm: true,
		animation: "slide-from-top",
		inputPlaceholder: "your password"
	}, function (inputValue) {
		if (inputValue === false) return false;
		if (inputValue === "") {
			swal.showInputError("You need to write something!"); return false
		}
		swal({
				title: "Ajax request example",
				text: "Submit to run ajax request",
				type: "info",
				showCancelButton: true,
				closeOnConfirm: false,
				showLoaderOnConfirm: true,
			}, function () {
				check_status_transaction();
				//setTimeout(function () {
					//swal("Ajax request finished!");
				//}, 2000);
			});
			 */
																				
/* 				Swal.fire({
				  title: 'Confirm Transaction!',
				  text: "Vous etes sur le point d'effectuer une transaction de 5000XAF vers le 65824584(USERNAME Exemple). entrer votre mot de pass pour confirmaer la transaction:",
				  input: 'password',
					//closeOnConfirm: true,
					animation: "slide-from-top",
					inputPlaceholder: "your password",				  
				  inputAttributes: {
					autocapitalize: 'off'
				  },
				  showCancelButton: false,				  
				  showLoaderOnConfirm: true,
				  focusConfirm: false,
				  confirmButtonText:'<i class="fa fa-thumbs-up"></i> Confirm',
				  confirmButtonAriaLabel: 'Thumbs up, great!',
				  cancelButtonText:'<i class="fa fa-thumbs-down"></i>',
				  cancelButtonAriaLabel: 'Thumbs down',				  
				  preConfirm: (login) => {
					return fetch(`//api.github.com/users/${login}`)
					  .then(response => {
						if (!response.ok) {
						  throw new Error(response.statusText)
						}
						return response.json()
					  })
					  .catch(error => {
						Swal.showValidationMessage(
						  `Request failed: ${error}`
						)
					  })
				  },
				  allowOutsideClick: () => !Swal.isLoading()
				}).then((result) => {
				  if (result.value) {
					Swal.fire({
					  title: "Traitement en cour ...",
					  text: "Mise à jour de l'historique de la transaction.",
					  icon: 'info',
					  showConfirmButton: false,
					  preConfirm: (login) => {
						return fetch(`//api.github.com/users/${login}`)
						  .then(response => {
							if (!response.ok) {
							  throw new Error(response.statusText)
							}
							return response.json()
						  })
						  .catch(error => {
							Swal.showValidationMessage(
							  `Request failed: ${error}`
							)
						  })
					  },					  
					}).then((result) => {
					  if (result.value) {
						Swal.fire(
						  'Deleted!',
						  'Your file has been deleted.',
						  'success'
						)
					  }
				  })
				}})


 */				
						

				
/*  
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {"action" : "test"}, // send data var
							dataType: "json",					
							success: function(response){					
								
							},
							error: function() {alert("error: recharge by mobilemoney, try again or contact the Administrator if this persit")}
								
						});
*/						
		fetch("https://api.daticash.com/api/mobilemoneys?order=asc&start_at=2020-01-01%2000%3A00%3A00&end_at=2021-01-01%2000%3A00%3A00&page=1&limit=10", {
		  "headers": {
			"apikey": "sec_5ed93806dd2ca",
		  },
		  "body": null,
		  "method": "GET",
		  "mode": "cors",
		 // "credentials": "include"
		})
		.then(response => response.text())
		.then(contents => console.log(contents))
		.catch(() => console.log("Can’t access " + url + " response. Blocked by browser?"))	


/* 	
	}	  
						jQuery.ajax({
							type: "POST",
							url: classesLocation , // call the php file ajax/
							data: {"action" : "test2"}, // send data var
							dataType: "json",					
							success: function(response){					
								
							},
							error: function() {alert("error: recharge by mobilemoney, try again or contact the Administrator if this persit")}
								
						});
						
 
(function() {
    var cors_api_host = 'cors-anywhere.herokuapp.com';
    var cors_api_url = 'https://' + cors_api_host + '/';
    var slice = [].slice;
    var origin = window.location.protocol + '//' + window.location.host;
    var open = XMLHttpRequest.prototype.open;
    XMLHttpRequest.prototype.open = function() {
        var args = slice.call(arguments);
        var targetOrigin = /^https?:\/\/([^\/]+)/i.exec(args[1]);
        if (targetOrigin && targetOrigin[0].toLowerCase() !== origin &&
            targetOrigin[1] !== cors_api_host) {
            args[1] = cors_api_url + args[1];
        }
        return open.apply(this, args);
    };
})();

 */
	
	}	

}

</script>