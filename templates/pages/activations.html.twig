
{% extends "base.html.twig" %}

{% block stylesheets %}
            <!-- Font Awesome -->
            <link rel="stylesheet" href="{{ asset('adminLTE/plugins/fontawesome-free/css/all.min.css') }}">
            <!-- Ionicons -->
            <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
            <!-- Theme style -->
            <link rel="stylesheet" href="{{ asset('adminLTE/dist/css/adminlte.min.css') }}">
            <!-- Google Font: Source Sans Pro -->
            <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">		
            <!-- Datiuser style-->
	        <link href="{{ asset('assets/css/confirm-user-popup.css') }}" rel="stylesheet">
            <!-- Numeric Keypad -->
            <link href="{{ asset('assets/css/jquery.keypad.css') }}" rel="stylesheet">
            <!-- International Telephone Input -->
            <link href="{{ asset('assets/css/intlTelInput/intlTelInput.css') }}" rel="stylesheet">
{% endblock %}

{% block head_javascripts %}
            <!-- Sweet alert scripts-->
            <script src="{{ asset('assets/js/sweetalert2/sweetalert2.all.min.js') }}"></script>	
            <script src="{{ asset('assets/js/sweetalert2/sweetalert2.min.js') }}"></script>
{% endblock %}

{% block body %}
<div id="body_mask" class="body_mask"></div>    

{% endblock %}

{% block javascripts %}
            <!-- Bootstrap 4 -->
            <script src="{{ asset('adminLTE/plugins/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
            <!-- Waves Effect Plugin Js -->
            <script src="{{ asset('adminLTE/plugins/node-waves/waves.js') }}"></script>
            <!-- AdminLTE App -->
            <script src="{{ asset('adminLTE/dist/js/adminlte.js') }}"></script>
            <!-- AdminLTE for demo purposes -->
            <script src="{{ asset('adminLTE/dist/js/demo.js') }}"></script> 
            <!-- numeric keypad jQuery-->
            <script src="{{ asset('assets/js/jquery.plugin.min.js') }}"></script>
            <!-- numeric keypad script-->
            <script src="{{ asset('assets/js/jquery.keypad.js') }}"></script>
            <!-- International Telephone Input-->	
            <script src="{{ asset('assets/js/intlTelInput/intlTelInput.js') }}"></script>
<script type="text/javascript"><!--
        $('body').css('overflow', 'hidden')
/* dÃ©clarations des fonctions et des variables */
{#{% set user_email = "exemple@email" %}#}
{#{% set user_id = "63" %}#}

    var left_time = 30
    var second = 60;
    var _rebordCount;
    var user_email = "{{ user_email }}";
    var user_id = "{{ user_id }}";
    
    function daticash_confirm_token_form_popUp(email){
    	return	(
    			'<div class="chat-popup" id="daticash_confirm_token_form_popUp">'+
    				'<div id="ib-center" class="dati_popup">'+
    					'<div class="container">'+
    						'<div class="row d-flex justify-content-center">'+
    							'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
    								'<div class="login-logo">'+
    									'<a href="http://daticash.com/" target="_blank" style="color: #fff;">'+
    										'<img src="{{ absolute_url(asset("assets/img/Daticash5.png")) }}" style="width:100%;"/>'+
    									'</a>'+
    								'</div>'+									
    								'<div class="login-feedback">'+
    								
                                        '{% for flashError in app.flashes('error') %}'+ 
                                            '<div class="alert alert-danger alert-dismissible" role="alert">'+
                                                '<i class="fa fa-exclamation-circle"></i>&nbsp{{ flashError }}'+
                                                '<button type="button" class="close" data-dismiss="alert">&times;</button>'+
                                            '</div>'+   
                                        '{% endfor %}'+
                                        '{% for message in app.flashes('notice') %}'+
                                            '<div class="alert alert-warning alert-dismissible  flash-notice">'+
                                                '<i class="fa fa-exclamation-circle"></i>&nbsp{{ message }}"</a>'+
                                                '<button type="button" class="close" data-dismiss="alert">&times;</button>'+
                                            '</div>'+
                                        '{% endfor %}'+
                                    
                                        '{% for label, messages in app.flashes(['success']) %}'+
                                            '{% for message in messages %}'+                            
                                                '<div class="alert alert-success alert-dismissible">'+
                                                    '<i class="fa fa-exclamation-circle"></i>&nbsp{{ message }}'+
                                                    '<button type="button" class="close" data-dismiss="alert">&times;</button>'+
                                                '</div>'+
                                            '{% endfor %}'+
                                        '{% endfor %}'+ 

    								'</div>'+
    									'<div class="card body_card_daticash_login">'+
    										'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  										
    											'<div class="" id="conversation" style ="overflow-y: auto; background-color: #66666621;">'+
    												'<div class="lf-loading">'+
    													'<div class="spinner" id="loading_image" style="display: blok;">'+
    														'<div class="bounce1"></div>'+
    														'<div class="bounce2"></div>'+
    														'<div class="bounce3"></div>'+
    													'</div>'+
    												'</div>'+
    											'</div>'+
    											'<p class="text-center mb-3" style="color: #204050;">'+
    												'A message has been sent to '+  email +'.Please follow the link it contains to activate your account.'+                      
    											'</p>'+
                                                '<div class="col-12 mb-3 dati_resendme_mail_row" style="text-align: right;font-weight: 700;color: #007bff;color: #007bff;" ><p class="text-right" style="display: inline;color: #777777;font-weight: 100;">have not receive mail ?</p><p style="cursor:pointer;display: inline;" id="dati_resend_me_mail" name="dati_resend_me_mail"> Resend me mail!</p></div>'+
    											
    											'<p style="text-align: center;color: #000;" class="mb-0">No access to email now ?</p>'+
    												'<div name="dati_check_whith_sms" id="dati_check_whith_sms" class="social-auth-links text-center mb-3">'+
    													'<input type="hidden" name="action" class="action" value="daticash_request_sms_code">'+
    													'<div name="daticash_request_sms_code_btn" id="daticash_request_sms_code_btn" class="daticash_btn btn-daticash btn-block" style="display: inline-block; margin-top: .5rem; cursor: pointer">'+
    													'Send me a sms to activate'+
    													'</div>'+
    												'</div>'+
    											'<hr>'+													
    										'</div>'+
    									'</div>'+
    								'</div>'+
    							'</div>'+
    						'</div>'+
    					'</div>'+						
    				'</div>'+
    			'</div>'
    			);						  
    } 
    
    function daticash_email_verified_popUp(){
    		return	(		
    		        '<div class="chat-popup" id="daticash_email_verified_popUp">'+
    					'<div id="ib-center" class="dati_popup">'+
    						'<div class="dati_user_status_login"></div>'+
    						'<div class="container">'+
    							'<div class="row d-flex justify-content-center">'+
    								'<div class="login-box" style="min-width: 285px; position: absolute;left: 5%;top: 5%;">'+
    									'<div class="login-logo">'+
    										'<a href="http://daticash.com/" style="color: #fff;">'+
    											'<img src="{{ absolute_url(asset("assets/img/Daticash5.png")) }}" style="width:100%;"/>'+
    										'</a>'+
    									'</div>'+
    								  '<div class="login-feedback">'+
    								
                                        '{% for flashError in app.flashes('error') %}'+ 
                                            '<div class="alert alert-danger alert-dismissible" role="alert">'+
                                                '<i class="fa fa-exclamation-circle"></i>&nbsp{{ flashError }}'+
                                                '<button type="button" class="close" data-dismiss="alert">&times;</button>'+
                                            '</div>'+   
                                        '{% endfor %}'+
                                        '{% for message in app.flashes('notice') %}'+
                                            '<div class="alert alert-warning alert-dismissible  flash-notice">'+
                                                '<i class="fa fa-exclamation-circle"></i>&nbsp{{ message }}"</a>'+
                                                '<button type="button" class="close" data-dismiss="alert">&times;</button>'+
                                            '</div>'+
                                        '{% endfor %}'+
                                    
                                        '{% for label, messages in app.flashes(['success']) %}'+
                                            '{% for message in messages %}'+                            
                                                '<div class="alert alert-success alert-dismissible">'+
                                                    '<i class="fa fa-exclamation-circle"></i>&nbsp{{ message }}'+
                                                    '<button type="button" class="close" data-dismiss="alert">&times;</button>'+
                                                '</div>'+
                                            '{% endfor %}'+
                                        '{% endfor %}'+ 
  
    								  '</div>'+									
    								  '<div class="card body_card_daticash_login">'+
    									'<div class="card-body login-card-body" style="background-color: rgba(255, 255, 255, 0);">'+								  
    									 
    									 '<div class="text-center mb-4">Your account is activated and your email has been successfully verified.</div>'+
    										'<div class="row">'+
    											'<div class="col-6"></div>'+
    											'<div class="col-6" style="text-align: center;float: right;color: #8285889c;border-radius: 120px;border: solid 1px #9a98a24f;"><p class="text-right" style="display: inline;color: #777777;font-weight: 100;"></p><p style="cursor:pointer;display:inline;" id="exit_btn" name="exit_btn">Continue</p></div>'+
    										'</div>'+
    									 '</div>'+
    
    									'</div>'+
    								  '</div>'+
    								'</div>'+
    							'</div>'+
    						'</div>'+
    					'</div>'+
    				'</div>'
    				);
    }

    function show_alert(type = "error", message, dismissible = 1){
    	switch(type.toLowerCase()) {
        		case "error":
    				if (dismissible === 1){
    					return ('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
    				}else{
    					return ('<div class="alert alert-danger"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
    				}				
    				break;
    
    			case "success":
    				if (dismissible === 1){
    					return ('<div class="alert alert-success alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
    				}else{
    					return ('<div class="alert alert-success"><i class="fa fa-exclamation-circle"></i>&nbsp'+ message +'<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
    				}
    				break;
    
    			default :
    				return ('');
    		}
    }

 	function alert_message_popUp (message){
 	                return (
						  '<div class="chat-popup modal fade show" id="alert_message_popUp" aria-modal="true" style=" display: block;z-index:999999999;opacity: 0.9;background-color: #000000b8;">'+
							'<div class="modal-dialog">'+
							  '<div class="modal-content">'+
								'<div class="modal-header">'+
								  '<h4 class="modal-title">IMPORTANT MESSAGE</h4>'+
								'</div>'+		  
								'<div class="modal-body">'+
								  '<p>'+
									  '<h5><i class="icon fas fa-info"></i> Alert!</h5>'+ message +
								  '</p>'+
								'</div>'+
								'<div class="modal-footer justify-content-between">'+
								  '<button type="button" class="daticash_btn btn-default" data-dismiss="modal" id="btn_close_modal">Cancel</button>'+
								  '<button type="button" class="daticash_btn btn-daticash" id="close_modal_lg">Compris!</button>'+
								'</div>'+
							  '</div>'+
							'</div>'+
						  '</div>'
	                );
	}

    function daticash_select_transaction_status_position(step){
    	console.log(step);
    		switch(step) {
        		case 1:
    				$(".step-one").addClass("finish active");
    				break;
    			case 2:
    				$(".step-one").addClass("finish active");$(".step-one i").removeClass("fa-user").addClass("fa-check text-success");
    				$(".step-two").addClass("finish active");
    				break;
    				
    			case 3:
    				$(".step-one").addClass("finish active");$(".step-one i").removeClass("fa-user").addClass("fa-check text-success");
    				$(".step-two").addClass("finish active");$(".step-two i").removeClass("fa-edit").addClass("fa-check text-success");				
    				$(".step-three").addClass("finish active");
    				break;
    			default :
    				$("#daticash_display_transaction_status_topUp").addClass("tab");			
    		}		
    }  

	function daticash_display_transaction_status_topUp(){
		return (
				'<div id="daticash_display_transaction_status_topUp">'+
					'<div class="head_steps text-center">'+
						'<span class="step step-one">'+
							'<div class="step-icon"><i class="fa fa-user"></i>'+
							'</div>'+
							'<p>User Account Verification</p>'+
						'</span>'+
						'<span class="step step-two">'+
							'<div class="step-icon"><i class="fa fa-edit"></i>'+
							'</div>'+
							'<p>Balance Check</p>'+
						'</span>'+
						'<span class="step step-three">'+
							'<div class="step-icon"><i class="fa fa-credit-card"></i>'+
							'</div>'+
							'<p>Transaction Processing</p>'+
						'</span>'+
					'</div>'+
				'</div>'
			);			
	}   	

/* fin de la dÃ©claration */

    $(document).ready(function(){
        
        /*Textbox Events*/
        $("body")
                .on('click', '#daticash_request_sms_code_btn', function(f){
                    var that = this;
    				$('#daticash_request_sms_code_btn').text('Processing...').prop('disabled', true);

    			        var resendSMSPath = '{{ path("send_sms", {'type': 'sms', 'id':'user_id'}) }}'; 
                        resendSMSPath = resendSMSPath.replace("user_id", user_id);
                        
                            fetch(resendSMSPath, {"method": "GET", "headers":{"apikey":"sec_5ed93806dd2ca"}})//check status url
                            {#fetch("https://api.daticash.com/api/users/" + user_id + "/send-activation-sms" , {"method": "GET", "headers":{"apikey":"sec_5ed93806dd2ca"}})//check status url#}
                        	  .then(
                        		function(response) {
                            		  if (!response.ok) {
                            		      console.log("application response after request sms code submit = ");
                            		      console.log(response);

                            		  }else{
                            		      console.log("application response after request sms code submit = ");
                            		      console.log(response);
                            		  // Examine the text in the response
                            			  response.json().then(function(data) {
                            				console.log("api response after submit  = " + data);
                            				if(data.waiting_time){
                            				    //valeur possible: resend ok/bad, key= phone
                                                left_time = data.waiting_time;
                                                //var sender_phone = that.tampon_data.phone_number.replace(/\d{6}$/i, "******");
                                                var phone_number = data.phone_number
            								    //alert(sender_phone)     
            									clearInterval(_rebordCount);
                                                
            										$("#dati_check_whith_sms").html('<hr><label for="dati_code">A SMS has been sent to '+phone_number+', please provide the token sent below...</label>'+
            																										'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="daticash_sms_code_input" id="daticash_sms_code_input" style="font-size: 55px;text-align: center;" maxlength="6" placeholder="xxxxxx">'+
            																										'<div class="col-12" style="flex-flow: row-reverse;">'+
            																										    '<div class="js_resend_sms">'+
            																										    '</div>'+
            																										'</div>'
            																							);
            										$('#daticash_request_sms_code_btn').prop('disabled', true);
            										$('#daticash_sms_code_input').focus();
            										
    								
                    								_rebordCount = setInterval(function() {
                    								    
                    										//requiert un numero de tÃ©lÃ©phone : crÃ©er la zone du numero de tel + boutn d'envoi
                    										$(".js_resend_sms").empty().append(
                    																		    '<p style="color: green;">SMS Successfully sent... </p>To try again please wait : '+left_time+' min : '+ second +'s</p>'								
                    																		       
                    																		);	
                    									second = second - 1;																		
                    								
                    									if(second === 0 && left_time === 0){
                    									$(".js_resend_sms").empty().append(
                    																		'<p style="color: #000; float: right;" class="mb-0"><span style="color: #000;">You hav\'n\'receive the SMS?&nbsp;</span>'+
                    																		'<a id ="resend_sms" name ="resend_sms" href="#">Resend now?&nbsp;&nbsp; |&nbsp;&nbsp;</a>'+
                    																		'<a id ="dati_cancel_sms_btn" name ="dati_cancel_sms_btn" href="#">Annuler</a></p>'
                    																	);	
                    												clearInterval(_rebordCount);					
                    									
                    									}else{
                    										if(second === 0){
                    											second = 59;
                    											left_time = left_time - 1;
                    										}											
                    									}
                    								}, 1000);            
                    								
                            				}else{
                            				    $(".login-feedback").append(
                                				        '<div class="alert alert-warning alert-dismissible  flash-notice">'+
                                                            '<i class="fa fa-exclamation-circle"></i>&nbspImpossible to send SMS Now, please try again later or check with your email, otherwise contact the Administrator"</a>'+
                                                            '<button type="button" class="close" data-dismiss="alert">&times;</button>'+
                                                        '</div>'
                            				        )
                            
    								            $('#daticash_request_sms_code_btn').text('Send me a sms to activate').prop('disabled', false);
                            				}					  
                            			})
                            		  }
                        		})
                        		
    					f.stopImmediatePropagation();
				})
                .on('keyup', '#daticash_sms_code_input', function(event){
			    	var that = this;
			    	event.stopImmediatePropagation();
					$(".alert").empty()//supprimer le message d'erreur s'il existe
					
					var caveVal = jQuery("#daticash_sms_code_input").val();
					var caveWidth = caveVal.length;
					var value = jQuery(this).val();
					value = value.replace(/[^0-9]+/g, '');
					jQuery(this).val(value);

					if (caveWidth == 6){
        						$('#daticash_sms_code_input').before('<div class="login_image_js"><img src="{{ absolute_url(asset("assets/img/loader-status.gif")) }}" /> Processing...</div>').remove(); // loader image apprears in the <div id="newComment"></div>			
						        $('#daticash_sms_code_input').remove();
    			        
    			        var proceedActivatePath = '{{ path("activate", {'id':'user_id', 'token': 'token'}) }}'; 
                        proceedActivatePath = proceedActivatePath.replace("user_id", user_id);
                        proceedActivatePath = proceedActivatePath.replace("token", caveVal);
                        
                        
                            fetch(proceedActivatePath, {"method": "GET", "headers":{"apikey":"sec_5ed93806dd2ca"}})//check status url
                        	  .then(
                        		function(response) {
                            		  if (!response.ok) {
                            		      console.log("application response after confirm code submit = ");
                            		      console.log(response);
                            		  }else{
                            		      console.log("api response after confirm code submit = ");
                            		      console.log(response);
                            		  // Examine the text in the response
                            			  response.json().then(function(data) {
                            				console.log("api response after submit  = " + data);
                            				if(data.code === 200){//activation reussi
                            				    {% if app.session.get('phone_number') is defined and app.session.get('phone_number')|length > 0 %}    
 				                                
                                                    $("body").append(
                                                                    '<form method="POST" action="{{ path("transactions_create_anonymous") }}" enctype="multipart/form-data" id="fileUploadForm">'+
                                                                        '<input type="text" name="id" value="1"/>'+
                                                                        '<input type="text" name="type" value="withdraw"/>'+
                                                                        '<input type="text" name="account_ref" value=""/>'+
                                                                        '<input type="text" name="amount_sent" value="app.session.get("amount_sent")"/>'+
                                                                        '<input type="text" name="currency_sent" value="app.session.get("currency_sent")"/>'+
                                                                        '<input type="text" name="recipient_phone" value="app.session.get("recipient_phone")"/>'+ 
                                                                        '<input type="text" name="recipient_country_code" value="app.session.get("recipient_country_code")"/>'+ 
                                                                        '<input type="text" name="sender_phone" value="app.session.get("sender_phone")"/>'+
                                                                        '<input type="text" name="sender_country_code" value="app.session.get("sender_country_code")"/>'+
                                                                        '<input type="text" name="reason" value="app.session.get("reason")"/>'+
                                                                        '<input type="text" name="recipient_account_num" value="app.session.get("recipient_account_num")"/>'+

                                                                    '</form>');
                                                                    
                                                        $("#fileUploadForm").submit();
                                                        
            										
                    							{% endif %}
                            				}else{
                            				        
                								    $('.login-feedback').html(show_alert('error', "Activation Failed. Check code and try again", 1));
                									$('.login_image_js').remove();
                									$('#dati_check_whith_sms hr').remove();
                									$('#dati_check_whith_sms').prepend(
                										'<hr>'+
                										'<input type="text" style="font-size: 55px;text-align: center;width: 100%;" name="daticash_sms_code_input" id="daticash_sms_code_input" maxlength="6" placeholder="xxxxxx">'
                									);                            				        
                            				  
                            				}					  
                            			})
                            		  }
                        		})				
	
								
					}
				})
				.on('click', '#close_modal_lg', function(){
					$('.modal').remove();
				})
				.on('click', '#btn_close_modal', function(f){
				    window.location = "https://daticash.com/send-cash/";	//retourner Ã  la page prÃ©cedente					
				})
				.on('click', '#dati_resend_me_mail', function(f){
				    
                        var resendMailPath = '{{ path("send_sms", {'type': 'mail', 'id':'user_id'}) }}'; 
                        resendMailPath = resendMailPath.replace("user_id", user_id);
    
            	    fetch(resendMailPath, {"method": "GET", "headers":{"apikey":"sec_5ed93806dd2ca"}})//check status url
                	  .then(
                		function(response) {
                			console.log("application response after submit checkUserStatus = " + response);
                		  // Examine the text in the response
                			  response.json().then(function(data) {
                				console.log("api response after submit checkUserStatus  = " + data);
                				console.log(data);
                				switch(data.code) {
                            		case 202:
                			            $('.login-feedback').append('<div class="alert alert-success alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbspMail have been successfully resend<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
                        				break;
                        			case 208:
                        				 $('.login-feedback').append('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbspThis user is already enabled and his mail has already been verified. sending Mail Canceled.<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
                        				break;
                        			case 400:
                        				 $('.login-feedback').append('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbspSomething is wrong with the request, possibly missing or improperly formatted parameter.<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
                        				break;
                        			case 403:
                        				 $('.login-feedback').append('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbsp Used ApiKey owner does not have permission to access this resource.<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
                        				break;
                        			default :
                        				 $('.login-feedback').append('<div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i>&nbsp Error Connection<button type="button" class="close" data-dismiss="alert">&times;</button></div>');
                        		}				  
                			})
                		})
            	})
            	.on('focus', 'input', '.login-form input, .login-form textarea' , function() {
					$("#password-feedback").empty();
					$("#username-feedback").empty();
					$("#email-feedback").empty();
					$(".login-feedback").empty();
					
				// daticash reset or change pin	
					$("#check_pin_code_correspondance-feedback").empty();
					$("#new_pin_code_label").removeClass('text-danger');
					$("#retype_new_pin_code_label").removeClass('text-danger');
					
				})
                .on('click', '#exit_btn' , function() {
                        var href = '{{ path("dashboard.index") }}';
                        window.location = href;
    				})
				
        /*TextBox Action */
            $('#body_mask').after(daticash_confirm_token_form_popUp(user_email));
               
                let checkUserStatusPath = "https://api.daticash.com/api/user/";

        	var _autoTimer = setInterval(function() {
        	    fetch("https://api.daticash.com/api/user/" + user_id , {"method": "GET", "headers":{"apikey":"sec_5ed93806dd2ca"}})//check status url
            	  .then(
            		function(response) {
            			console.log("application response after submit checkUserStatus = " + response);
            		  // Examine the text in the response
            			  response.json().then(function(data) {
            				console.log("api response after submit checkUserStatus  = " + data);
            				if(data.enabled == true){
            					clearInterval(_autoTimer);
            					$(".chat-popup").remove();
            						
            					$('#body_mask').after(daticash_email_verified_popUp());
            			        $('.login-feedback').append('<div class="alert alert-success text-center">Great !!!</div>');

            				    {% if app.session.get('phone_number') is defined and app.session.get('phone_number')|length > 0 %}    
                                 
                                    $("body").append(
                                                    '<form method="POST" action="{{ path("transactions_create_anonymous") }}" enctype="multipart/form-data" id="fileUploadForm">'+
                                                        '<input type="text" name="id" value="1"/>'+
                                                        '<input type="text" name="type" value="withdraw"/>'+
                                                        '<input type="text" name="account_ref" value=""/>'+
                                                        '<input type="text" name="amount_sent" value="app.session.get("amount_sent")"/>'+
                                                        '<input type="text" name="currency_sent" value="app.session.get("currency_sent")"/>'+
                                                        '<input type="text" name="recipient_phone" value="app.session.get("recipient_phone")"/>'+ 
                                                        '<input type="text" name="recipient_country_code" value="app.session.get("recipient_country_code")"/>'+ 
                                                        '<input type="text" name="sender_phone" value="app.session.get("sender_phone")"/>'+
                                                        '<input type="text" name="sender_country_code" value="app.session.get("sender_country_code")"/>'+
                                                        '<input type="text" name="reason" value="app.session.get("reason")"/>'+
                                                        '<input type="text" name="recipient_account_num" value="app.session.get("recipient_account_num")"/>'+

                                                    '</form>');
                                                    
                                        $("#fileUploadForm").submit();
                                        
    							{% endif %}           
            			        
            				}					  
            			})
            		})
	
        	}, 10000);

            {% if app.session.get('phone_number') is defined and app.session.get('phone_number')|length > 0 %}
                $(".dati_login_row").remove();
	            var message_alert = 'Required activation of your account.Check your mail and active it.</br>'; //get value	
            
			 	if(message_alert !== ""){
					$('.container').append(alert_message_popUp (message_alert));
					message_alert = "";
				}
				
                $("#phone_number").val("{{app.session.get('phone_number')}}");
                
				$(".iti__selected-flag").trigger("click");
				$(".iti__country[data-dial-code='{{app.session.get('country_code')}}']").trigger("click");
			
			    $("#phone_number").prop('disabled', true);
				
				$('#daticash_display_transaction_status_topUp').remove();			
				$('.login-logo').after(daticash_display_transaction_status_topUp());
				daticash_select_transaction_status_position(1);	
				
            {% endif %}        	
    });
    

//--></script>

{% endblock %}